<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных1</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Требование</dataPath>
			<field>Требование</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НоменклатураЗаказа</dataPath>
			<field>НоменклатураЗаказа</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ИдентификаторСтроки</dataPath>
			<field>ИдентификаторСтроки</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Состояние</dataPath>
			<field>Состояние</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Описание</dataPath>
			<field>Описание</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаЗаказа</dataPath>
			<field>ДатаЗаказа</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Количество</dataPath>
			<field>Количество</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КодСтроки</dataPath>
			<field>КодСтроки</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПриходнаяНакладная</dataPath>
			<field>ПриходнаяНакладная</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЗаказПоставщику</dataPath>
			<field>ЗаказПоставщику</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДокументПередачиВОтделение</dataPath>
			<field>ДокументПередачиВОтделение</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЗаявкаНаЗакупку</dataPath>
			<field>ЗаявкаНаЗакупку</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Отделение</dataPath>
			<field>Отделение</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Отделение</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Менеджер</dataPath>
			<field>Менеджер</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Менеджер</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЖелаемаяДатаПоступления</dataPath>
			<field>ЖелаемаяДатаПоступления</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Желаемая дата поступления</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаВЗаказеПоставщику</dataPath>
			<field>СуммаВЗаказеПоставщику</field>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ
	СостоянияТребованийОтделений.НоменклатураЗаказа КАК НоменклатураЗаказа,
	СостоянияТребованийОтделений.Номенклатура КАК Номенклатура,
	СостоянияТребованийОтделений.Требование КАК Требование,
	СостоянияТребованийОтделений.ИдентификаторСтроки КАК ИдентификаторСтроки,
	СостоянияТребованийОтделений.КодСтроки КАК КодСтроки,
	СостоянияТребованийОтделений.Состояние КАК Состояние,
	СостоянияТребованийОтделений.Описание КАК Описание,
	СостоянияТребованийОтделений.Количество КАК Количество,
	СостоянияТребованийОтделений.ЗаказПоставщику КАК ЗаказПоставщику,
	СостоянияТребованийОтделений.ПриходнаяНакладная КАК ПриходнаяНакладная,
	СостоянияТребованийОтделений.ДокументПередачиВОтделение КАК ДокументПередачиВОтделение,
	СостоянияТребованийОтделений.ЗаявкаНаЗакупку КАК ЗаявкаНаЗакупку,
	СостоянияТребованийОтделений.ДатаЗаказа КАК ДатаЗаказа,
	СостоянияТребованийОтделений.Требование.Отделение КАК Отделение,
	ВЫБОР
		КОГДА НЕ сок_БуферДляЗакупки.Менеджер ЕСТЬ NULL
			ТОГДА сок_БуферДляЗакупки.Менеджер
		ИНАЧЕ ВЫБОР
				КОГДА СостоянияТребованийОтделений.ЗаказПоставщику = ЗНАЧЕНИЕ(Документ.Заказпоставщику.ПустаяСсылка)
					ТОГДА ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
				ИНАЧЕ СостоянияТребованийОтделений.ЗаказПоставщику.Ответственный
			КОНЕЦ
	КОНЕЦ КАК Менеджер,
	ВЫБОР
		КОГДА НЕ сок_БуферДляЗакупки.ЖелаемаяДатаПоступления ЕСТЬ NULL
			ТОГДА сок_БуферДляЗакупки.ЖелаемаяДатаПоступления
		ИНАЧЕ ВЫБОР
				КОГДА СостоянияТребованийОтделений.ЗаказПоставщику = ЗНАЧЕНИЕ(Документ.Заказпоставщику.ПустаяСсылка)
					ТОГДА ДАТАВРЕМЯ(1, 1, 1)
				ИНАЧЕ СостоянияТребованийОтделений.ЗаказПоставщику.ЖелаемаяДатаПоступления
			КОНЕЦ
	КОНЕЦ КАК ЖелаемаяДатаПоступления,
	СостоянияТребованийОтделений.СуммаВЗаказеПоставщику КАК СуммаВЗаказеПоставщику
ИЗ
	РегистрСведений.СостоянияТребованийОтделений КАК СостоянияТребованийОтделений
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.сок_БуферДляЗакупки КАК сок_БуферДляЗакупки
		ПО СостоянияТребованийОтделений.ИдентификаторСтроки = сок_БуферДляЗакупки.ИдентификаторСтроки
			И СостоянияТребованийОтделений.КодСтроки = сок_БуферДляЗакупки.КодСтроки
			И СостоянияТребованийОтделений.Требование = сок_БуферДляЗакупки.Требование</query>
	</dataSet>
	<totalField>
		<dataPath>СуммаВЗаказеПоставщику</dataPath>
		<expression>Сумма(СуммаВЗаказеПоставщику)</expression>
	</totalField>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Отчет по состяниям требований отделений</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Отделение</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Требование</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>НоменклатураЗаказа</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Номенклатура</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Состояние</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Количество</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Менеджер</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ЖелаемаяДатаПоступления</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДатаЗаказа</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ЗаявкаНаЗакупку</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ЗаказПоставщику</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПриходнаяНакладная</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДокументПередачиВОтделение</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СуммаВЗаказеПоставщику</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">Состояние</dcsset:left>
					<dcsset:comparisonType>NotInList</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Перечисление.СостоянияТребований.Передано</dcsset:right>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Перечисление.СостоянияТребований.Отменено</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Отделение</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:userSettingID>b056e477-092c-4743-8f17-73f715229ac4</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Номенклатура</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:userSettingID>e03653a3-39eb-4ea8-a5f5-0ca3d6ad4e21</dcsset:userSettingID>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Требование</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:userSettingID>39537b8a-1fb5-457d-84d2-0dc6747cf489</dcsset:userSettingID>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:groupItems>
					<dcsset:item xsi:type="dcsset:GroupItemField">
						<dcsset:field>Состояние</dcsset:field>
						<dcsset:groupType>Items</dcsset:groupType>
						<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
						<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
						<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
					</dcsset:item>
				</dcsset:groupItems>
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
				<dcsset:item xsi:type="dcsset:StructureItemGroup">
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:item>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>