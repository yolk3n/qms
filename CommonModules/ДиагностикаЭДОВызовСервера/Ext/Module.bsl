////////////////////////////////////////////////////////////////////////////////
// ДиагностикаЭДОВызовСервера: механизм диагностики обмена электронными документами.
//
////////////////////////////////////////////////////////////////////////////////

#Область СлужебныеПроцедурыИФункции

// Запускает длительную операцию выполнения диагностики обмена электронными документами.
// 
// Параметры:
// 	ПараметрыВыполненияДиагностики - Неопределено - Описание
// Возвращаемое значение:
// 	См. ДлительныеОперации.ВыполнитьВФоне
Функция ВыполнитьДиагностику(ПараметрыВыполненияДиагностики = Неопределено) Экспорт
	
	ПараметрыВыполнения = ДлительныеОперации.ПараметрыВыполненияФункции(Новый УникальныйИдентификатор);
	ПараметрыВыполнения.ОжидатьЗавершение = 0;
	ДлительнаяОперация = ДлительныеОперации.ВыполнитьФункцию(ПараметрыВыполнения, "ДиагностикаЭДОСлужебный.ВыполнитьДиагностику",
		ПараметрыВыполненияДиагностики);
	
	Возврат ДлительнаяОперация;
	
КонецФункции 

Процедура ЗаполнитьОтчетыДляАдминистратора(РезультатДиагностики, ВидыДиагностики, ПараметрыВыполненияДляОтчета) Экспорт
	
	Если ДиагностикаЭДОКлиентСервер.ЕстьВидДиагностики(ВидыДиагностики,
		ДиагностикаЭДОКлиентСервер.ВидДиагностикиКриптография()) Тогда
		
		РезультатДиагностикиКриптографии = ДиагностикаЭДОКлиентСервер.РезультатВидаДиагностики(РезультатДиагностики,
			ДиагностикаЭДОКлиентСервер.ВидДиагностикиКриптография());
		
		РезультатДиагностикиКриптографии.ОтчетДляАдминистратора =
			ДиагностикаЭДОСлужебный.ОтчетДляАдминистратораКриптография(РезультатДиагностикиКриптографии, ПараметрыВыполненияДляОтчета);
		
	КонецЕсли;
	
	Если ДиагностикаЭДОКлиентСервер.ЕстьВидДиагностики(ВидыДиагностики,
		ДиагностикаЭДОКлиентСервер.ВидДиагностикиТестАутентификации())
		И Не ДиагностикаЭДОКлиентСервер.СкрыватьРезультатТестаАутентификации(РезультатДиагностики) Тогда
		
		РезультатТестаАутентификации = ДиагностикаЭДОКлиентСервер.РезультатВидаДиагностики(РезультатДиагностики,
			ДиагностикаЭДОКлиентСервер.ВидДиагностикиТестАутентификации());
		
		РезультатТестаАутентификации.ОтчетДляАдминистратора =
			ДиагностикаЭДОСлужебный.ОтчетДляАдминистратораТестАутентификации(РезультатТестаАутентификации, ПараметрыВыполненияДляОтчета);
		
	КонецЕсли;
		
КонецПроцедуры

Функция УчетныеДанныеАбонентаТакском(ДанныеМаркера) Экспорт
	
	Если ЭтоАдресВременногоХранилища(ДанныеМаркера) Тогда
		ДвоичныеДанныеМаркера = ПолучитьИзВременногоХранилища(ДанныеМаркера);
	Иначе
		ДвоичныеДанныеМаркера = ДанныеМаркера;
	КонецЕсли;
		
	Возврат СервисЭДО.ИнформацияОбУчетнойЗаписи(ДвоичныеДанныеМаркера);
	
КонецФункции

#КонецОбласти

