#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ПрограммныйИнтерфейс

// Добавляет сообщение в очередь.
//
// Параметры:
//   ДвоичныеДанныеСообщения - ДвоичныеДанные - данные сообщения.
//   КонтрольОтправкиФайлов - ТаблицаЗначений - см. ИнтеграцияС1СДокументооборотБазоваяФункциональность.КонтрольОтправкиФайлов
//   Идентификатор - УникальныйИдентификатор - идентификатор сообщения;
//
Процедура ДобавитьСообщение(ДвоичныеДанныеСообщения, КонтрольОтправкиФайлов, Идентификатор = Неопределено) Экспорт
	
	Менеджер = РегистрыСведений.ОчередьСообщенийВ1СДокументооборот.СоздатьМенеджерЗаписи();
	
	Менеджер.МоментВремени = ТекущаяУниверсальнаяДатаВМиллисекундах();
	Если Идентификатор = Неопределено Тогда
		Менеджер.Идентификатор = Новый УникальныйИдентификатор();
	Иначе
		Менеджер.Идентификатор = Идентификатор;
	КонецЕсли;
	
	Менеджер.Данные = Новый ХранилищеЗначения(ДвоичныеДанныеСообщения, Новый СжатиеДанных(9));
	Менеджер.КонтрольОтправкиФайлов = Новый ХранилищеЗначения(КонтрольОтправкиФайлов);
	
	Менеджер.ДатаСоздания = ТекущаяДатаСеанса();
	
	Менеджер.Записать(Истина);
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли