<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta http-equiv="content-type" content="text/html;charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link></head><body>
<p>Интеграция с «1С:Документооборотом» позволяет создавать документы, мероприятия и контрагентов в «1С:Документооборот» на основании документов и элементов справочников интегрируемой конфигурации. Запуск бизнес-процессов на основании документов и элементов справочников интегрируемой конфигурации требуют предварительного создания связанных документов «1С:Документооборота», которые и станут предметами создаваемых бизнес-процессов.</p>
<p>Важно отметить, что настройка создания и обновления реквизитов объектов «1С:Документооборота» выполняется на стороне «1С:Документооборота» в справочнике <strong>Правила загрузки данных в 1С:Документооборот</strong>, а настройка обновления реквизитов объектов интегрируемой конфигурации выполняется на стороне интегрируемой конфигурации в справочнике <strong>Правила интеграции</strong>. При этом для настройки правил предварительно нужно опубликовать и веб-сервис «1С:Документооборот», и веб-сервис БИД.</p>
<p>На стороне интегрируемой конфигурации в правилах интеграции нужно будет указать ссылку на соответствующие им заранее созданные правила загрузки данных в «1С:Документооборот». Поэтому начинать настройку лучше с базы «1С:Документооборота» и уже затем переходить к настройке интегрируемой конфигурации. Подробная информация по настройке <strong>Правил загрузки данных в 1С:Документооборот</strong> приведена в документации к «1С:Документообороту».</p>
<p>Основное предназначение справочника <strong>Правила интеграции</strong> – установка связи между тем или иным типом объекта интегрируемой конфигурации, на основании которого мы хотим создавать в «1С:Документообороте» связанный объект, и <strong>Правилом загрузки данных в 1С:Документооборот</strong>, по которому связанный объект будет заполняться. В каждом правиле интеграции указывается тип документа или справочника интегрируемой конфигурации и соответствующее ему <strong>Правило загрузки данных в 1С:Документооборот</strong>.</p>
<p>Если одному типу документа или справочнику соответствует несколько разных видов документов «1С:Документооборота», то для каждого соответствия создается свое правило интеграции. В этом случае следует определить ключевой реквизит документа или справочника интегрируемой конфигурации, значения которого соответствуют видам документов «1С:Документооборота», поставив флажок <strong>Ключевой</strong> и выбрав соответствующее значение реквизита на закладке <strong>Ключевые реквизиты</strong>. Например, настраивая интеграцию для справочника Демо: Договоры контрагентов, можно выбрать в качестве ключевого реквизит Вид документа, создав три правила интеграции: договорам вида С покупателем будут соответствовать внутренние документы «1С:Документооборота» вида Договор с покупателем, договорам вида С поставщиком – документы вида Договор с поставщиком, договорам вида Прочее – Прочие договоры.</p>
<p>Правила заполнения реквизитов настраиваются по умолчанию при выборе типов связываемых объектов. К настройкам по умолчанию можно вернуться по команде <strong>Заполнить по умолчанию</strong> подменю <strong>Еще</strong>.</p>
<p>Правило заполнения для каждого реквизита настраивается в отдельном окне, открыть которое можно по двойным щелчком или командой <strong>Изменить</strong>.</p>
<p>Реквизит может заполняться:</p>
<ul><li>Из реквизита объекта 1С:Документооборота – например, реквизит Организация документа интегрируемой конфигурации может заполняться по значению определенного реквизита документа «1С:Документооборота». Требуется выбрать реквизит-источник. Флажок <strong>Обновлять</strong> управляет автоматическим обновлением значения реквизита в интегрируемой конфигурации при его изменении на стороне «1С:Документооборота».</li>
<li>Из указанного значения – реквизит всегда заполняется одним и тем же значением из базы интегрируемого прикладного решения, выбранным в момент настройки.</li>
<li>Из выражения на встроенном языке – реквизит заполняется по результату выражения на встроенном языке «1С:Предприятия» (может выполняться как на стороне «1С:Документооборота», так и на стороне интегрируемой конфигурации). Выражение должно присваивать значение свойству Результат переменной-структуры с именем Параметры. Свойство Источник той же структуры Параметры в контексте выполнения выражения содержит ссылку на объект-источник, через которую можно обращаться к его реквизитам. Более подробно о встроенном языке «1С:Предприятия» см. книгу «1С:Предприятие 8.3. Руководство разработчика».</li>
</ul><p>Для очистки правила заполнения реквизита следует выделить нужную строку и выбрать в контекстном меню команду Очистить или нажать клавишу Del.</p>
<p>Поскольку изменение реквизитов проведенных документов не всегда допустимо, для правил заполнения реквизитов документов интегрируемой конфигурации предусмотрена дополнительная настройка <strong>Изменение в проведенном документе</strong>. Для реквизитов вроде комментария, от которых не зависят движения документа, можно выбрать вариант <strong>Разрешено без перепроведения</strong>. Для реквизитов, участвующих в формировании движений, следует выбрать варианты <strong>Запрещено</strong> или <strong>Разрешено с перепроведением</strong>.</p>
<p>Табличные части могут заполняться:</p>
<ul><li>Из таблицы – например, таблица <strong>Товары</strong> интегрируемой конфигурации будет заполняться данными таблицы <strong>Товары и услуги</strong> документа «1С:Документооборота». Для реквизитов этой таблицы нужно будет задать свои правила заполнения, причем в качестве источника можно будет выбрать как реквизиты выбранной здесь таблицы, так и любые другие реквизиты объекта, а также, при необходимости, выражение на встроенном языке или заполнение из указанного значения.</li>
<li>Из выражения на встроенном языке – таблица заполняется по результату выражения на встроенном языке «1С:Предприятия» (может выполняться как на стороне «1С:Документооборота», так и на стороне интегрируемой конфигурации). Выражение должно присваивать свойству Результат переменной-структуры с именем Параметры значение типа <strong>ТаблицаЗначений</strong>. Имена ее колонок должны совпадать с именами заполняемых реквизитов таблицы. При этом варианте указать отдельные правила для реквизитов таблицы будет нельзя.</li>
<li>По правилам для отдельных реквизитов – общего правила для таблицы нет, правила настраиваются отдельно для каждого ее реквизита. В таблице-приемнике будет создана всего одна строка, заполненная по указанным для реквизитов таблицы правилам. При этом варианте выбрать в качестве источника заполнения реквизита таблицы можно будет только не табличный реквизит объекта-источника.</li>
</ul><p>На закладке <strong>Ключевые реквизиты</strong> можно дополнительно отметить ключевые реквизиты. Это не обязательное действие, его нужно выполнять, когда для одного типа объектов интегрируемого прикладного решения настраивается несколько различных правил.</p>
<p>Флажок <strong>Ключевой</strong> указывает, что правило интеграции будет применяться только для объектов с указанным значением реквизита, что позволяет определить несколько правил для одного типа объекта (вида документа), разделив их по значениям ключевых реквизитов. Ключевые реквизиты могут заполняться только из явно указанного значения. <strong>Вид документа</strong> всегда является ключевым. Например, для договора контрагента на стороне интегрируемой конфигурации ключевым может быть реквизит <strong>Вид договора</strong>, принимающий значения <strong>С покупателем</strong>, <strong>С поставщиком</strong> или <strong>Прочее</strong>.</p>
</body></html>