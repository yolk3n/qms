#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("Организация") Тогда
		Организация = Параметры.Организация;
		Настройки = ЭлектронноеАктированиеЕИС.НастройкиОбменаЕИС(Параметры.Организация);
		ЕстьНастройкиОбменаПоОрганизации = ЗначениеЗаполнено(Настройки);
	Иначе
		ЕстьНастройкиОбменаПоОрганизации = Истина;
	КонецЕсли;
	
	РазрешаетсяИспользоватьЭлектронноеАктированиеЕИС =
		ЭлектронноеАктированиеЕИС.РазрешаетсяИспользоватьЭлектронноеАктированиеДляПоставщиков();
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	Если НЕ ЕстьНастройкиОбменаПоОрганизации
		И РазрешаетсяИспользоватьЭлектронноеАктированиеЕИС Тогда
		ПодключитьОбработчикОжидания("ОбработчикОжиданияОткрытияФормыМастераНастроек", 0.5, Истина);
	КонецЕсли;

КонецПроцедуры

#КонецОбласти

#Область ОбработчикиОжидания

&НаКлиенте
Процедура ОбработчикОжиданияОткрытияФормыМастераНастроек()
	
	ЭлектронноеАктированиеЕИСКлиент.ОткрытьМастерНастроек(
		Организация,
		УникальныйИдентификатор);
	
КонецПроцедуры

#КонецОбласти
