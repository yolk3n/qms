<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП21">2.01</ВерсияФормата>
	<Ид>5ef98111-7743-43f0-b31f-d91c74ec0c30    </Ид>
	<Наименование>БА_2_2_7 --&gt; БГУ_2_0_90</Наименование>
	<ДатаВремяСоздания>2023-06-28T14:43:00</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="2.2.7.13" СинонимКонфигурации="Медицина. Больничная аптека, редакция 2.2">БольничнаяАптека</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="2.0.90.57" СинонимКонфигурации="Бухгалтерия государственного учреждения, редакция 2.0">БухгалтерияГосударственногоУчреждения</Приемник>
	<ПередПолучениемИзмененныхОбъектов>Параметры.Вставить("УзелДляОбменаСсылка"                , УзелДляОбмена.Ссылка);
Параметры.Вставить("УзелДатаНачалаВыгрузкиДокументов"   , УзелДляОбмена.ДатаНачалаВыгрузкиДокументов);
Параметры.Вставить("УзелИспользоватьОтборПоОрганизации" , УзелДляОбмена.ИспользоватьОтборПоОрганизациям);
Параметры.Вставить("УзелВыгружатьВОсновныхЕдиницахУчета", УзелДляОбмена.ВыгружатьВОсновныхЕдиницахУчета);
Параметры.Вставить("УзелОтключитьСписаниеПриОтпускеВОтделениеБезСкладскогоУчета", УзелДляОбмена.ОтключитьСписаниеПриОтпускеВОтделениеБезСкладскогоУчета);
Параметры.Вставить("УзелВыгружатьВнутреннееПотреблениеВАктСписания", УзелДляОбмена.ВыгружатьВнутреннееПотреблениеВАктСписания);

Параметры.Вставить("УзелВыгрузитьСтоимость"                , УзелДляОбмена.РежимВыгрузкиДвиженийНоменклатуры = Перечисления.РежимыВыгрузкиДвиженийНоменклатуры.НоменклатураСтоимость);
Параметры.Вставить("УзелВыгрузитьКоличествоСтоимость"      , УзелДляОбмена.РежимВыгрузкиДвиженийНоменклатуры = Перечисления.РежимыВыгрузкиДвиженийНоменклатуры.НоменклатураКоличествоСтоимость);
Параметры.Вставить("УзелВыгрузитьГруппуБухгалтерскогоУчета", УзелДляОбмена.РежимВыгрузкиДвиженийНоменклатуры = Перечисления.РежимыВыгрузкиДвиженийНоменклатуры.ГруппыБухгалтерскогоУчетаСтоимость);

СписокОрганизаций = Новый СписокЗначений;
СписокОрганизаций.ЗагрузитьЗначения(УзелДляОбмена.Организации.ВыгрузитьКолонку("Организация"));
Параметры.Вставить("УзелСписокОрганизаций", СписокОрганизаций);

Параметры.Вставить("СчетаУчетаОпераций", Новый Соответствие);

Параметры.Вставить("ВалютаРегламентированногоУчета", Константы.ВалютаРегламентированногоУчета.Получить());</ПередПолучениемИзмененныхОбъектов>
	<ПослеПолученияИнформацииОбУзлахОбмена>Параметры.Вставить("РазрешитьПроведениеДокументовПриЗагрузке", УзелОбменаЗагрузкаДанных.РазрешитьПроведениеДокументовПриЗагрузке);
Параметры.Вставить("НоменклатурнаяГруппа"                    , УзелОбменаЗагрузкаДанных.НоменклатурнаяГруппа);
Параметры.Вставить("ВидЗатратПроизводства"                   , УзелОбменаЗагрузкаДанных.ВидЗатратПроизводства);
Параметры.Вставить("ПриниматьДенежныеОбязательства"          , УзелОбменаЗагрузкаДанных.ПриниматьДенежныеОбязательства);</ПослеПолученияИнформацииОбУзлахОбмена>
	<ПередЗагрузкойДанных>///////////////////////////////////////////////////////////////////
// Инициализация таблицы для отложенного заполнения документов

ЗагруженныеОбъекты = Новый ТаблицаЗначений;
ЗагруженныеОбъекты.Колонки.Добавить("ИмяПКО");
ЗагруженныеОбъекты.Колонки.Добавить("Объект");
ЗагруженныеОбъекты.Колонки.Добавить("Параметры");

Параметры.Вставить("ЗагруженныеОбъекты", ЗагруженныеОбъекты);</ПередЗагрузкойДанных>
	<ПослеЗагрузкиДанных>///////////////////////////////////////////////////////////////////
// Выполнение отложенного заполнения документов

ЗагруженныеОбъекты = Параметры.ЗагруженныеОбъекты;

Выполнить(Алгоритмы.ПроверитьДатуЗапретаЗагрузкиДанныхОбъектов);

// Необходимо обеспечить следующий порядок заполнения:
// - справочники
// - документы
ЗагруженныеОбъекты.Колонки.Добавить("Очередность");
ЗагруженныеОбъекты.Колонки.Добавить("ДатаДляСортировкиДокументов");
Для Каждого СтрокаТаблицы Из ЗагруженныеОбъекты Цикл
	
	МетаданныеОбъекта = СтрокаТаблицы.Объект.МетаДанные();
	Если Метаданные.Справочники.Содержит(МетаданныеОбъекта)
	 Или Метаданные.ПланыВидовХарактеристик.Содержит(МетаданныеОбъекта) Тогда
		СтрокаТаблицы.Очередность = 1;
	ИначеЕсли Метаданные.Документы.Содержит(МетаданныеОбъекта) Тогда
		
		СтрокаТаблицы.ДатаДляСортировкиДокументов = СтрокаТаблицы.Объект.МоментВремени();
		
		Выполнить(Алгоритмы.УстановитьОчередностьДокументов);
		
	Иначе
		СтрокаТаблицы.Очередность = 3;
	КонецЕсли;
	
КонецЦикла;

ЗагруженныеОбъекты.Сортировать("Очередность, ДатаДляСортировкиДокументов, ИмяПКО");

Для Каждого СтрокаТаблицы Из ЗагруженныеОбъекты Цикл
	
	Если СтрокаТаблицы.Объект.ЭтоНовый() Тогда
		Продолжить;
	КонецЕсли;
	
	Объект = СтрокаТаблицы.Объект.Ссылка.ПолучитьОбъект();
	ИмяПКО = СтрокаТаблицы.ИмяПКО;
	ПараметрыОбъекта = СтрокаТаблицы.Параметры;
	
	ОбъектМодифицирован = Истина;
	
	Если Метаданные.Документы.Содержит(Объект.МетаДанные()) Тогда
		Выполнить(Алгоритмы.ЗаполнениеДокументовОтложенное);
	ИначеЕсли Метаданные.Справочники.Содержит(Объект.МетаДанные()) Тогда
		Выполнить(Алгоритмы.ЗаполнениеСправочниковОтложенное);
	КонецЕсли;
	
	Если ОбъектМодифицирован Тогда
		
		// Опция обработки документов для БГУ КОРП.
		Объект.ДополнительныеСвойства.Вставить("ПроцессыОбработкиДокументов_ЗаписатьБезПроверкиОбменДаннымиЗагрузка", Истина);
		
		Объект.ОбменДанными.Загрузка = Истина;
		Объект.Записать();
		
	КонецЕсли;
	
КонецЦикла;</ПослеЗагрузкиДанных>
	<ПередКонвертациейОбъекта>Если ТипЗнч(ВходящиеДанные) &lt;&gt; Тип("Структура") Тогда
	ВходящиеДанные = Новый Структура;
КонецЕсли;
Если ТипЗнч(ИсходящиеДанные) = Тип("Структура") Тогда
	ВходящиеДанные = ИсходящиеДанные;
КонецЕсли;</ПередКонвертациейОбъекта>
	<ПослеВыгрузкиОбъекта>// Обход ошибки обработки конвертации.
// Суть: Входящие данные не очищаются между обработками объектов правилами выгрузки данных.
// При этом входящие данные накапливаются.
ВходящиеДанные = Неопределено;</ПослеВыгрузкиОбъекта>
	<ПослеЗагрузкиОбъекта>Если ОбщегоНазначения.ЭтоДокумент(Метаданные.НайтиПоТипу(ТипЗнч(Объект))) Тогда
	Выполнить(Алгоритмы.ОбработатьЗаписьДокументаПослеЗагрузки);
КонецЕсли;</ПослеЗагрузкиОбъекта>
	<ПередОтправкойИнформацииОбУдалении>
ТипИсточника = ТипЗнч(Ссылка);
СписокПКО = ТаблицаПравилКонвертации.НайтиСтроки(Новый Структура("Источник", ТипИсточника));

Если СписокПКО.Количество() &gt; 0 Тогда
	
	Если ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования")
	   И Метаданные.РегистрыСведений.ДетализацияОбмена.Измерения.Объект.Тип.СодержитТип(ТипЗнч(Ссылка)) Тогда
		
		Запрос = Новый Запрос("
		|ВЫБРАТЬ
		|	УникальныйИдентификатор
		|ИЗ
		|	РегистрСведений.ДетализацияОбмена
		|ГДЕ
		|	Объект = &amp;Ссылка
		|");
		Запрос.УстановитьПараметр("Ссылка", Ссылка);
		Результат = Запрос.Выполнить();
		
		Если Не Результат.Пустой() Тогда
			
			Отказ = Истина;
			Выборка = Результат.Выбрать();
			
			МенеджерОбъекта = ОбщегоНазначения.МенеджерОбъектаПоСсылке(Ссылка);
			Пока Выборка.Следующий() Цикл
				СсылкаНаУдаляемыйОбъект = МенеджерОбъекта.ПолучитьСсылку(Новый УникальныйИдентификатор(Выборка.УникальныйИдентификатор));
				Для Каждого ПКО_Объекта Из СписокПКО Цикл
					ТипИсточника = ПКО_Объекта.ТипИсточника;
					ТипПриемника = ПКО_Объекта.ТипПриемника;
					ЗаписатьВФайлУдалениеОбъекта(СсылкаНаУдаляемыйОбъект, ТипПриемника, ТипИсточника);
				КонецЦикла;
			КонецЦикла;
			
		ИначеЕсли СписокПКО.Количество() &gt; 1 Тогда
			Отказ = Истина;
			Для Каждого ПКО_Объекта Из СписокПКО Цикл
				ТипИсточника = ПКО_Объекта.ТипИсточника;
				ТипПриемника = ПКО_Объекта.ТипПриемника;
				ЗаписатьВФайлУдалениеОбъекта(Ссылка, ТипПриемника, ТипИсточника);
			КонецЦикла;
		КонецЕсли;
		
	ИначеЕсли СписокПКО.Количество() &gt; 1 Тогда
		Отказ = Истина;
		Для Каждого ПКО_Объекта Из СписокПКО Цикл
			ТипИсточника = ПКО_Объекта.ТипИсточника;
			ТипПриемника = ПКО_Объекта.ТипПриемника;
			ЗаписатьВФайлУдалениеОбъекта(Ссылка, ТипПриемника, ТипИсточника);
		КонецЦикла;
	КонецЕсли;
	
КонецЕсли;

Если ТипИсточника = Тип("ДокументСсылка.РасчетСебестоимостиТоваров") Тогда
	Отказ = Истина;
	ИсходящиеДанные = Новый Структура;
	ИсходящиеДанные.Вставить("УдалениеОбъекта");
	ИсходящиеДанные.Вставить("ИДИсточника", Ссылка.УникальныйИдентификатор());
	ВыгрузитьПоПравилу(Ссылка,, ИсходящиеДанные,, "ОперацияБух");
КонецЕсли;</ПередОтправкойИнформацииОбУдалении>
	<ПриПолученииИнформацииОбУдалении>МетаданныеОбъекта = Объект.Метаданные();

Если Метаданные.Справочники.Содержит(МетаданныеОбъекта) Тогда
	
	Отказ  = Истина;
	
	УстановитьПометкуУдаленияУОбъекта(Объект, Истина, "Справочник");
	
ИначеЕсли Метаданные.Документы.Содержит(МетаданныеОбъекта) Тогда
	
	Отказ  = Истина;
	
	Если Объект.Проведен Тогда
		
		ОтменитьПроведениеОбъектаВИБ(Объект, ТипЗнч(Объект));
		
	КонецЕсли;
	
	УстановитьПометкуУдаленияУОбъекта(Объект, Истина, "Документ");
	
ИначеЕсли Метаданные.ПланыВидовХарактеристик.Содержит(МетаданныеОбъекта) Тогда
	
	Отказ  = Истина;
	
	УстановитьПометкуУдаленияУОбъекта(Объект, Истина, "ПланВидовХарактеристик");
	
КонецЕсли;</ПриПолученииИнформацииОбУдалении>
	<Параметры/>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>ТипыКонтактнойИнформации</Код>
				<Наименование>Перечисление: Типы контактной информации</Наименование>
				<Порядок>50</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>50</Порядок>
						<Источник>Адрес</Источник>
						<Приемник>Адрес</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>АдресЭлектроннойПочты --&gt; АдресЭлектроннойПочты</Наименование>
						<Порядок>100</Порядок>
						<Источник>АдресЭлектроннойПочты</Источник>
						<Приемник>АдресЭлектроннойПочты</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ВебСтраница --&gt; ВебСтраница</Наименование>
						<Порядок>150</Порядок>
						<Источник>ВебСтраница</Источник>
						<Приемник>ВебСтраница</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Другое --&gt; Другое</Наименование>
						<Порядок>200</Порядок>
						<Источник>Другое</Источник>
						<Приемник>Другое</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Телефон --&gt; Телефон</Наименование>
						<Порядок>250</Порядок>
						<Источник>Телефон</Источник>
						<Приемник>Телефон</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>Факс --&gt; Факс</Наименование>
						<Порядок>300</Порядок>
						<Источник>Факс</Источник>
						<Приемник>Факс</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>Перечисление: Ставки НДС</Наименование>
				<Порядок>100</Порядок>
				<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
				<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БезНДС --&gt; БезНДС</Наименование>
						<Порядок>50</Порядок>
						<Источник>БезНДС</Источник>
						<Приемник>БезНДС</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>НДС0 --&gt; НДС0</Наименование>
						<Порядок>100</Порядок>
						<Источник>НДС0</Источник>
						<Приемник>НДС0</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>НДС10 --&gt; НДС10</Наименование>
						<Порядок>150</Порядок>
						<Источник>НДС10</Источник>
						<Приемник>НДС10</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>НДС10_110 --&gt; НДС10_110</Наименование>
						<Порядок>200</Порядок>
						<Источник>НДС10_110</Источник>
						<Приемник>НДС10_110</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>НДС18 --&gt; НДС18</Наименование>
						<Порядок>250</Порядок>
						<Источник>НДС18</Источник>
						<Приемник>НДС18</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>НДС18_118 --&gt; НДС18_118</Наименование>
						<Порядок>300</Порядок>
						<Источник>НДС18_118</Источник>
						<Приемник>НДС18_118</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>НДС20 --&gt; НДС20</Наименование>
						<Порядок>350</Порядок>
						<Источник>НДС20</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>НДС20_120 --&gt; НДС20_120</Наименование>
						<Порядок>400</Порядок>
						<Источник>НДС20_120</Источник>
						<Приемник>НДС20_120</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ЮрФизЛицо</Код>
				<Наименование>Перечисление: Юр. / физ. лицо</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ЮрФизЛицо</Источник>
				<Приемник>ПеречислениеСсылка.ЮрФизЛицо</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>50</Порядок>
						<Источник>ФизЛицо</Источник>
						<Приемник>ФизЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ЮрЛицо --&gt; ЮрЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>ЮрЛицо</Источник>
						<Приемник>ЮрЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ИндивидуальныйПредприниматель --&gt; ФизЛицо</Наименование>
						<Порядок>150</Порядок>
						<Источник>ИндивидуальныйПредприниматель</Источник>
						<Приемник>ФизЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ЮрЛицоНеРезидент --&gt; ЮрЛицо</Наименование>
						<Порядок>200</Порядок>
						<Источник>ЮрЛицоНеРезидент</Источник>
						<Приемник>ЮрЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>СпособыУстановкиКурсаВалюты</Код>
				<Наименование>Перечисление: Способы установки курса валюты</Наименование>
				<Порядок>200</Порядок>
				<Источник>ПеречислениеСсылка.СпособыУстановкиКурсаВалюты</Источник>
				<Приемник>ПеречислениеСсылка.СпособыУстановкиКурсаВалюты</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ЗагрузкаИзИнтернета --&gt; ЗагрузкаИзИнтернета</Наименование>
						<Порядок>50</Порядок>
						<Источник>ЗагрузкаИзИнтернета</Источник>
						<Приемник>ЗагрузкаИзИнтернета</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>НаценкаНаКурсДругойВалюты --&gt; НаценкаНаКурсДругойВ</Наименование>
						<Порядок>100</Порядок>
						<Источник>НаценкаНаКурсДругойВалюты</Источник>
						<Приемник>НаценкаНаКурсДругойВалюты</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>РасчетПоФормуле --&gt; РасчетПоФормуле</Наименование>
						<Порядок>150</Порядок>
						<Источник>РасчетПоФормуле</Источник>
						<Приемник>РасчетПоФормуле</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>РучнойВвод --&gt; РучнойВвод</Наименование>
						<Порядок>200</Порядок>
						<Источник>РучнойВвод</Источник>
						<Приемник>РучнойВвод</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ПолФизическогоЛица</Код>
				<Наименование>Перечисление: Пол физического лица</Наименование>
				<Порядок>250</Порядок>
				<Источник>ПеречислениеСсылка.ПолФизическогоЛица</Источник>
				<Приемник>ПеречислениеСсылка.ПолФизическогоЛица</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Женский --&gt; Женский</Наименование>
						<Порядок>50</Порядок>
						<Источник>Женский</Источник>
						<Приемник>Женский</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Мужской --&gt; Мужской</Наименование>
						<Порядок>100</Порядок>
						<Источник>Мужской</Источник>
						<Приемник>Мужской</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>100</Порядок>
			<Группа>
				<Код>Базовые классификаторы</Код>
				<Наименование>Базовые классификаторы</Наименование>
				<Порядок>50</Порядок>
				<Правило>
					<Код>Валюты</Код>
					<Наименование>Справочник: Валюты</Наименование>
					<Порядок>50</Порядок>
					<НеЗамещать>true</НеЗамещать>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<Источник>СправочникСсылка.Валюты</Источник>
					<Приемник>СправочникСсылка.Валюты</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>ЗагружаетсяИзИнтернета --&gt; ЗагружаетсяИзИнтернета</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ЗагружаетсяИзИнтернета" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ЗагружаетсяИзИнтернета" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Наценка --&gt; Наценка</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Наценка" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Наценка" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>ОсновнаяВалюта --&gt; ОсновнаяВалюта</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ОсновнаяВалюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ОсновнаяВалюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ПараметрыПрописи --&gt; ПараметрыПрописи</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПараметрыПрописи" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ПараметрыПрописи" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>СпособУстановкиКурса --&gt; СпособУстановкиКурса</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="СпособУстановкиКурса" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыУстановкиКурсаВалюты"/>
							<Приемник Имя="СпособУстановкиКурса" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыУстановкиКурсаВалюты"/>
							<КодПравилаКонвертации>СпособыУстановкиКурсаВалюты                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>ФормулаРасчетаКурса --&gt; ФормулаРасчетаКурса</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ФормулаРасчетаКурса" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ФормулаРасчетаКурса" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>КлассификаторЕдиницИзмерения</Код>
					<Наименование>Справочник: Единицы измерения</Наименование>
					<Порядок>100</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.ЕдиницыИзмерения</Источник>
					<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>КодОКЕИ --&gt; Код</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КодОКЕИ" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>МеждународноеСокращение --&gt; МеждународноеСокращение</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="МеждународноеСокращение" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="МеждународноеСокращение" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>КлассификаторЕдиницИзмеренияПроизвольнаяЕдиница</Код>
					<Наименование>:</Наименование>
					<Порядок>150</Порядок>
					<ПередВыгрузкой>ЗапоминатьВыгруженные = Истина;
КлючВыгружаемыхДанных = ЗначениеВСтрокуВнутр(Источник);</ПередВыгрузкой>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Приемник>СправочникСсылка.КлассификаторЕдиницИзмерения</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>3</Код>
							<Наименование>--&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>--&gt; НаименованиеПолное</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>--&gt; Код</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>--&gt; ПометкаУдаления</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>СтраныМира</Код>
					<Наименование>Справочник: Страны мира</Наименование>
					<Порядок>200</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.СтраныМира</Источник>
					<Приемник>СправочникСсылка.СтраныМира</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>4</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>КодАльфа2 --&gt; КодАльфа2</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КодАльфа2" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КодАльфа2" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>КодАльфа3 --&gt; КодАльфа3</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="КодАльфа3" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КодАльфа3" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения>
						<Значение>
							<Код>1</Код>
							<Наименование>Россия --&gt; Россия</Наименование>
							<Порядок>50</Порядок>
							<Источник>Россия</Источник>
							<Приемник>Россия</Приемник>
						</Значение>
					</Значения>
				</Правило>
			</Группа>
			<Группа>
				<Код>Структура предприятия</Код>
				<Наименование>Структура предприятия</Наименование>
				<Порядок>100</Порядок>
				<Правило>
					<Код>Организации</Код>
					<Наименование>Справочник: Организации</Наименование>
					<Порядок>50</Порядок>
					<ПередВыгрузкой>
ИсточникСсылка = Источник.Ссылка;

ЗапоминатьВыгруженные = Истина;
КлючВыгружаемыхДанных = ИсточникСсылка;
ТолькоПолучитьУзелСсылки = Ложь;</ПередВыгрузкой>
					<ПоследовательностьПолейПоиска>Если ЗначениеЗаполнено(СвойстваПоиска.Получить("ИНН")) И ЗначениеЗаполнено(СвойстваПоиска.Получить("КПП")) Тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП";
ИначеЕсли ЗначениеЗаполнено(СвойстваПоиска.Получить("ИНН")) И Не ЗначениеЗаполнено(СвойстваПоиска.Получить("КПП")) Тогда
	СтрокаИменСвойствПоиска = "ИНН";
ИначеЕсли ЗначениеЗаполнено(СвойстваПоиска.Получить("НаименованиеПолное")) Тогда
	СтрокаИменСвойствПоиска = "НаименованиеПолное";
ИначеЕсли ЗначениеЗаполнено(СвойстваПоиска.Получить("Наименование")) Тогда
	СтрокаИменСвойствПоиска = "Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.Организации</Источник>
					<Приемник>СправочникСсылка.Организации</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>ИНН --&gt; ИНН</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>3</Код>
							<Наименование>КПП --&gt; КПП</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>4</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>НаименованиеСокращенное --&gt; НаименованиеСокращенное</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="НаименованиеСокращенное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеСокращенное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ОГРН --&gt; ОГРН</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>КодПоОКПО --&gt; КодОКПО</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КодОКПО" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>ДатаРегистрации --&gt; ДатаРегистрации</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>ГоловнаяОрганизация --&gt; ГоловнаяОрганизация</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ГоловнаяОрганизация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="ГоловнаяОрганизация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							<ПередВыгрузкой>Отказ = Не Источник.ОбособленноеПодразделение;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Префикс --&gt; Префикс</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>СвидетельствоДатаВыдачи --&gt; СвидетельствоДатаВыдачи</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="СвидетельствоДатаВыдачи" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="СвидетельствоДатаВыдачи" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>СвидетельствоСерияНомер --&gt; СвидетельствоСерияНомер</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Группа>
							<Код>12</Код>
							<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>14</Код>
								<Наименование>Вид --&gt; Вид</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
								<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
								<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>Тип --&gt; Тип</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>Представление --&gt; Представление</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>Город --&gt; Город</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Регион --&gt; Регион</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Страна --&gt; Страна</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>ВидДляСписка --&gt; ВидДляСписка</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="ВидДляСписка" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
								<Приемник Имя="ВидДляСписка" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
								<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>Подразделения</Код>
					<Наименование>Справочник: Подразделения организаций</Наименование>
					<Порядок>100</Порядок>
					<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "Подразделения";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.ПодразделенияОрганизаций</Источник>
					<Приемник>СправочникСсылка.Подразделения</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Владелец --&gt; Владелец</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>4</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Подразделения"/>
							<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>--&gt; Вид</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>Вид</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = "Подразделение";</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>Отделения</Код>
					<Наименование>Справочник: Отделения организаций</Наименование>
					<Порядок>150</Порядок>
					<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "Отделения";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.ОтделенияОрганизаций</Источник>
					<Приемник>СправочникСсылка.Подразделения</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Владелец --&gt; Владелец</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>4</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Подразделения"/>
							<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
							<ПередВыгрузкой>Если Не ЗначениеЗаполнено(Источник.Родитель) Тогда
	Если ЗначениеЗаполнено(Источник.ПодразделениеОрганизации) Тогда
		Значение = Источник.ПодразделениеОрганизации;
		ИмяПКО = "Подразделения";
	Иначе
		Отказ = Истина;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>--&gt; Вид</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>Вид</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = "Отделение";</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Группа>
					<Код>Структура ЦМО</Код>
					<Наименование>Структура ЦМО</Наименование>
					<Порядок>250</Порядок>
					<Правило>
						<Код>ЦМО</Код>
						<Наименование>Справочник: Склады</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>Период = Неопределено;
Если Не ВходящиеДанные.Свойство("Период", Период) Тогда
	Период = ТекущаяДатаСеанса();
КонецЕсли;

ДанныеМОЛ = РегистрыСведений.МатериальноОтветственныеЛица.ПолучитьДанныеОтветственного(Источник.Ссылка, Период);
ВходящиеДанные.Вставить("Сотрудник", СокрЛП(ДанныеМОЛ.Ответственный));

Если ЗначениеЗаполнено(ВходящиеДанные.Сотрудник) И ВходящиеДанные.Свойство("Организация") Тогда
	
	ЗапоминатьВыгруженные = Истина;
	КлючВыгружаемыхДанных = ЗначениеВСтрокуВнутр(Новый Структура("Организация, Склад, Сотрудник", ВходящиеДанные.Организация, Источник.Ссылка, ВходящиеДанные.Сотрудник));
	ТолькоПолучитьУзелСсылки = Ложь;
	
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ЦМО";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<НеЗамещать>true</НеЗамещать>
						<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.Склады</Источник>
						<Приемник>СправочникСсылка.ЦМО</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>--&gt; Владелец</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = ВходящиеДанные.Организация;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>--&gt; МестоХранения</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="МестоХранения" Вид="Реквизит" Тип="СправочникСсылка.МестаХранения"/>
								<КодПравилаКонвертации>МестаХранения                                     </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;
Значение = Новый Структура;
Значение.Вставить("Владелец", ВходящиеДанные.Организация);
Значение.Вставить("Наименование", Источник.Наименование);</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>--&gt; Сотрудник</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сотрудник" Вид="Реквизит" Тип="СправочникСсылка.Сотрудники"/>
								<КодПравилаКонвертации>Сотрудники                                        </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;
Значение = Новый Структура;
Значение.Вставить("Владелец", ВходящиеДанные.Организация);
Значение.Вставить("Наименование", ВходящиеДанные.Сотрудник);</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>МестаХранения</Код>
						<Наименование>:</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>ЗапоминатьВыгруженные = Ложь;
КлючВыгружаемыхДанных = "МестоХранения" + ЗначениеВСтрокуВнутр(Источник);</ПередВыгрузкой>
						<НеЗамещать>true</НеЗамещать>
						<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Приемник>СправочникСсылка.МестаХранения</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>--&gt; Владелец</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>--&gt; Наименование</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>Сотрудники</Код>
						<Наименование>:</Наименование>
						<Порядок>150</Порядок>
						<ПередВыгрузкой>ЗапоминатьВыгруженные = Ложь;
КлючВыгружаемыхДанных = "Сотрудник" + ЗначениеВСтрокуВнутр(Источник);</ПередВыгрузкой>
						<НеЗамещать>true</НеЗамещать>
						<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Приемник>СправочникСсылка.Сотрудники</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>--&gt; Владелец</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>--&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
			</Группа>
			<Группа>
				<Код>Каталоги</Код>
				<Наименование>Каталоги</Наименование>
				<Порядок>350</Порядок>
				<Группа>
					<Код>Группа контрагенты</Код>
					<Наименование>Группа контрагенты</Наименование>
					<Порядок>50</Порядок>
					<Правило>
						<Код>Контрагенты</Код>
						<Наименование>Справочник: Контрагенты</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>Если Не ТолькоПолучитьУзелСсылки Тогда
	
	Если Не Источник.ЭтоГруппа Тогда
		
		Если Источник.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ЮрЛицо
		 Или Источник.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ЮрЛицоНеРезидент Тогда
			
			ВыгрузитьПоПравилу(Источник,,,, "ЮридическиеЛица");
			
			СсылкаНаУдаляемыйОбъект = Источник.Ссылка;
			ТипПриемника = "СправочникСсылка.ФизическиеЛица";
			ТипИсточника = "СправочникСсылка.Контрагенты";
			ЗаписатьВФайлУдалениеОбъекта(СсылкаНаУдаляемыйОбъект, ТипПриемника, ТипИсточника);
			
		Иначе
			
			ВыгрузитьПоПравилу(Источник,,,, "ФизическиеЛица");
			
			СсылкаНаУдаляемыйОбъект = Источник.Ссылка;
			ТипПриемника = "СправочникСсылка.ЮридическиеЛица";
			ТипИсточника = "СправочникСсылка.Контрагенты";
			ЗаписатьВФайлУдалениеОбъекта(СсылкаНаУдаляемыйОбъект, ТипПриемника, ТипИсточника);
			
		КонецЕсли;
		
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "Контрагенты";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.Контрагенты</Источник>
						<Приемник>СправочникСсылка.Контрагенты</Приемник>
						<Свойства>
							<Свойство Поиск="true" Обязательное="true">
								<Код>6</Код>
								<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>8</Код>
								<Наименование>ЮрФизЛицо --&gt; ВидКонтрагента</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
								<Приемник Имя="ВидКонтрагента" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
								<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>7</Код>
								<Наименование>--&gt; ЮридическоеФизическоеЛицо</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЮридическоеФизическоеЛицо" Вид="Реквизит"/>
								<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
Иначе
	
	Значение = Источник.Ссылка;
	Если Источник.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ЮрЛицо
	 Или Источник.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ЮрЛицоНеРезидент Тогда
		ИмяПКО = "ЮридическиеЛица";
	Иначе
		ИмяПКО = "ФизическиеЛица";
	КонецЕсли;
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Родитель --&gt; Родитель</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>ИНН --&gt; ИНН</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>КПП --&gt; КПП</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>9</Код>
								<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>20</Код>
									<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>Вид --&gt; Вид</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>Город --&gt; Город</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>Представление --&gt; Представление</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Регион --&gt; Регион</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Страна --&gt; Страна</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Тип --&gt; Тип</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ЮридическиеЛица</Код>
						<Наименование>Справочник: Контрагенты</Наименование>
						<Порядок>150</Порядок>
						<ПередВыгрузкой>ЗапоминатьВыгруженные = Ложь;</ПередВыгрузкой>
						<ПоследовательностьПолейПоиска>Если ЗначениеЗаполнено(СвойстваПоиска.Получить("ИНН")) И ЗначениеЗаполнено(СвойстваПоиска.Получить("КПП")) Тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП";
ИначеЕсли ЗначениеЗаполнено(СвойстваПоиска.Получить("ИНН")) И Не ЗначениеЗаполнено(СвойстваПоиска.Получить("КПП")) Тогда
	СтрокаИменСвойствПоиска = "ИНН";
ИначеЕсли ЗначениеЗаполнено(СвойстваПоиска.Получить("Наименование")) Тогда
	СтрокаИменСвойствПоиска = "Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.Контрагенты</Источник>
						<Приемник>СправочникСсылка.ЮридическиеЛица</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>13</Код>
								<Наименование>ИНН --&gt; ИНН</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>14</Код>
								<Наименование>КПП --&gt; КПП</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>16</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>СтранаРегистрации --&gt; СтранаРегистрации</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="СтранаРегистрации" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
								<Приемник Имя="СтранаРегистрации" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
								<КодПравилаКонвертации>СтраныМира                                        </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Не ЗначениеЗаполнено(Источник.СтранаРегистрации) Тогда
	Значение = Справочники.СтраныМира.Россия;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>КодПоОКПО --&gt; КодОКПО</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КодОКПО" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>12</Код>
									<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Вид --&gt; Вид</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Город --&gt; Город</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Представление --&gt; Представление</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Регион --&gt; Регион</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Страна --&gt; Страна</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Тип --&gt; Тип</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ФизическиеЛица</Код>
						<Наименование>Справочник: Контрагенты</Наименование>
						<Порядок>200</Порядок>
						<ПередВыгрузкой>ЗапоминатьВыгруженные = Ложь;</ПередВыгрузкой>
						<ПоследовательностьПолейПоиска>Если ЗначениеЗаполнено(СвойстваПоиска.Получить("ИНН")) Тогда
	СтрокаИменСвойствПоиска = "ИНН";
Иначе
	СтрокаИменСвойствПоиска = "Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.Контрагенты</Источник>
						<Приемник>СправочникСсылка.ФизическиеЛица</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>ИНН --&gt; ИНН</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true" Обязательное="true">
								<Код>5</Код>
								<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Родитель --&gt; Родитель</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
								<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>СтранаРегистрации --&gt; СтранаРегистрации</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СтранаРегистрации" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
								<Приемник Имя="СтранаРегистрации" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
								<КодПравилаКонвертации>СтраныМира                                        </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Не ЗначениеЗаполнено(Источник.СтранаРегистрации) Тогда
	Значение = Справочники.СтраныМира.Россия;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>КодПоОКПО --&gt; КодОКПО</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КодОКПО" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>6</Код>
								<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>17</Код>
									<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>Вид --&gt; Вид</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>Город --&gt; Город</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Представление --&gt; Представление</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Регион --&gt; Регион</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Страна --&gt; Страна</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Тип --&gt; Тип</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>Договоры</Код>
						<Наименование>Справочник: Договоры контрагентов</Наименование>
						<Порядок>250</Порядок>
						<ПередВыгрузкой>Отказ = Источник.ЭтоГруппа;</ПередВыгрузкой>
						<ПоследовательностьПолейПоиска>СтрокаИменСвойствПоиска = "Организация, Контрагент, ВидДоговора";
Если НомерВариантаПоиска = 1 Тогда
	СтрокаИменСвойствПоиска = СтрокаИменСвойствПоиска + "," + "НомерДоговора, ДатаДоговора";
Иначе
	СтрокаИменСвойствПоиска = СтрокаИменСвойствПоиска + "," + "Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.ДоговорыКонтрагентов</Источник>
						<Приемник>СправочникСсылка.Договоры</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Контрагент --&gt; Контрагент</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>7</Код>
								<Наименование>--&gt; ВидДоговора</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДоговоровКонтрагентов"/>
								<ПередВыгрузкой>Значение = "СПоставщиком";</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>ДатаДоговора --&gt; ДатаДоговора</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ДатаДоговора" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаДоговора" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>НомерДоговора --&gt; НомерДоговора</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="НомерДоговора" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерДоговора" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>Контрагент из физ лица</Код>
					<Наименование>Контрагент из физ лица</Наименование>
					<Порядок>100</Порядок>
					<Правило>
						<Код>Ф_Контрагенты</Код>
						<Наименование>Справочник: Физические лица</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>Если Не ТолькоПолучитьУзелСсылки И Не Источник.ЭтоГруппа Тогда
	ВыгрузитьПоПравилу(Источник,,,, "Ф_ФизическиеЛица");
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "Ф_Контрагенты";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.ФизическиеЛица</Источник>
						<Приемник>СправочникСсылка.Контрагенты</Приемник>
						<Свойства>
							<Свойство Поиск="true" Обязательное="true">
								<Код>17</Код>
								<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>14</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>18</Код>
								<Наименование>--&gt; ВидКонтрагента</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидКонтрагента" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
								<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
Иначе
	Значение = "ФизЛицо";
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>19</Код>
								<Наименование>--&gt; ЮридическоеФизическоеЛицо</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЮридическоеФизическоеЛицо" Вид="Реквизит"/>
								<КодПравилаКонвертации>Ф_ФизическиеЛица                                  </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
Иначе
	Значение = Источник.Ссылка;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>Родитель --&gt; Родитель</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
								<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>Ф_Контрагенты                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>ИНН --&gt; ИНН</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>8</Код>
									<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Вид --&gt; Вид</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Город --&gt; Город</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Представление --&gt; Представление</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Регион --&gt; Регион</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Страна --&gt; Страна</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>Тип --&gt; Тип</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>Ф_ФизическиеЛица</Код>
						<Наименование>Справочник: Контрагенты</Наименование>
						<Порядок>200</Порядок>
						<ПередВыгрузкой>ЗапоминатьВыгруженные = Ложь;</ПередВыгрузкой>
						<ПоследовательностьПолейПоиска>Если ЗначениеЗаполнено(СвойстваПоиска.Получить("ИНН")) Тогда
	СтрокаИменСвойствПоиска = "ИНН";
Иначе
	СтрокаИменСвойствПоиска = "Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.ФизическиеЛица</Источник>
						<Приемник>СправочникСсылка.ФизическиеЛица</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>ИНН --&gt; ИНН</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true" Обязательное="true">
								<Код>5</Код>
								<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Родитель --&gt; Родитель</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
								<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
								<КодПравилаКонвертации>Ф_ФизическиеЛица                                  </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>--&gt; СтранаРегистрации</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтранаРегистрации" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
								<КодПравилаКонвертации>СтраныМира                                        </КодПравилаКонвертации>
								<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
Иначе
	Значение = Справочники.СтраныМира.Россия;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>ДатаРождения --&gt; ДатаРождения</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>Пол --&gt; Пол</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Пол" Вид="Реквизит" Тип="ПеречислениеСсылка.ПолФизическогоЛица"/>
								<Приемник Имя="Пол" Вид="Реквизит" Тип="ПеречислениеСсылка.ПолФизическогоЛица"/>
								<КодПравилаКонвертации>ПолФизическогоЛица                                </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>6</Код>
								<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>16</Код>
									<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>Вид --&gt; Вид</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>Город --&gt; Город</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Представление --&gt; Представление</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Регион --&gt; Регион</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Страна --&gt; Страна</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>Тип --&gt; Тип</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>Контрагент из организации</Код>
					<Наименование>Контрагент из организации</Наименование>
					<Порядок>150</Порядок>
					<Правило>
						<Код>О_Контрагенты</Код>
						<Наименование>Справочник: Организации</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>
ИсточникСсылка = Источник.Ссылка;

ЗапоминатьВыгруженные = Истина;
КлючВыгружаемыхДанных = ИсточникСсылка;
ТолькоПолучитьУзелСсылки = Ложь;

СтрокаВыгруженныхОбъектов = ВыгруженныеОбъекты.Найти(КлючВыгружаемыхДанных, "Ключ");
Если СтрокаВыгруженныхОбъектов = Неопределено Тогда
	
	Если Источник.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ЮрЛицо
	 Или Источник.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ЮрЛицоНеРезидент Тогда
		ТипПриемника = "СправочникСсылка.ФизическиеЛица";
		ТипИсточника = "СправочникСсылка.Организации";
	Иначе
		ТипПриемника = "СправочникСсылка.ЮридическиеЛица";
		ТипИсточника = "СправочникСсылка.Организации";
	КонецЕсли;
	ЗаписатьВФайлУдалениеОбъекта(ИсточникСсылка, ТипПриемника, ТипИсточника);
	
КонецЕсли;</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "О_Контрагенты";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.Организации</Источник>
						<Приемник>СправочникСсылка.Контрагенты</Приемник>
						<Свойства>
							<Свойство Поиск="true" Обязательное="true">
								<Код>1</Код>
								<Наименование>--&gt; ЭтоГруппа</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>ЮрФизЛицо --&gt; ВидКонтрагента</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
								<Приемник Имя="ВидКонтрагента" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
								<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>--&gt; ЮридическоеФизическоеЛицо</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЮридическоеФизическоеЛицо" Вид="Реквизит"/>
								<ПередВыгрузкой>Значение = Источник.Ссылка;
Если Источник.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ЮрЛицо
 Или Источник.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ЮрЛицоНеРезидент Тогда
	ИмяПКО = "О_ЮридическиеЛица";
Иначе
	ИмяПКО = "О_ФизическиеЛица";
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ИНН --&gt; ИНН</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>КПП --&gt; КПП</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>НаименованиеСокращенное --&gt; НаименованиеСокращенное</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="НаименованиеСокращенное" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НаименованиеСокращенное" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Группа>
								<Код>8</Код>
								<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>19</Код>
									<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>Вид --&gt; Вид</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>Город --&gt; Город</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Представление --&gt; Представление</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Регион --&gt; Регион</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Страна --&gt; Страна</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Тип --&gt; Тип</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>О_ЮридическиеЛица</Код>
						<Наименование>Справочник: Контрагенты</Наименование>
						<Порядок>150</Порядок>
						<ПередВыгрузкой>
ИсточникСсылка = Источник.Ссылка;

ЗапоминатьВыгруженные = Истина;
КлючВыгружаемыхДанных = ИсточникСсылка;
ТолькоПолучитьУзелСсылки = Ложь;</ПередВыгрузкой>
						<ПоследовательностьПолейПоиска>Если ЗначениеЗаполнено(СвойстваПоиска.Получить("ИНН")) И ЗначениеЗаполнено(СвойстваПоиска.Получить("КПП")) Тогда
	СтрокаИменСвойствПоиска = "ИНН, КПП";
ИначеЕсли ЗначениеЗаполнено(СвойстваПоиска.Получить("ИНН")) И Не ЗначениеЗаполнено(СвойстваПоиска.Получить("КПП")) Тогда
	СтрокаИменСвойствПоиска = "ИНН";
ИначеЕсли ЗначениеЗаполнено(СвойстваПоиска.Получить("Наименование")) Тогда
	СтрокаИменСвойствПоиска = "Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.Организации</Источник>
						<Приемник>СправочникСсылка.ЮридическиеЛица</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>13</Код>
								<Наименование>ИНН --&gt; ИНН</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>14</Код>
								<Наименование>КПП --&gt; КПП</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>16</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>--&gt; СтранаРегистрации</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтранаРегистрации" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
								<КодПравилаКонвертации>СтраныМира                                        </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Справочники.СтраныМира.Россия;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>ДатаРегистрации --&gt; ДатаРегистрации</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>ОГРН --&gt; ОГРН</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ОГРН" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>КодПоОКПО --&gt; КодОКПО</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КодОКПО" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>12</Код>
									<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>Вид --&gt; Вид</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>Город --&gt; Город</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>2</Код>
									<Наименование>Представление --&gt; Представление</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Регион --&gt; Регион</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Страна --&gt; Страна</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Тип --&gt; Тип</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>О_ФизическиеЛица</Код>
						<Наименование>Справочник: Контрагенты</Наименование>
						<Порядок>200</Порядок>
						<ПередВыгрузкой>
ИсточникСсылка = Источник.Ссылка;

ЗапоминатьВыгруженные = Истина;
КлючВыгружаемыхДанных = ИсточникСсылка;
ТолькоПолучитьУзелСсылки = Ложь;</ПередВыгрузкой>
						<ПоследовательностьПолейПоиска>Если ЗначениеЗаполнено(СвойстваПоиска.Получить("ИНН")) Тогда
	СтрокаИменСвойствПоиска = "ИНН";
Иначе
	СтрокаИменСвойствПоиска = "Наименование";
КонецЕсли;</ПоследовательностьПолейПоиска>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.Организации</Источник>
						<Приемник>СправочникСсылка.ФизическиеЛица</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>ИНН --&gt; ИНН</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true" Обязательное="true">
								<Код>4</Код>
								<Наименование>--&gt; ЭтоГруппа</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>--&gt; СтранаРегистрации</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтранаРегистрации" Вид="Реквизит" Тип="СправочникСсылка.СтраныМира"/>
								<КодПравилаКонвертации>СтраныМира                                        </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Справочники.СтраныМира.Россия;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>КПП --&gt; КПП</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>ДатаРегистрации --&gt; ДатаРегистрации</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаРегистрации" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>СвидетельствоСерияНомер --&gt; СвидетельствоСерияНомер</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="СвидетельствоСерияНомер" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>КодПоОКПО --&gt; КодОКПО</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="КодОКПО" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Группа>
								<Код>5</Код>
								<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>16</Код>
									<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>Вид --&gt; Вид</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>Город --&gt; Город</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Представление --&gt; Представление</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Регион --&gt; Регион</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Страна --&gt; Страна</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>Тип --&gt; Тип</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
									<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Правило>
					<Код>Пользователи</Код>
					<Наименование>Справочник: Пользователи</Наименование>
					<Порядок>200</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.Пользователи</Источник>
					<Приемник>СправочникСсылка.Пользователи</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Группа>
							<Код>2</Код>
							<Наименование>КонтактнаяИнформация --&gt; КонтактнаяИнформация</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="КонтактнаяИнформация" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>13</Код>
								<Наименование>АдресЭП --&gt; АдресЭП</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="АдресЭП" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>Вид --&gt; Вид</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
								<Приемник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
								<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Город --&gt; Город</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>ДоменноеИмяСервера --&gt; ДоменноеИмяСервера</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ДоменноеИмяСервера" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>ЗначенияПолей --&gt; ЗначенияПолей</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="ЗначенияПолей" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>НомерТелефона --&gt; НомерТелефона</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерТелефона" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>НомерТелефонаБезКодов --&gt; НомерТелефонаБезКодов</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="НомерТелефонаБезКодов" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Представление --&gt; Представление</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Представление" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Регион --&gt; Регион</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Регион" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Страна --&gt; Страна</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Страна" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Тип --&gt; Тип</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ГБУ_Номенклатура</Код>
					<Наименование>Справочник: Группы бухгалтерского учета</Наименование>
					<Порядок>250</Порядок>
					<НеЗамещать>true</НеЗамещать>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.ГруппыБухгалтерскогоУчета</Источник>
					<Приемник>СправочникСсылка.Номенклатура</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>3</Код>
							<Наименование>--&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство Поиск="true">
							<Код>6</Код>
							<Наименование>--&gt; ТипНоменклатуры</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/>
							<ПередВыгрузкой>Если Источник.СчетУчета = "105.31" Или СтрНайти(Источник.Наименование, "Медикамент") &gt; 0 Тогда
	Значение = "Медикаменты";
Иначе
	Значение = "ПрочиеМЗ";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<КодПравилаКонвертации>КлассификаторЕдиницИзмеренияПроизвольнаяЕдиница   </КодПравилаКонвертации>
							<ПередВыгрузкой>ВыгрузитьОбъект = Истина;
Значение = Новый Структура;
Значение.Вставить("Наименование", "руб");
Значение.Вставить("НаименованиеПолное", "Рубль");
Значение.Вставить("Код", "383");</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>СчетУчета --&gt; СчетУчета</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СчетУчета" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>Номенклатура</Код>
					<Наименование>Справочник: Номенклатура</Наименование>
					<Порядок>300</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>СправочникСсылка.Номенклатура</Источник>
					<Приемник>СправочникСсылка.Номенклатура</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>6</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>9</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
							<ПередВыгрузкой>
Если Параметры.УзелВыгружатьВОсновныхЕдиницахУчета И Не Параметры.УзелВыгрузитьСтоимость И Не Источник.ЭтоГруппа Тогда
	
	// Реализацию пересчета количества товаров в основные единицы учета
	// см.в алгоритме КонвертироватьКоличествоВОсновныеЕдиницыУчета.
	// Реализацию заполнения единицы измерения в табличной части
	// см. в алгоритме ЗаполнитьТабличнуюЧастьМЗ.
	
	Значение = НоменклатураСервер.ОсновнаяЕдиницаИзмерения(Источник.Ссылка);
	
	ТипЕдиницыИзмерения = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Значение, "ТипЕдиницы");
	Если ТипЕдиницыИзмерения = Перечисления.ТипыЕдиницИзмерения.Упаковка Тогда
		
		ВыгрузитьОбъект = Истина;
		ИмяПКО = "КлассификаторЕдиницИзмеренияПроизвольнаяЕдиница";
		Значение = Новый Структура;
		Значение.Вставить("Наименование"      , "упак");
		Значение.Вставить("НаименованиеПолное", "Упаковка");
		Значение.Вставить("Код"               , "778");
		
	КонецЕсли;
	
ИначеЕсли Параметры.УзелВыгрузитьСтоимость И Не Источник.ЭтоГруппа Тогда
	
	ВыгрузитьОбъект = Истина;
	ИмяПКО = "КлассификаторЕдиницИзмеренияПроизвольнаяЕдиница";
	Значение = Новый Структура;
	Значение.Вставить("Наименование"      , "руб");
	Значение.Вставить("НаименованиеПолное", "Рубль");
	Значение.Вставить("Код"               , "383");
	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>КодТНВЭД --&gt; КодТНВЭД</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="КодТНВЭД" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторТНВЭД"/>
							<Приемник Имя="КодТНВЭД" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторТНВЭД"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>ВидНоменклатуры --&gt; ТипНоменклатуры</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
							<Приемник Имя="ТипНоменклатуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыНоменклатуры"/>
							<ПередВыгрузкой>Если Не Источник.ЭтоГруппа Тогда
	
	Если Источник.ЭтоЛекарственноеСредство Тогда
		Значение = "Медикаменты";
	Иначе
		Реквизит = Новый Структура("СчетУчета", "ГруппаБухгалтерскогоУчета.СчетУчета");
		СчетУчета = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Источник.ВидНоменклатуры, Реквизит).СчетУчета;
		Если СчетУчета = "105.31" Тогда
			Значение = "Медикаменты";
		Иначе
			Значение = "ПрочиеМЗ";
		КонецЕсли;
	КонецЕсли;
	
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; СчетУчета</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Если Не Источник.ЭтоГруппа Тогда
	
	Реквизит = Новый Структура("СчетУчета", "ГруппаБухгалтерскогоУчета.СчетУчета");
	Значение = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Источник.ВидНоменклатуры, Реквизит).СчетУчета;
	
Иначе
	Отказ = Истина;
КонецЕсли;

Если Не Отказ И Не ЗначениеЗаполнено(Значение) И Источник.ЭтоЛекарственноеСредство Тогда
	Значение = "105.31"; // Медикаменты и перевязочные средств - иное движимое имущество учреждения
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<НеЗамещать>true</НеЗамещать>
							<Код>11</Код>
							<Наименование>--&gt; ВидМаркируемойПродукции</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидМаркируемойПродукции" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыМаркируемойПродукции"/>
							<ПередВыгрузкой>Если Не Источник.ЭтоГруппа Тогда
	
	Если Источник.ЭтоЛекарственноеСредство Тогда
		Значение = "ЛекарственныеПрепараты";
	Иначе
		Отказ = Истина;
	КонецЕсли;
	
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Артикул --&gt; НоменклатурныйНомер</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НоменклатурныйНомер" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Если Источник.ЭтоГруппа Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ИсточникиФинансовогоОбеспечения</Код>
					<Наименование>:</Наименование>
					<Порядок>350</Порядок>
					<ПередВыгрузкой>Если Не ЗначениеЗаполнено(Источник) Тогда
	Отказ = Истина;
Иначе
	ЗапоминатьВыгруженные = Истина;
	КлючВыгружаемыхДанных = Источник;
КонецЕсли;</ПередВыгрузкой>
					<ПередЗагрузкой>Если Не ПолучитьФункциональнуюОпцию("ИспользоватьУчетПоИФО") Тогда
	Отказ = Истина;
КонецЕсли;</ПередЗагрузкой>
					<НеЗамещать>true</НеЗамещать>
					<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
					<ИспользоватьБыстрыйПоискПриЗагрузке>true</ИспользоватьБыстрыйПоискПриЗагрузке>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Приемник>СправочникСсылка.ИсточникиФинансовогоОбеспечения</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>--&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>3</Код>
							<Наименование>--&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>--&gt; ПометкаУдаления</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Группа>
				<Код>Прочие справочники</Код>
				<Наименование>Прочие справочники</Наименование>
				<Порядок>400</Порядок>
				<Правило>
					<Код>ВидыКонтактнойИнформации</Код>
					<Наименование>Справочник: Виды контактной информации</Наименование>
					<Порядок>50</Порядок>
					<НеЗамещать>true</НеЗамещать>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>СправочникСсылка.ВидыКонтактнойИнформации</Источник>
					<Приемник>СправочникСсылка.ВидыКонтактнойИнформации</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыКонтактнойИнформации"/>
							<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>3</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>ТолькоНациональныйАдрес --&gt; ТолькоНациональныйАдрес</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ТолькоНациональныйАдрес" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ТолькоНациональныйАдрес" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ВключатьСтрануВПредставление --&gt; ВключатьСтрануВПредставление</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ВключатьСтрануВПредставление" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ВключатьСтрануВПредставление" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>ЗапретитьРедактированиеПользователем --&gt; ЗапретитьРедактированиеПользователем</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ЗапретитьРедактированиеПользователем" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ЗапретитьРедактированиеПользователем" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>МожноИзменятьСпособРедактирования --&gt; МожноИзменятьСпособРедактирования</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="МожноИзменятьСпособРедактирования" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="МожноИзменятьСпособРедактирования" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>ОбязательноеЗаполнение --&gt; ОбязательноеЗаполнение</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ОбязательноеЗаполнение" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ОбязательноеЗаполнение" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>ПроверятьКорректность --&gt; ПроверятьКорректность</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ПроверятьКорректность" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ПроверятьКорректность" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>ПроверятьПоФИАС --&gt; ПроверятьПоФИАС</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="ПроверятьПоФИАС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ПроверятьПоФИАС" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>РазрешитьВводНесколькихЗначений --&gt; РазрешитьВводНесколькихЗначений</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="РазрешитьВводНесколькихЗначений" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="РазрешитьВводНесколькихЗначений" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>ВидРедактирования --&gt; ВидРедактирования</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="ВидРедактирования" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ВидРедактирования" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>РеквизитДопУпорядочивания --&gt; РеквизитДопУпорядочивания</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="РеквизитДопУпорядочивания" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="РеквизитДопУпорядочивания" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>СкрыватьНеактуальныеАдреса --&gt; СкрыватьНеактуальныеАдреса</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="СкрыватьНеактуальныеАдреса" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СкрыватьНеактуальныеАдреса" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Тип --&gt; Тип</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
							<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
							<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Используется --&gt; Используется</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="Используется" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="Используется" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>ТелефонCДобавочнымНомером --&gt; ТелефонCДобавочнымНомером</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="ТелефонCДобавочнымНомером" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ТелефонCДобавочнымНомером" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>УказыватьОКТМО --&gt; УказыватьОКТМО</Наименование>
							<Порядок>1050</Порядок>
							<Источник Имя="УказыватьОКТМО" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="УказыватьОКТМО" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>ХранитьИсториюИзменений --&gt; ХранитьИсториюИзменений</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="ХранитьИсториюИзменений" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ХранитьИсториюИзменений" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения>
						<Значение>
							<Код>1</Код>
							<Наименование>EmailКонтрагенты --&gt; EmailКонтрагенты</Наименование>
							<Порядок>50</Порядок>
							<Источник>EmailКонтрагенты</Источник>
							<Приемник>EmailКонтрагенты</Приемник>
						</Значение>
						<Значение>
							<Код>2</Код>
							<Наименование>EmailОрганизации --&gt; EmailОрганизации</Наименование>
							<Порядок>100</Порядок>
							<Источник>EmailОрганизации</Источник>
							<Приемник>EmailОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>3</Код>
							<Наименование>EmailПользователя --&gt; EmailПользователя</Наименование>
							<Порядок>150</Порядок>
							<Источник>EmailПользователя</Источник>
							<Приемник>EmailПользователя</Приемник>
						</Значение>
						<Значение>
							<Код>4</Код>
							<Наименование>АдресДляИнформированияФизическиеЛица --&gt; АдресДляИ</Наименование>
							<Порядок>200</Порядок>
							<Источник>АдресДляИнформированияФизическиеЛица</Источник>
							<Приемник>АдресДляИнформированияФизическиеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>5</Код>
							<Наименование>АдресЗаПределамиРФФизическиеЛица --&gt; АдресЗаПредел</Наименование>
							<Порядок>250</Порядок>
							<Источник>АдресЗаПределамиРФФизическиеЛица</Источник>
							<Приемник>АдресЗаПределамиРФФизическиеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>6</Код>
							<Наименование>АдресМестаПроживанияФизическиеЛица --&gt; АдресМестаП</Наименование>
							<Порядок>300</Порядок>
							<Источник>АдресМестаПроживанияФизическиеЛица</Источник>
							<Приемник>АдресМестаПроживанияФизическиеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>7</Код>
							<Наименование>АдресПоПропискеФизическиеЛица --&gt; АдресПоПропискеФ</Наименование>
							<Порядок>350</Порядок>
							<Источник>АдресПоПропискеФизическиеЛица</Источник>
							<Приемник>АдресПоПропискеФизическиеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>8</Код>
							<Наименование>ДругаяИнформацияКонтрагенты --&gt; ДругаяИнформацияКо</Наименование>
							<Порядок>400</Порядок>
							<Источник>ДругаяИнформацияКонтрагенты</Источник>
							<Приемник>ДругаяИнформацияКонтрагенты</Приемник>
						</Значение>
						<Значение>
							<Код>9</Код>
							<Наименование>ДругаяИнформацияОрганизации --&gt; ДругаяИнформацияОр</Наименование>
							<Порядок>450</Порядок>
							<Источник>ДругаяИнформацияОрганизации</Источник>
							<Приемник>ДругаяИнформацияОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>10</Код>
							<Наименование>ПочтовыйАдресОрганизации --&gt; ПочтовыйАдресОрганиза</Наименование>
							<Порядок>500</Порядок>
							<Источник>ПочтовыйАдресОрганизации</Источник>
							<Приемник>ПочтовыйАдресОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>11</Код>
							<Наименование>СправочникОрганизации --&gt; СправочникОрганизации</Наименование>
							<Порядок>550</Порядок>
							<Источник>СправочникОрганизации</Источник>
							<Приемник>СправочникОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>12</Код>
							<Наименование>СправочникПользователи --&gt; СправочникПользователи</Наименование>
							<Порядок>600</Порядок>
							<Источник>СправочникПользователи</Источник>
							<Приемник>СправочникПользователи</Приемник>
						</Значение>
						<Значение>
							<Код>13</Код>
							<Наименование>СправочникФизическиеЛица --&gt; СправочникФизическиеЛ</Наименование>
							<Порядок>650</Порядок>
							<Источник>СправочникФизическиеЛица</Источник>
							<Приемник>СправочникФизическиеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>14</Код>
							<Наименование>ТелефонДомашнийФизическиеЛица --&gt; ТелефонДомашнийФ</Наименование>
							<Порядок>700</Порядок>
							<Источник>ТелефонДомашнийФизическиеЛица</Источник>
							<Приемник>ТелефонДомашнийФизическиеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>15</Код>
							<Наименование>ТелефонКонтрагенты --&gt; ТелефонКонтрагенты</Наименование>
							<Порядок>750</Порядок>
							<Источник>ТелефонКонтрагенты</Источник>
							<Приемник>ТелефонКонтрагенты</Приемник>
						</Значение>
						<Значение>
							<Код>16</Код>
							<Наименование>ТелефонОрганизации --&gt; ТелефонОрганизации</Наименование>
							<Порядок>800</Порядок>
							<Источник>ТелефонОрганизации</Источник>
							<Приемник>ТелефонОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>17</Код>
							<Наименование>ТелефонПользователя --&gt; ТелефонПользователя</Наименование>
							<Порядок>850</Порядок>
							<Источник>ТелефонПользователя</Источник>
							<Приемник>ТелефонПользователя</Приемник>
						</Значение>
						<Значение>
							<Код>18</Код>
							<Наименование>ТелефонРабочийФизическиеЛица --&gt; ТелефонРабочийФиз</Наименование>
							<Порядок>900</Порядок>
							<Источник>ТелефонРабочийФизическиеЛица</Источник>
							<Приемник>ТелефонРабочийФизическиеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>19</Код>
							<Наименование>ФаксОрганизации --&gt; ФаксОрганизации</Наименование>
							<Порядок>950</Порядок>
							<Источник>ФаксОрганизации</Источник>
							<Приемник>ФаксОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>20</Код>
							<Наименование>ФактАдресОрганизации --&gt; ФактАдресОрганизации</Наименование>
							<Порядок>1000</Порядок>
							<Источник>ФактАдресОрганизации</Источник>
							<Приемник>ФактАдресОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>21</Код>
							<Наименование>ЮрАдресОрганизации --&gt; ЮрАдресОрганизации</Наименование>
							<Порядок>1050</Порядок>
							<Источник>ЮрАдресОрганизации</Источник>
							<Приемник>ЮрАдресОрганизации</Приемник>
						</Значение>
						<Значение>
							<Код>22</Код>
							<Наименование>EmailФизическогоЛица --&gt; EmailФизическиеЛица</Наименование>
							<Порядок>1100</Порядок>
							<Источник>EmailФизическогоЛица</Источник>
							<Приемник>EmailФизическиеЛица</Приемник>
						</Значение>
						<Значение>
							<Код>23</Код>
							<Наименование>ФактАдресКонтрагенты --&gt; ФактическийАдресКонтраген</Наименование>
							<Порядок>1150</Порядок>
							<Источник>ФактАдресКонтрагенты</Источник>
							<Приемник>ФактическийАдресКонтрагенты</Приемник>
						</Значение>
						<Значение>
							<Код>24</Код>
							<Наименование>ЮрАдресКонтрагенты --&gt; ЮридическийАдресКонтрагенты</Наименование>
							<Порядок>1200</Порядок>
							<Источник>ЮрАдресКонтрагенты</Источник>
							<Приемник>ЮридическийАдресКонтрагенты</Приемник>
						</Значение>
					</Значения>
				</Правило>
				<Правило>
					<Код>ВидыЗатрат</Код>
					<Наименование>План видов характеристик: Статьи расходов</Наименование>
					<Порядок>100</Порядок>
					<НеЗамещать>true</НеЗамещать>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>ПланВидовХарактеристикСсылка.СтатьиРасходов</Источник>
					<Приемник>СправочникСсылка.ВидыЗатрат</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>5</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="ПланВидовХарактеристикСсылка.СтатьиРасходов"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВидыЗатрат"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
		</Группа>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>150</Порядок>
			<Группа>
				<Код>Покупка</Код>
				<Наименование>Покупка</Наименование>
				<Порядок>50</Порядок>
				<Правило>
					<Код>ПТ_ПоступлениеМЗ</Код>
					<Наименование>Документ: Поступление товаров</Наименование>
					<Порядок>50</Порядок>
					<ПередВыгрузкой>ТекстЗапроса = "
|ВЫБРАТЬ
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА ТаблицаТовары.Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ ТаблицаТовары.Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьСтоимость ИЛИ &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА ТаблицаТовары.СуммаСНДС - &amp;ПринятьНДСКВычету * ТаблицаТовары.СуммаНДС
|		ИНАЧЕ ТаблицаТовары.Количество
|	КОНЕЦ КАК Количество,
|	ТаблицаТовары.Сумма КАК Сумма,
|	ТаблицаТовары.СтавкаНДС КАК СтавкаНДС,
|	ТаблицаТовары.СуммаНДС КАК СуммаНДС,
|	ТаблицаТовары.СуммаСНДС КАК Всего
|ИЗ
|	Документ.ПоступлениеТоваров.Товары КАК ТаблицаТовары
|ГДЕ
|	ТаблицаТовары.Ссылка = &amp;Ссылка
|";

Запрос = Новый Запрос(ТекстЗапроса);
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("ВыгрузитьСтоимость", Параметры.УзелВыгрузитьСтоимость);
Запрос.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);
Запрос.УстановитьПараметр("ПринятьНДСКВычету", ?(Источник.ПринятьНДСКВычету, 1, 0));

ТаблицаТовары = Запрос.Выполнить().Выгрузить();

Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);

Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
Если ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования") Тогда
	ИсточникФинансирования = Источник.ИсточникФинансирования;
КонецЕсли;
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("СчетУчета", "105.00");
ВходящиеДанные.Вставить("ИсточникФинансирования", ИсточникФинансирования);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);

Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.БезвозмездноеПоступлениеМежбюджетное Тогда
	ВходящиеДанные.Вставить("СчетКт"); // (401.10)
	ВходящиеДанные.Вставить("КПСКредит", СчетаУчета.КПСБезвозмездноеПолучениеМежбюджетное);
	ВходящиеДанные.Вставить("ВидКПСКредит", СчетаУчета.ВидКПСБезвозмездноеПолучениеМежбюджетное);
ИначеЕсли Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.БезвозмездноеПоступлениеПрочее Тогда
	ВходящиеДанные.Вставить("СчетКт"); // (401.10)
	ВходящиеДанные.Вставить("КПСКредит", СчетаУчета.КПСБезвозмездноеПолучениеПрочее);
	ВходящиеДанные.Вставить("ВидКПСКредит", СчетаУчета.ВидКПСБезвозмездноеПолучениеПрочее);
ИначеЕсли Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаУПоставщика Тогда
	
	ВходящиеДанные.Вставить("СчетРасчетов"); // (302.34)
	ВходящиеДанные.Вставить("КПСРасчетов", СчетаУчета.КПСРасчетыСПоставщиками);
	ВходящиеДанные.Вставить("ВидКПСРасчетов", СчетаУчета.ВидКПСРасчетыСПоставщиками);
	
	// Обратная совместимость
	ВходящиеДанные.Вставить("СчетПоставщика"); // (302.34)
	ВходящиеДанные.Вставить("КПСПоставщика", СчетаУчета.КПСРасчетыСПоставщиками);
	ВходящиеДанные.Вставить("ВидКПСПоставщика", СчетаУчета.ВидКПСРасчетыСПоставщиками);
	
ИначеЕсли Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаЧерезПодотчетноеЛицо Тогда
	ВходящиеДанные.Вставить("СчетРасчетов"); // (208.34)
	ВходящиеДанные.Вставить("КПСРасчетов", СчетаУчета.КПСРасчетыСПоставщиками);
	ВходящиеДанные.Вставить("ВидКПСРасчетов", СчетаУчета.ВидКПСРасчетыСПоставщиками);
КонецЕсли;</ПередВыгрузкой>
					<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ПТ_ПоступлениеМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ПоступлениеТоваров</Источник>
					<Приемник>ДокументСсылка.ПоступлениеМЗ</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>3</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Отключить="true" Поиск="true">
							<Код>6</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; ВидПоступленияМЗ</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидПоступленияМЗ" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПоступленийМЗ"/>
							<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаУПоставщика Тогда
	Значение = "ПоступлениеОтПоставщика";
Иначе
	Значение = "Поступление";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>ПодразделениеОрганизации --&gt; Подразделение</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
							<Приемник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
							<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>Склад --&gt; ЦМО</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
							<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Контрагент --&gt; Контрагент</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
							<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаЧерезПодотчетноеЛицо Тогда
	Значение = Источник.ПодотчетноеЛицо;
	ИмяПКО = "Ф_Контрагенты";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>ДоговорКонтрагента --&gt; Договор</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/>
							<КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>45</Код>
							<Наименование>ПринятьНДСКВычету --&gt; ПринятьНДСКВычету</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="ПринятьНДСКВычету" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="ПринятьНДСКВычету" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>ДатаВходящегоДокумента --&gt; ДатаПервичногоДокумента</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаПервичногоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>НомерВходящегоДокумента --&gt; НомерПервичногоДокумента</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерПервичногоДокумента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; СчетУчета</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
							<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>--&gt; ИФО</Наименование>
							<Порядок>1050</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
							<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
							<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>56</Код>
							<Наименование>--&gt; СчетРасчетов</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетРасчетов" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
							<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация &lt;&gt; Перечисления.ХозяйственныеОперации.ЗакупкаУПоставщика Тогда
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>55</Код>
							<Наименование>--&gt; КПСРасчетов</Наименование>
							<Порядок>1150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КПСРасчетов" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
							<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаУПоставщика Тогда
	Дата = Источник.Дата;
	ИмяПараметра = ПКС.Приемник;
	Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);
Иначе
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; СпособЗачетаАванса</Наименование>
							<Порядок>1200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СпособЗачетаАванса" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
							<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>52</Код>
							<Наименование>--&gt; ВидПервичногоДокумента</Наименование>
							<Порядок>1250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидПервичногоДокумента" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>
Значение = НСтр("ru='Накладная ""ТОРГ-12""'");</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>53</Код>
							<Наименование>ДатаВходящегоДокумента --&gt; ДатаПервичногоДокумента</Наименование>
							<Порядок>1300</Порядок>
							<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаПервичногоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>54</Код>
							<Наименование>НомерВходящегоДокумента --&gt; НомерПервичногоДокумента</Наименование>
							<Порядок>1350</Порядок>
							<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерПервичногоДокумента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Группа>
							<Код>29</Код>
							<Наименование>--&gt; Материалы</Наименование>
							<Порядок>1400</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>39</Код>
								<Наименование>--&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>37</Код>
								<Наименование>--&gt; Количество</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>34</Код>
								<Наименование>--&gt; Сумма</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>33</Код>
								<Наименование>--&gt; СтавкаНДС</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование>--&gt; СуммаНДС</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование>--&gt; Всего</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Всего" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование>--&gt; КПС</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
								<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>51</Код>
								<Наименование>--&gt; КФО</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>22</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>1450</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>28</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>27</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>26</Код>
								<Наименование>Сумма --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>25</Код>
								<Наименование>СтавкаНДС --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>24</Код>
								<Наименование>СуммаНДС --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>23</Код>
								<Наименование>СуммаСНДС --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство>
							<Код>40</Код>
							<Наименование>ХозяйственнаяОперация --&gt; ХозяйственнаяОперация</Наименование>
							<Порядок>1500</Порядок>
							<Источник Имя="ХозяйственнаяОперация" Вид="Реквизит" Тип="ПеречислениеСсылка.ХозяйственныеОперации"/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(Источник.ХозяйственнаяОперация);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>49</Код>
							<Наименование>--&gt; СчетПоставщика</Наименование>
							<Порядок>1550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетПоставщика</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>50</Код>
							<Наименование>--&gt; КПСПоставщика</Наименование>
							<Порядок>1600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КПСПоставщика</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>46</Код>
							<Наименование>--&gt; СчетРасчетов</Наименование>
							<Порядок>1650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетРасчетов</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>48</Код>
							<Наименование>--&gt; КПСРасчетов</Наименование>
							<Порядок>1700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КПСРасчетов</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>44</Код>
							<Наименование>--&gt; СчетКт</Наименование>
							<Порядок>1750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетКт</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование>--&gt; КПСКредит</Наименование>
							<Порядок>1800</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КПСКредит</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>--&gt; КЭККредит</Наименование>
							<Порядок>1850</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КЭККредит</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКЭК);</ПередВыгрузкой>
						</Свойство>
						<Свойство Отключить="true">
							<Код>47</Код>
							<Наименование>ИсточникФинансирования --&gt;</Наименование>
							<Порядок>1900</Порядок>
							<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ВТП_НакладнаяНаОтпускМ15</Код>
					<Наименование>Документ: Возврат товаров поставщику</Наименование>
					<Порядок>100</Порядок>
					<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	ТаблицаТовары.Количество КАК Количество,
|	ТаблицаТовары.Сумма КАК Сумма,
|	ТаблицаТовары.СтавкаНДС КАК СтавкаНДС,
|	ТаблицаТовары.СуммаНДС КАК СуммаНДС,
|	ТаблицаТовары.СуммаСНДС КАК Всего,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.ВозвратТоваровПоставщику.Товары КАК ТаблицаТовары
|ГДЕ
|	ТаблицаТовары.Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");

ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.ВозвратТоваровПоставщику);
ВходящиеДанные.Вставить("СчетРасчетов"); // (302.34)
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("КПСДоп", СчетаУчета.КПСРасчетыСПоставщиками);
ВходящиеДанные.Вставить("ВидКПСДоп", СчетаУчета.ВидКПСРасчетыСПоставщиками);

ВходящиеДанные.Вставить("СчетУчета"     , "105.00");
ВходящиеДанные.Вставить("СчетРасходов"  , "401.20");
ВходящиеДанные.Вставить("КПСРасходов"   , СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПСРасходов", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("КЭКРасходов"   , "272");</ПередВыгрузкой>
					<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ВТП_НакладнаяНаОтпускМ15";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
					<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.НакладнаяНаОтпускМ15";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
					<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ВозвратТоваровПоставщику</Источник>
					<Приемник>ДокументСсылка.НакладнаяНаОтпускМ15</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>35</Код>
							<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
							<Порядок>50</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Отключить="true" Поиск="true">
							<Код>4</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; ВидПередачиМЗ</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидПередачиМЗ" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПередачиМЗ"/>
							<ПередВыгрузкой>Значение = "ВозвратПоставщику";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>ПодразделениеОрганизации --&gt; Подразделение</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
							<Приемник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
							<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>34</Код>
							<Наименование>Склад --&gt; ЦМО</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
							<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Контрагент --&gt; Контрагент</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>ДоговорКонтрагента --&gt; Договор</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/>
							<КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>ДокументПоступления --&gt; ДокументОснование</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="ДокументПоступления" Вид="Реквизит" Тип="ДокументСсылка.ПоступлениеТоваров"/>
							<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
							<КодПравилаКонвертации>ПТ_ПоступлениеМЗ                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; СчетУчета</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
							<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; ИФО</Наименование>
							<Порядок>900</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
							<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
							<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; КФО</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
						</Свойство>
						<Группа>
							<Код>24</Код>
							<Наименование>--&gt; Материалы</Наименование>
							<Порядок>1050</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>31</Код>
								<Наименование>--&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование>--&gt; Количество</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>44</Код>
								<Наименование>--&gt; Цена</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>
ИмяПоляСуммы      = "Всего";
ИмяПоляКоличества = "Количество";
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойЦены);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование>--&gt; Сумма</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>--&gt; СтавкаНДС</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>--&gt; СуммаНДС</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>--&gt; Всего</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Всего" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>--&gt; КПС</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
								<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>42</Код>
								<Наименование>--&gt; СуммаСписания</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>12</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>17</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>16</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>15</Код>
								<Наименование>ИсточникФинансирования --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>14</Код>
								<Наименование>Сумма --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>13</Код>
								<Наименование>СтавкаНДС --&gt;</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>19</Код>
								<Наименование>СуммаНДС --&gt;</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>18</Код>
								<Наименование>СуммаСНДС --&gt;</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство>
							<Код>36</Код>
							<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
							<Порядок>1150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>--&gt; СчетРасчетов</Наименование>
							<Порядок>1200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетРасчетов</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>--&gt; КПСДоп</Наименование>
							<Порядок>1250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КПСДоп</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>--&gt; СчетРасходов</Наименование>
							<Порядок>1300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетРасходов</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование>--&gt; КПСРасходов</Наименование>
							<Порядок>1350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КПСРасходов</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>--&gt; КЭКРасходов</Наименование>
							<Порядок>1400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КЭКРасходов</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКЭК);</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Группа>
				<Код>Продажа</Код>
				<Наименование>Продажа</Наименование>
				<Порядок>100</Порядок>
				<Правило>
					<Код>ОтчетОРозничныхПродажах</Код>
					<Наименование>Документ: Отчет о розничных продажах</Наименование>
					<Порядок>50</Порядок>
					<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	СтавкаНДС КАК СтавкаНДС,
|	СУММА(СуммаНДС) КАК СуммаНДС,
|	СУММА(СуммаСНДС) КАК Сумма
|ИЗ
|	Документ.ОтчетОРозничныхПродажах.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|
|СГРУППИРОВАТЬ ПО
|	СтавкаНДС
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
ВходящиеДанные.Вставить("Продажи", ТаблицаТовары);
ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТовары.Итог("Сумма"));


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПСРозницы", СчетаУчета.КПСРозницы);
ВходящиеДанные.Вставить("ВидКПСРозницы", СчетаУчета.ВидКПСРозницы);
ВходящиеДанные.Вставить("СчетДоходов"); // По умолчанию из типовой операции (401.10)
ВходящиеДанные.Вставить("КПСДохода", СчетаУчета.КПСДохода);
ВходящиеДанные.Вставить("ВидКПСДохода", СчетаУчета.ВидКПСДохода);</ПередВыгрузкой>
					<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ОтчетОРозничныхПродажах";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
					<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.ОтчетОРозничныхПродажах";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
					<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ОтчетОРозничныхПродажах</Источник>
					<Приемник>ДокументСсылка.ОтчетОРозничныхПродажах</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>24</Код>
							<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
							<Порядок>50</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Отключить="true" Поиск="true">
							<Код>3</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>--&gt; СуммаДокумента</Наименование>
							<Порядок>300</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>ПодразделениеОрганизации --&gt; Подразделение</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
							<Приемник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
							<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Склад --&gt; ЦМО</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
							<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>--&gt; ИФО</Наименование>
							<Порядок>600</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
							<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
							<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
						</Свойство>
						<Группа>
							<Код>16</Код>
							<Наименование>--&gt; Продажи</Наименование>
							<Порядок>650</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Продажи" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>19</Код>
								<Наименование>--&gt; Сумма</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>--&gt; СтавкаНДС</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>--&gt; СуммаНДС</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>10</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>14</Код>
								<Наименование>ИсточникФинансирования --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>13</Код>
								<Наименование>СтавкаНДС --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>12</Код>
								<Наименование>СуммаНДС --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>11</Код>
								<Наименование>СуммаСНДС --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; КФО</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КФО</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; КПСРозницы</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КПСРозницы</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; СчетДоходов</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетДоходов</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; КПСДохода</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КПСДохода</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ВТК_ПоступлениеМЗ</Код>
					<Наименование>Документ: Возврат товаров от клиента</Наименование>
					<Порядок>100</Порядок>
					<ПередВыгрузкой>ТекстЗапроса = "
|ВЫБРАТЬ
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА ТаблицаТовары.Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ ТаблицаТовары.Номенклатура
|	КОНЕЦ                                       КАК Номенклатура,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьСтоимость ИЛИ &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА ТаблицаТовары.СуммаСНДС
|		ИНАЧЕ ТаблицаТовары.Количество
|	КОНЕЦ                                       КАК Количество,
|	ТаблицаТовары.Сумма                         КАК Сумма,
|	ТаблицаТовары.СтавкаНДС                     КАК СтавкаНДС,
|	ТаблицаТовары.СуммаНДС                      КАК СуммаНДС,
|	ТаблицаТовары.СуммаСНДС                     КАК Всего
|ИЗ
|	Документ.ВозвратТоваровОтКлиента.Товары КАК ТаблицаТовары
|ГДЕ
|	ТаблицаТовары.Ссылка = &amp;Ссылка
|";

Запрос = Новый Запрос(ТекстЗапроса);
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("ВыгрузитьСтоимость", Параметры.УзелВыгрузитьСтоимость);
Запрос.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

ТаблицаТовары = Запрос.Выполнить().Выгрузить();

Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);

Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
Если ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования") Тогда
	ИсточникФинансирования = Источник.ИсточникФинансирования;
КонецЕсли;
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("ИсточникФинансирования", ИсточникФинансирования);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("СчетУчета", "105.00");

ВходящиеДанные.Вставить("СчетДоходов"); // (401.10)
ВходящиеДанные.Вставить("КПСДоходов", СчетаУчета.КПСДохода);
ВходящиеДанные.Вставить("ВидКПСДоходов", СчетаУчета.ВидКПСДохода);
ВходящиеДанные.Вставить("КЭКДоходов", "131");</ПередВыгрузкой>
					<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ВТК_ПоступлениеМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ВозвратТоваровОтКлиента</Источник>
					<Приемник>ДокументСсылка.ПоступлениеМЗ</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>5</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Отключить="true" Поиск="true">
							<Код>6</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>--&gt; ВидПоступленияМЗ</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидПоступленияМЗ" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПоступленийМЗ"/>
							<ПередВыгрузкой>Значение = "ВозвратОтПокупателя";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>ПодразделениеОрганизации --&gt; Подразделение</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
							<Приемник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
							<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>Склад --&gt; ЦМО</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
							<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; СчетУчета</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
							<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; ИФО</Наименование>
							<Порядок>700</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
							<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
							<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; СпособЗачетаАванса</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СпособЗачетаАванса" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
							<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
						</Свойство>
						<Группа>
							<Код>24</Код>
							<Наименование>--&gt; Материалы</Наименование>
							<Порядок>800</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>35</Код>
								<Наименование>--&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>--&gt; Количество</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>33</Код>
								<Наименование>--&gt; ЦенаОприходования</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЦенаОприходования" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>
ИмяПоляСуммы      = "Всего";
ИмяПоляКоличества = "Количество";
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойЦены);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование>--&gt; Сумма</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование>--&gt; СтавкаНДС</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование>--&gt; СуммаНДС</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование>--&gt; Всего</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Всего" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>--&gt; КПС</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
								<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>40</Код>
								<Наименование>--&gt; КФО</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>11</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>17</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>16</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>15</Код>
								<Наименование>Сумма --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>14</Код>
								<Наименование>СтавкаНДС --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>13</Код>
								<Наименование>СуммаНДС --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>12</Код>
								<Наименование>СуммаСНДС --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство>
							<Код>1</Код>
							<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(Перечисления.ХозяйственныеОперации.ОприходованиеПоВозврату);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>--&gt; СчетДоходов</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетДоходов</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>--&gt; КПСДоходов</Наименование>
							<Порядок>1050</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КПСДоходов</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>--&gt; КЭКДоходов</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КЭКДоходов</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКЭК);</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ПТС_НакладнаяНаОтпускМ15</Код>
					<Наименование>Документ: Передача товаров на сторону</Наименование>
					<Порядок>150</Порядок>
					<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	Сумма КАК Сумма,
|	СтавкаНДС КАК СтавкаНДС,
|	СуммаНДС КАК СуммаНДС,
|	СуммаСНДС КАК Всего,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.ПередачаТоваровНаСторону.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);
ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТовары.Итог("Всего"));

Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("СчетУчета", "105.00");

Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.БезвозмезднаяПередачаПрочее Тогда
	ВходящиеДанные.Вставить("СчетДт"); // (401.20)
	ВходящиеДанные.Вставить("КЭКПередачи", "241");
ИначеЕсли Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.БезвозмезднаяПередачаМежбюджетная Тогда
	ВходящиеДанные.Вставить("СчетДт"); // (401.20)
	ВходящиеДанные.Вставить("КЭКПередачи", "251");
ИначеЕсли Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.РеализацияМатериальныхЗапасов Тогда
	ВходящиеДанные.Вставить("СчетДоходов"); // (401.10)
	ВходящиеДанные.Вставить("КДБ", СчетаУчета.КПСПередачиТоваровНаСторону);
	ВходящиеДанные.Вставить("ВидКДБ", СчетаУчета.ВидКПСПередачиТоваровНаСторону);
КонецЕсли;</ПередВыгрузкой>
					<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ПТС_НакладнаяНаОтпускМ15";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
					<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.НакладнаяНаОтпускМ15";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
					<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ПередачаТоваровНаСторону</Источник>
					<Приемник>ДокументСсылка.НакладнаяНаОтпускМ15</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>35</Код>
							<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
							<Порядок>50</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Отключить="true" Поиск="true">
							<Код>4</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; ВидПередачиМЗ</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидПередачиМЗ" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПередачиМЗ"/>
							<ПередВыгрузкой>Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.РеализацияМатериальныхЗапасов Тогда
	Значение = "Реализация";
Иначе	
	Значение = "ПередачаНаСторону";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>ПодразделениеОрганизации --&gt; Подразделение</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
							<Приемник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
							<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Склад --&gt; ЦМО</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
							<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Контрагент --&gt; Контрагент</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>ДоговорКонтрагента --&gt; Договор</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.Договоры"/>
							<КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>34</Код>
							<Наименование>--&gt; СуммаДокумента</Наименование>
							<Порядок>600</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; ИФО</Наименование>
							<Порядок>800</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
							<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
							<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>--&gt; КФО</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; СчетУчета</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
							<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
						</Свойство>
						<Группа>
							<Код>26</Код>
							<Наименование>--&gt; Материалы</Наименование>
							<Порядок>1000</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>33</Код>
								<Наименование>--&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование>--&gt; Количество</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>42</Код>
								<Наименование>--&gt; Цена</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>
ИмяПоляСуммы      = "Всего";
ИмяПоляКоличества = "Количество";
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойЦены);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование>--&gt; Сумма</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование>--&gt; СтавкаНДС</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование>--&gt; СуммаНДС</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>--&gt; Всего</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Всего" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>--&gt; КПС</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
								<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>40</Код>
								<Наименование>--&gt; СуммаСписания</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>14</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>1050</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>19</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>17</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>15</Код>
								<Наименование>Сумма --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>21</Код>
								<Наименование>СтавкаНДС --&gt;</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>20</Код>
								<Наименование>СуммаНДС --&gt;</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>18</Код>
								<Наименование>СуммаСНДС --&gt;</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>16</Код>
								<Наименование>ИсточникФинансирования --&gt;</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство>
							<Код>12</Код>
							<Наименование>ХозяйственнаяОперация --&gt; ХозяйственнаяОперация</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="ХозяйственнаяОперация" Вид="Реквизит" Тип="ПеречислениеСсылка.ХозяйственныеОперации"/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(Источник.ХозяйственнаяОперация);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>36</Код>
							<Наименование>--&gt; СчетДоходов</Наименование>
							<Порядок>1150</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетДоходов</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>--&gt; КДБ</Наименование>
							<Порядок>1200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КДБ</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>--&gt; СчетДт</Наименование>
							<Порядок>1250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетДт</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>--&gt; КЭКПередачи</Наименование>
							<Порядок>1300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КЭКПередачи</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКЭК);</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Группа>
				<Код>Складские Операции</Код>
				<Наименование>Складские Операции</Наименование>
				<Порядок>150</Порядок>
				<Группа>
					<Код>Внутреннее потребление товаров</Код>
					<Наименование>Внутреннее потребление товаров</Наименование>
					<Порядок>50</Порядок>
					<Правило>
						<Код>ВПТ_ВедомостьНаВыдачуМЗНаНуждыУчреждения</Код>
						<Наименование>Документ: Внутреннее потребление товаров</Наименование>
						<Порядок>150</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки       КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ             КАК Номенклатура,
|	Количество        КАК Количество,
|	0                 КАК СуммаСписания
|ИЗ
|	Документ.ВнутреннееПотреблениеТоваров.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");

ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("МатериальныеЗапасы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.СписаниеТоваровПоТребованию);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("СчетДт", СчетаУчета.СчетУчетаВыдачиМЗНаНуждыУчреждения);</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ВПТ_ВедомостьНаВыдачуМЗНаНуждыУчреждения";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.ВедомостьНаВыдачуМЗНаНуждыУчреждения";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВнутреннееПотреблениеТоваров</Источник>
						<Приемник>ДокументСсылка.ВедомостьНаВыдачуМЗНаНуждыУчреждения</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>24</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>ПодразделениеОрганизации --&gt; Подразделение</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
								<Приемник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Склад --&gt; ЦМО</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; КФО</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>15</Код>
								<Наименование>--&gt; МатериальныеЗапасы</Наименование>
								<Порядок>650</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="МатериальныеЗапасы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>21</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>--&gt; ПодразделениеПолучатель</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ПодразделениеПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
									<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = Источник.ПодразделениеОрганизации;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>--&gt; ЦМОПолучатель</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦМОПолучатель" Вид="Реквизит"/>
									<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = Источник.Склад;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>9</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>12</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>11</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>10</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>22</Код>
								<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>--&gt; СчетДт</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>СчетДт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВПТО_ВедомостьНаВыдачуМЗНаНуждыУчреждения</Код>
						<Наименование>Документ: Внутреннее потребление товаров</Наименование>
						<Порядок>200</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.ВнутреннееПотреблениеТоваровВОтделении.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("МатериальныеЗапасы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.СписаниеТоваровПоТребованию);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходяЩиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходяЩиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходяЩиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходяЩиеДанные.Вставить("СчетДт", СчетаУчета.СчетУчетаВыдачиМЗНаНуждыУчреждения);</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ВПТО_ВедомостьНаВыдачуМЗНаНуждыУчреждения";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.ВедомостьНаВыдачуМЗНаНуждыУчреждения";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВнутреннееПотреблениеТоваровВОтделении</Источник>
						<Приемник>ДокументСсылка.ВедомостьНаВыдачуМЗНаНуждыУчреждения</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>24</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Отделение --&gt; Подразделение</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Отделение" Вид="Реквизит" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
								<Приемник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Склад --&gt; ЦМО</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; КФО</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>15</Код>
								<Наименование>--&gt; МатериальныеЗапасы</Наименование>
								<Порядок>650</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="МатериальныеЗапасы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>17</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>--&gt; ПодразделениеПолучатель</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ПодразделениеПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
									<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = Источник.Отделение;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>--&gt; ЦМОПолучатель</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦМОПолучатель" Вид="Реквизит"/>
									<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = Источник.Склад;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>9</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>12</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>11</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>10</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>22</Код>
								<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>--&gt; СчетДт</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>СчетДт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВПТ_АктСписанияМЗ</Код>
						<Наименование>Документ: ВнутреннееПотреблениеТоваров</Наименование>
						<Порядок>250</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки       КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ             КАК Номенклатура,
|	Количество        КАК Количество,
|	0                 КАК СуммаСписания
|ИЗ
|	Документ.ВнутреннееПотреблениеТоваров.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");

ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.СписаниеТоваровПоТребованию);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("СчетДт", СчетаУчета.СчетУчетаВыдачиМЗНаНуждыУчреждения);
ВходящиеДанные.Вставить("СчетУчета", "105.00");</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ВПТ_АктСписанияМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.АктСписанияМЗ";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВнутреннееПотреблениеТоваров</Источник>
						<Приемник>ДокументСсылка.АктСписанияМЗ</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриводитьКДлине>11</ПриводитьКДлине>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>ПодразделениеОрганизации --&gt; ПодразделениеОтправитель</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
								<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Склад --&gt; ЦМООтправитель</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>--&gt; КФО</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>14</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>700</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>17</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>19</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>20</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>23</Код>
								<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>--&gt; СчетДт</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>СчетДт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВПТО_АктСписанияМЗ</Код>
						<Наименование>Документ: ВнутреннееПотреблениеТоваровВОтделении</Наименование>
						<Порядок>300</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.ВнутреннееПотреблениеТоваровВОтделении.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.СписаниеТоваровПоТребованию);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходяЩиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходяЩиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходяЩиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходяЩиеДанные.Вставить("СчетДт", СчетаУчета.СчетУчетаВыдачиМЗНаНуждыУчреждения);
ВходящиеДанные.Вставить("СчетУчета", "105.00");</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ВПТО_АктСписанияМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.АктСписанияМЗ";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВнутреннееПотреблениеТоваровВОтделении</Источник>
						<Приемник>ДокументСсылка.АктСписанияМЗ</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>5</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<ПриводитьКДлине>11</ПриводитьКДлине>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>Отделение --&gt; ПодразделениеОтправитель</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Отделение" Вид="Реквизит" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
								<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>Склад --&gt; ЦМООтправитель</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>--&gt; КФО</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>12</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>700</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>15</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>8</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>9</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>10</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>11</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>24</Код>
								<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>--&gt; СчетДт</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>СчетДт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>Списание на пациента</Код>
					<Наименование>Списание на пациента</Наименование>
					<Порядок>100</Порядок>
					<Правило>
						<Код>ОТО_АктСписанияМЗ</Код>
						<Наименование>Документ: Акт списания МЗ</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.ОтпускТоваровВОтделение.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);

Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.СписаниеТоваровПоТребованию);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("СчетДт", СчетаУчета.СчетУчетаСписанияМЗНаПациентов);
ВходящиеДанные.Вставить("СчетУчета", "105.00");</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ОТО_АктСписанияМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.АктСписанияМЗ";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ОтпускТоваровВОтделение</Источник>
						<Приемник>ДокументСсылка.АктСписанияМЗ</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>21</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<ПередВыгрузкой>Если ВходящиеДанные.Свойство("УвеличитьДатуСписания") Тогда
	Значение = Источник.Дата + 1;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Отделение --&gt; ПодразделениеОтправитель</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Отделение" Вид="Реквизит" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
								<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>СкладПолучатель --&gt; ЦМООтправитель</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; КФО</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>15</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>700</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>18</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>9</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>11</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>12</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>10</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>19</Код>
								<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>--&gt; СчетДт</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>СчетДт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПТНВ_АктСписанияМЗ</Код>
						<Наименование>Документ: Акт списания МЗ</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.ПотреблениеТоваровПоНазначениямВрачей.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);

Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.СписаниеТоваровПоТребованию);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("СчетДт", СчетаУчета.СчетУчетаСписанияМЗНаПациентов);
ВходящиеДанные.Вставить("СчетУчета", "105.00");</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ПТНВ_АктСписанияМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.АктСписанияМЗ";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПотреблениеТоваровПоНазначениямВрачей</Источник>
						<Приемник>ДокументСсылка.АктСписанияМЗ</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>21</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Отделение --&gt; ПодразделениеОтправитель</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Отделение" Вид="Реквизит" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
								<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Склад --&gt; ЦМООтправитель</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; КФО</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>15</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>700</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>18</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>9</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>11</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>10</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>12</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>19</Код>
								<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>--&gt; СчетДт</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>СчетДт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>Перемещение товаров</Код>
					<Наименование>Перемещение товаров</Наименование>
					<Порядок>150</Порядок>
					<Правило>
						<Код>ВТО_ТребованиеНакладная0315006</Код>
						<Наименование>Документ: Перемещение товаров</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.ВозвратТоваровИзОтделения.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);

Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("СчетУчета", "105.00");
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);

ВходящиеДанные.Вставить("КорСчет", "105.00");</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ВТО_ТребованиеНакладная0315006";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.ТребованиеНакладная0315006";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ВозвратТоваровИзОтделения</Источник>
						<Приемник>ДокументСсылка.ТребованиеНакладная0315006</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>23</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>Отделение --&gt; ПодразделениеОтправитель</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Отделение" Вид="Реквизит" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
								<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>СкладОтправитель --&gt; ЦМООтправитель</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>ПодразделениеОрганизации --&gt; ПодразделениеПолучатель</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
								<Приемник Имя="ПодразделениеПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>СкладПолучатель --&gt; ЦМОПолучатель</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМОПолучатель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; ВидПеремещения</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидПеремещения" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПеремещенияМЗ"/>
								<ПередВыгрузкой>Значение = "ДвижениеМатериалов";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>650</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>--&gt; КорСчет</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КорСчет" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>17</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>850</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>22</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>--&gt; КоличествоЗатребовано</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоЗатребовано" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>--&gt; КФО</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>9</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>11</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>12</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>10</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ОТО_ТребованиеНакладная0315006</Код>
						<Наименование>Документ: Перемещение товаров</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.ОтпускТоваровВОтделение.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("СчетУчета", "105.00");
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);

ВходящиеДанные.Вставить("КорСчет", "105.00");</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ОТО_ТребованиеНакладная0315006";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.ТребованиеНакладная0315006";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ОтпускТоваровВОтделение</Источник>
						<Приемник>ДокументСсылка.ТребованиеНакладная0315006</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>23</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<ПередВыгрузкой>Если ВходящиеДанные.Свойство("УменьшитьДатуТребования") Тогда
	Значение = Источник.Дата - 1;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>ПодразделениеОрганизации --&gt; ПодразделениеОтправитель</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
								<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>СкладОтправитель --&gt; ЦМООтправитель</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>Отделение --&gt; ПодразделениеПолучатель</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Отделение" Вид="Реквизит" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
								<Приемник Имя="ПодразделениеПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>СкладПолучатель --&gt; ЦМОПолучатель</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМОПолучатель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; ВидПеремещения</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидПеремещения" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПеремещенияМЗ"/>
								<ПередВыгрузкой>Значение = "ДвижениеМатериалов";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>650</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>--&gt; КорСчет</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КорСчет" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>17</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>850</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>20</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>--&gt; КоличествоЗатребовано</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоЗатребовано" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>--&gt; КФО</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>9</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>12</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>11</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>10</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПТО_ТребованиеНакладная0315006</Код>
						<Наименование>Документ: Перемещение товаров</Наименование>
						<Порядок>150</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	0 КАК ЦенаПередачи,
|	0 КАК СуммаПередачи,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.ПеремещениеТоваровМеждуОтделениями.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");

ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);

Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("СчетУчета", "105.00");
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);

ВходящиеДанные.Вставить("ВидПеремещения", "ДвижениеМатериалов");
ВходящиеДанные.Вставить("КорСчет", "105.00");</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ПТО_ТребованиеНакладная0315006";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.ТребованиеНакладная0315006";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПеремещениеТоваровМеждуОтделениями</Источник>
						<Приемник>ДокументСсылка.ТребованиеНакладная0315006</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>25</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>Отделение --&gt; ПодразделениеОтправитель</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Отделение" Вид="Реквизит" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
								<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>СкладОтправитель --&gt; ЦМООтправитель</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>ОтделениеПолучатель --&gt; ПодразделениеПолучатель</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ОтделениеПолучатель" Вид="Реквизит" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
								<Приемник Имя="ПодразделениеПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>СкладПолучатель --&gt; ЦМОПолучатель</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМОПолучатель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; ВидПеремещения</Наименование>
								<Порядок>600</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидПеремещения" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПеремещенияМЗ"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>650</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>--&gt; КорСчет</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КорСчет" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>17</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>850</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>24</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>21</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>--&gt; КоличествоЗатребовано</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоЗатребовано" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>--&gt; ЦенаПередачи</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦенаПередачи" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>--&gt; СуммаПередачи</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаПередачи" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>--&gt; КФО</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>9</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>12</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>10</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>11</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПТ_ТребованиеНакладная0315006</Код>
						<Наименование>Документ: Перемещение товаров</Наименование>
						<Порядок>200</Порядок>
						<ПередВыгрузкой>ДанныеСкладаОтправителя  = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Источник.СкладОтправитель, "ТипСклада,РозничныйВидЦены");
ДанныеСкладаПолучателя  = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Источник.СкладПолучатель, "ТипСклада,РозничныйВидЦены");

РозничныйОтправитель = (ДанныеСкладаОтправителя.ТипСклада = Перечисления.ТипыСкладов.РозничныйМагазин);
РозничныйПолучатель = (ДанныеСкладаПолучателя.ТипСклада = Перечисления.ТипыСкладов.РозничныйМагазин);

Если РозничныйОтправитель Тогда
	ВидЦены = ДанныеСкладаОтправителя.РозничныйВидЦены;
	Если РозничныйПолучатель Тогда
		ВидПеремещения = "ПеремещениеМеждуНТТ";
	Иначе
		ВидПеремещения = "ВозвратИзНТТ";
	КонецЕсли;
Иначе
	Если РозничныйПолучатель Тогда
		ВидЦены = ДанныеСкладаПолучателя.РозничныйВидЦены;
		ВидПеремещения = "ПеремещениеВНТТ";
	Иначе
		ВидПеремещения = "ДвижениеМатериалов";
	КонецЕсли;
КонецЕсли;

Если ВидПеремещения = "ДвижениеМатериалов" Тогда
	ЗапросДанныхДокумента = Новый Запрос("
	|ВЫБРАТЬ
	|	НомерСтроки КАК НомерСтроки,
	|	ВЫБОР
	|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
	|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
	|		ИНАЧЕ Номенклатура
	|	КОНЕЦ КАК Номенклатура,
	|	Количество КАК Количество,
	|	0 КАК СуммаПередачи,
	|	0 КАК СуммаСписания
	|ИЗ
	|	Документ.ПеремещениеТоваров.Товары
	|ГДЕ
	|	Ссылка = &amp;Ссылка
	|	//%ИсточникФинансирования%
	|");
Иначе
	ЗапросДанныхДокумента = Новый Запрос("
	|ВЫБРАТЬ
	|	НомерСтроки КАК НомерСтроки,
	|	Номенклатура КАК Номенклатура,
	|	СерияНоменклатуры КАК СерияНоменклатуры,
	|	Партия КАК Партия,
	|	Количество КАК Количество
	|ПОМЕСТИТЬ ТаблицаТоваров
	|ИЗ
	|	Документ.ПеремещениеТоваров.Товары
	|ГДЕ
	|	Ссылка = &amp;Ссылка
	|	//%ИсточникФинансирования%
	|;
	|
	|//////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ТаблицаТоваров.НомерСтроки КАК НомерСтроки,
	|	ВЫБОР
	|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
	|			ТОГДА ТаблицаТоваров.Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
	|		ИНАЧЕ ТаблицаТоваров.Номенклатура
	|	КОНЕЦ КАК Номенклатура,
	|	ТаблицаТоваров.Количество КАК Количество,
	|	ЕСТЬNULL(ЦеныНоменклатурыСрезПоследних.Цена, 0) * ВЫБОР
	|		КОГДА &amp;Валюта &lt;&gt; ЦеныНоменклатурыСрезПоследних.Валюта
	|			ТОГДА ВЫБОР
	|					КОГДА ЕСТЬNULL(КурсыВалютыЦены.Кратность, 0) &gt; 0
	|							И ЕСТЬNULL(КурсыВалютыЦены.Курс, 0) &gt; 0
	|							И ЕСТЬNULL(КурсыВалюты.Кратность, 0) &gt; 0
	|							И ЕСТЬNULL(КурсыВалюты.Курс, 0) &gt; 0
	|						ТОГДА КурсыВалютыЦены.Курс * КурсыВалюты.Кратность / (КурсыВалюты.Курс * КурсыВалютыЦены.Кратность)
	|					ИНАЧЕ 0
	|				КОНЕЦ
	|		ИНАЧЕ 1
	|	КОНЕЦ * ТаблицаТоваров.Количество / ЕСТЬNULL(КоэффициентыУпаковок.Коэффициент, 1) КАК СуммаПередачи,
	|	0 КАК СуммаСписания
	|ИЗ
	|	ТаблицаТоваров КАК ТаблицаТоваров
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		РегистрСведений.ЦеныНоменклатуры.СрезПоследних(
	|			&amp;Дата,
	|			ВидЦены = &amp;ВидЦены
	|				И (Номенклатура, СерияНоменклатуры, Партия) В
	|					(ВЫБРАТЬ
	|						ТаблицаТоваров.Номенклатура,
	|						ТаблицаТоваров.СерияНоменклатуры,
	|						ТаблицаТоваров.Партия
	|					ИЗ
	|						ТаблицаТоваров КАК ТаблицаТоваров)) КАК ЦеныНоменклатурыСрезПоследних
	|		ПО
	|			ТаблицаТоваров.Номенклатура = ЦеныНоменклатурыСрезПоследних.Номенклатура
	|			И ТаблицаТоваров.СерияНоменклатуры = ЦеныНоменклатурыСрезПоследних.СерияНоменклатуры
	|			И ТаблицаТоваров.Партия = ЦеныНоменклатурыСрезПоследних.Партия
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		РегистрСведений.ЕдиницыИзмеренияНоменклатуры КАК КоэффициентыУпаковок
	|	ПО
	|		ТаблицаТоваров.Номенклатура = КоэффициентыУпаковок.Номенклатура
	|		И ЦеныНоменклатурыСрезПоследних.Упаковка = КоэффициентыУпаковок.ЕдиницаИзмерения
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, ) КАК КурсыВалютыЦены
	|		ПО
	|			ЦеныНоменклатурыСрезПоследних.Валюта = КурсыВалютыЦены.Валюта
	|	ЛЕВОЕ СОЕДИНЕНИЕ
	|		РегистрСведений.КурсыВалют.СрезПоследних(&amp;Дата, Валюта = &amp;Валюта) КАК КурсыВалюты
	|		ПО
	|			(ИСТИНА)
	|");
	ЗапросДанныхДокумента.УстановитьПараметр("Дата", Источник.Дата);
	ЗапросДанныхДокумента.УстановитьПараметр("ВидЦены", ВидЦены);
	ЗапросДанныхДокумента.УстановитьПараметр("Валюта", Параметры.ВалютаРегламентированногоУчета);
КонецЕсли;

ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("СчетУчета", "105.00");
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);

ВходящиеДанные.Вставить("ВидПеремещения", ВидПеремещения);
ВходящиеДанные.Вставить("КорСчет", ?(ВидПеремещения = "ПеремещениеМеждуНТТ" Или ВидПеремещения = "ПеремещениеВНТТ", "105.38", "105.00"));</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ПТ_ТребованиеНакладная0315006";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.ТребованиеНакладная0315006";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПеремещениеТоваров</Источник>
						<Приемник>ДокументСсылка.ТребованиеНакладная0315006</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>25</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>СкладОтправитель --&gt; ЦМООтправитель</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>СкладПолучатель --&gt; ЦМОПолучатель</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМОПолучатель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; ВидПеремещения</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидПеремещения" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПеремещенияМЗ"/>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>550</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>--&gt; КорСчет</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КорСчет" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>17</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>750</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>21</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>20</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>--&gt; КоличествоЗатребовано</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КоличествоЗатребовано" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>--&gt; ЦенаПередачи</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ЦенаПередачи" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>
ИмяПоляСуммы      = "СуммаПередачи";
ИмяПоляКоличества = "Количество";
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойЦены);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>--&gt; СуммаПередачи</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаПередачи" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>--&gt; КФО</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>9</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>12</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>11</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>10</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПТ_НакладнаяНаОтпускМ15_Внутреннее</Код>
						<Наименование>Документ: Передача товаров на сторону</Наименование>
						<Порядок>250</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	0 КАК Сумма,
|	0 КАК Всего,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.ПеремещениеТоваров.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();

// расчет стоимостных показателей
Если Параметры.УзелВыгрузитьСтоимость Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета Тогда
	Параметры.Вставить("ИмяРеквизитаСтоимости", "Сумма, Всего, СуммаСписания, Количество");
ИначеЕсли Параметры.УзелВыгрузитьКоличествоСтоимость Тогда
	Параметры.Вставить("ИмяРеквизитаСтоимости", "Сумма, Всего, СуммаСписания");
Иначе
	Параметры.Вставить("ИмяРеквизитаСтоимости", "Сумма, Всего");
КонецЕсли;

УзелВыгрузитьКоличествоСтоимость = Параметры.УзелВыгрузитьКоличествоСтоимость;
Параметры.УзелВыгрузитьКоличествоСтоимость = Истина;
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Параметры.Удалить("ИмяРеквизитаСтоимости");
Параметры.УзелВыгрузитьКоличествоСтоимость = УзелВыгрузитьКоличествоСтоимость;

ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТовары.Итог("Всего"));

// расчет количества в основных единицах учета (при необходимости)
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("СчетУчета", "105.00");
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходяЩиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходяЩиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходяЩиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);

ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.ВнутриведомственноеПеремещение);</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ПТ_НакладнаяНаОтпускМ15_Внутреннее";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.НакладнаяНаОтпускМ15";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПеремещениеТоваров</Источник>
						<Приемник>ДокументСсылка.НакладнаяНаОтпускМ15</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>7</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>--&gt; ВидПередачиМЗ</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидПередачиМЗ" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПередачиМЗ"/>
								<ПередВыгрузкой>Значение = "ПередачаНаСторону";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>ОрганизацияПолучатель --&gt; Контрагент</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>О_Контрагенты                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>СкладОтправитель --&gt; ЦМО</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>550</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>--&gt; КФО</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>--&gt; СуммаДокумента</Наименование>
								<Порядок>700</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>13</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>800</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>18</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>--&gt; Цена</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									<ПередВыгрузкой>
ИмяПоляСуммы      = "Всего";
ИмяПоляКоличества = "Количество";
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойЦены);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>--&gt; Сумма</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>--&gt; Всего</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Всего" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>19</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>20</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>23</Код>
								<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПТ_ПоступлениеМЗ_Внутреннее</Код>
						<Наименование>Документ: Перемещение товаров</Наименование>
						<Порядок>300</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	0 КАК Сумма,
|	0 КАК Всего
|ИЗ
|	Документ.ПеремещениеТоваров.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();

// расчет стоимостных показателей
Если Параметры.УзелВыгрузитьСтоимость Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета Тогда
	Параметры.Вставить("ИмяРеквизитаСтоимости", "Сумма, Всего, Количество");
Иначе
	Параметры.Вставить("ИмяРеквизитаСтоимости", "Сумма, Всего");
КонецЕсли;

УзелВыгрузитьКоличествоСтоимость = Параметры.УзелВыгрузитьКоличествоСтоимость;
Параметры.УзелВыгрузитьКоличествоСтоимость = Истина;
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Параметры.Удалить("ИмяРеквизитаСтоимости");
Параметры.УзелВыгрузитьКоличествоСтоимость = УзелВыгрузитьКоличествоСтоимость;

ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТовары.Итог("Всего"));

// расчет количества в основных единицах учета (при необходимости)
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("СчетУчета", "105.00");
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходяЩиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходяЩиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходяЩиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.БезвозмездноеПоступлениеВнутриведомственное);
ВходящиеДанные.Вставить("СчетРасчетов"); // (304.04)</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ПТ_ПоступлениеМЗ_Внутреннее";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.ПоступлениеМЗ";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ПеремещениеТоваров</Источник>
						<Приемник>ДокументСсылка.ПоступлениеМЗ</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>30</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>2</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>--&gt; ВидПоступленияМЗ</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидПоступленияМЗ" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПоступленийМЗ"/>
								<ПередВыгрузкой>Значение = "Поступление";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>--&gt; ВалютаДокумента</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Параметры.ВалютаРегламентированногоУчета;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>ОрганизацияПолучатель --&gt; Организация</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ОрганизацияПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование>Организация --&gt; Контрагент</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>О_Контрагенты                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>СкладПолучатель --&gt; ЦМО</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Организация", Источник.ОрганизацияПолучатель);
ИсходящиеДанные.Вставить("Период"     , Источник.Дата);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>650</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>--&gt; СпособЗачетаАванса</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАванса" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование>--&gt; СуммаДокумента</Наименование>
								<Порядок>750</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Группа>
								<Код>13</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>800</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>21</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>16</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>--&gt; Сумма</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>--&gt; Всего</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Всего" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>33</Код>
									<Наименование>--&gt; КФО</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>22</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>25</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>24</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>23</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>26</Код>
								<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>--&gt; СчетРасчетов</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>СчетРасчетов</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство Отключить="true">
								<Код>29</Код>
								<Наименование>ИсточникФинансирования --&gt;</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
				<Группа>
					<Код>Излишки недостачи</Код>
					<Наименование>Излишки недостачи</Наименование>
					<Порядок>200</Порядок>
					<Правило>
						<Код>ОИТ_ПоступлениеМЗ</Код>
						<Наименование>Документ: Оприходование излишков товаров</Наименование>
						<Порядок>50</Порядок>
						<ПередВыгрузкой>ТекстЗапроса = "
|ВЫБРАТЬ
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА ТаблицаТовары.Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ ТаблицаТовары.Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьСтоимость ИЛИ &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА ТаблицаТовары.Сумма
|		ИНАЧЕ ТаблицаТовары.Количество
|	КОНЕЦ КАК Количество,
|	ТаблицаТовары.Сумма КАК Сумма,
|	ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.БезНДС) КАК СтавкаНДС,
|	0 КАК СуммаНДС,
|	ТаблицаТовары.Сумма КАК Всего
|ИЗ
|	Документ.ОприходованиеИзлишковТоваров.Товары КАК ТаблицаТовары
|ГДЕ
|	ТаблицаТовары.Ссылка = &amp;Ссылка
|";

Запрос = Новый Запрос(ТекстЗапроса);
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("ВыгрузитьСтоимость", Параметры.УзелВыгрузитьСтоимость);
Запрос.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

ТаблицаТовары = Запрос.Выполнить().Выгрузить();

Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
Если ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования") Тогда
	ИсточникФинансирования = Источник.ИсточникФинансирования;
КонецЕсли;
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("СчетУчета", "105.00");
ВходящиеДанные.Вставить("ИсточникФинансирования", ИсточникФинансирования);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходяЩиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходяЩиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходяЩиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("КПСКт", СчетаУчета.КПСОприходованиеИзлишков);
ВходящиеДанные.Вставить("ВидКПСКт", СчетаУчета.ВидКПСОприходованиеИзлишков);
ВходящиеДанные.Вставить("СчетКт");// По умолчанию из типовой операции (401.10.189)</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ОИТ_ПоступлениеМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ОприходованиеИзлишковТоваров</Источник>
						<Приемник>ДокументСсылка.ПоступлениеМЗ</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>--&gt; ВидПоступленияМЗ</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидПоступленияМЗ" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПоступленийМЗ"/>
								<ПередВыгрузкой>Значение = "Поступление";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>ПодразделениеОрганизации --&gt; Подразделение</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
								<Приемник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Склад --&gt; ЦМО</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>--&gt; ВалютаДокумента</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<ПередВыгрузкой>Значение = Параметры.ВалютаРегламентированногоУчета;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; СпособЗачетаАванса</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАванса" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>23</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>750</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>32</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>33</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование>--&gt; Сумма</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>28</Код>
									<Наименование>--&gt; СтавкаНДС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование>--&gt; СуммаНДС</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>--&gt; Всего</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Всего" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>39</Код>
									<Наименование>--&gt; КФО</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>15</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>17</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>16</Код>
									<Наименование>ЕдиницаИзмерения --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>КоличествоВЕдиницахИзмерения --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="КоличествоВЕдиницахИзмерения" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>20</Код>
									<Наименование>Коэффициент --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>19</Код>
									<Наименование>Сумма --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>18</Код>
									<Наименование>Цена --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>34</Код>
								<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(Перечисления.ХозяйственныеОперации.ОприходованиеТоваров);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>36</Код>
								<Наименование>--&gt; КПСКт</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>КПСКт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>37</Код>
								<Наименование>--&gt; СчетКт</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>СчетКт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство Отключить="true">
								<Код>38</Код>
								<Наименование>ИсточникФинансирования --&gt;</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СНТ_АктСписанияМЗ</Код>
						<Наименование>Документ: Списание недостач товаров</Наименование>
						<Порядок>100</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.СписаниеНедостачТоваров.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);

Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("СчетУчета", "105.00");
ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.СписаниеТоваров);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("СчетДт"); // По умолчанию из типовой операции (401.10.172)
ВходящиеДанные.Вставить("КПСДт", СчетаУчета.КПССписаниеНедостач);
ВходящиеДанные.Вставить("ВидКПСДт", СчетаУчета.ВидКПССписаниеНедостач);</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "СНТ_АктСписанияМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.АктСписанияМЗ";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.СписаниеНедостачТоваров</Источник>
						<Приемник>ДокументСсылка.АктСписанияМЗ</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>22</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>ПодразделениеОрганизации --&gt; ПодразделениеОтправитель</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
								<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Склад --&gt; ЦМООтправитель</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; КФО</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>16</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>700</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>17</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>18</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>9</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>12</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>11</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>10</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>20</Код>
								<Наименование>--&gt; КПСДт</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>КПСДт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>--&gt; СчетДт</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>СчетДт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ОИТО_ПоступлениеМЗ</Код>
						<Наименование>Документ: Оприходование излишков товаров</Наименование>
						<Порядок>150</Порядок>
						<ПередВыгрузкой>ТекстЗапроса = "
|ВЫБРАТЬ
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА ТаблицаТовары.Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ ТаблицаТовары.Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьСтоимость ИЛИ &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА ТаблицаТовары.Сумма
|		ИНАЧЕ ТаблицаТовары.Количество
|	КОНЕЦ КАК Количество,
|	ТаблицаТовары.Сумма КАК Сумма,
|	ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.БезНДС) КАК СтавкаНДС,
|	0 КАК СуммаНДС,
|	ТаблицаТовары.Сумма КАК Всего
|ИЗ
|	Документ.ОприходованиеИзлишковТоваровВОтделении.Товары КАК ТаблицаТовары
|ГДЕ
|	ТаблицаТовары.Ссылка = &amp;Ссылка
|";

Запрос = Новый Запрос(ТекстЗапроса);
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("ВыгрузитьСтоимость", Параметры.УзелВыгрузитьСтоимость);
Запрос.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

ТаблицаТовары = Запрос.Выполнить().Выгрузить();

Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
Если ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования") Тогда
	ИсточникФинансирования = Источник.ИсточникФинансирования;
КонецЕсли;
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("СчетУчета", "105.00");
ВходящиеДанные.Вставить("ИсточникФинансирования", ИсточникФинансирования);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("КПСКт", СчетаУчета.КПСОприходованиеИзлишков);
ВходящиеДанные.Вставить("ВидКПСКт", СчетаУчета.ВидКПСОприходованиеИзлишков);
ВходящиеДанные.Вставить("СчетКт");// По умолчанию из типовой операции (401.10.189)</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ОИТО_ПоступлениеМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.ОприходованиеИзлишковТоваровВОтделении</Источник>
						<Приемник>ДокументСсылка.ПоступлениеМЗ</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>--&gt; ВидПоступленияМЗ</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидПоступленияМЗ" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПоступленийМЗ"/>
								<ПередВыгрузкой>Значение = "Поступление";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Отделение --&gt; Подразделение</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Отделение" Вид="Реквизит" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
								<Приемник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>Склад --&gt; ЦМО</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>--&gt; ВалютаДокумента</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<ПередВыгрузкой>Значение = Параметры.ВалютаРегламентированногоУчета;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; СпособЗачетаАванса</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СпособЗачетаАванса" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
								<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>23</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>750</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>33</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>29</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>31</Код>
									<Наименование>--&gt; Сумма</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>27</Код>
									<Наименование>--&gt; СтавкаНДС</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>--&gt; СуммаНДС</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>--&gt; Всего</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Всего" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>26</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>39</Код>
									<Наименование>--&gt; КФО</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>15</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>18</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>22</Код>
									<Наименование>ЕдиницаИзмерения --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>19</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>21</Код>
									<Наименование>КоличествоВЕдиницахИзмерения --&gt;</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="КоличествоВЕдиницахИзмерения" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>20</Код>
									<Наименование>Коэффициент --&gt;</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>17</Код>
									<Наименование>Сумма --&gt;</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>16</Код>
									<Наименование>Цена --&gt;</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>34</Код>
								<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(Перечисления.ХозяйственныеОперации.ОприходованиеТоваров);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>36</Код>
								<Наименование>--&gt; КПСКт</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>КПСКт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>37</Код>
								<Наименование>--&gt; СчетКт</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>СчетКт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство Отключить="true">
								<Код>38</Код>
								<Наименование>ИсточникФинансирования --&gt;</Наименование>
								<Порядок>1100</Порядок>
								<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>СНТО_АктСписанияМЗ</Код>
						<Наименование>Документ: Списание недостач товаров</Наименование>
						<Порядок>200</Порядок>
						<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.СписаниеНедостачТоваровВОтделении.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("СчетУчета", "105.00");
ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.СписаниеТоваров);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("СчетДт"); // По умолчанию из типовой операции (401.10.172)
ВходящиеДанные.Вставить("КПСДт", СчетаУчета.КПССписаниеНедостач);
ВходящиеДанные.Вставить("ВидКПСДт", СчетаУчета.ВидКПССписаниеНедостач);</ПередВыгрузкой>
						<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "СНТО_АктСписанияМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
						<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.АктСписанияМЗ";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>ДокументСсылка.СписаниеНедостачТоваровВОтделении</Источник>
						<Приемник>ДокументСсылка.АктСписанияМЗ</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>22</Код>
								<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Дата --&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство Отключить="true" Поиск="true">
								<Код>3</Код>
								<Наименование>Номер --&gt; Номер</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Комментарий --&gt; Комментарий</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>Проведен --&gt; Проведен</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Отделение --&gt; ПодразделениеОтправитель</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="Отделение" Вид="Реквизит" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
								<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
								<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>Склад --&gt; ЦМООтправитель</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
								<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
								<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; ИФО</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
								<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
								<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; КФО</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>--&gt; СчетУчета</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
								<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>16</Код>
								<Наименование>--&gt; Материалы</Наименование>
								<Порядок>700</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
								<Свойство>
									<Код>18</Код>
									<Наименование>--&gt; Номенклатура</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>19</Код>
									<Наименование>--&gt; Количество</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>17</Код>
									<Наименование>--&gt; КПС</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>25</Код>
									<Наименование>--&gt; СуммаСписания</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
								</Свойство>
							</Группа>
							<Группа Отключить="true">
								<Код>9</Код>
								<Наименование>Товары --&gt;</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
								<Приемник Имя="" Вид=""/>
								<Свойство Отключить="true">
									<Код>10</Код>
									<Наименование>Номенклатура --&gt;</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>12</Код>
									<Наименование>Количество --&gt;</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
								<Свойство Отключить="true">
									<Код>11</Код>
									<Наименование>ИсточникФинансирования --&gt;</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
									<Приемник Имя="" Вид=""/>
								</Свойство>
							</Группа>
							<Свойство>
								<Код>20</Код>
								<Наименование>--&gt; КПСДт</Наименование>
								<Порядок>800</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>КПСДт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>--&gt; СчетДт</Наименование>
								<Порядок>850</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>СчетДт</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
								<Порядок>900</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Группа>
						<Код>Пересортица товаров</Код>
						<Наименование>Пересортица товаров</Наименование>
						<Порядок>250</Порядок>
						<Правило>
							<Код>ПСТ_ПоступлениеМЗ</Код>
							<Наименование>Документ: Пересортица товаров</Наименование>
							<Порядок>50</Порядок>
							<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	ТаблицаТовары.НоменклатураОприходование      КАК Номенклатура,
|	ТаблицаТовары.КоличествоОприходование        КАК Количество,
|	ТаблицаТовары.СуммаОприходование             КАК Сумма,
|	ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.БезНДС)      КАК СтавкаНДС,
|	ТаблицаТовары.СуммаНДС                       КАК СуммаНДС,
|	ТаблицаТовары.Всего                          КАК Всего
|ПОМЕСТИТЬ Материалы
|ИЗ
|	&amp;ТаблицаТовары КАК ТаблицаТовары
|ГДЕ
|	ИСТИНА
|	//%ИсточникФинансирования%
|;
|
|/////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ * ИЗ Материалы
|");

ЗапросДанныхДокумента.УстановитьПараметр("ТаблицаТовары", ВходящиеДанные.ТаблицаТовары);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();

Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

Если ТаблицаТовары.Количество() = 0 Тогда
	// Может быть пустой, если в ПВД были удалены строки с выгружаемым источником финансирования.
	Отказ = Истина;
Иначе
	ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);
	ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТовары.Итог("Сумма"));
	
	Организация = Источник.Организация;
	ИсточникФинансирования = Неопределено;
	ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
	ДатаСреза = Источник.Дата;
	СчетаУчета = Неопределено;
	Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);
	
	ВходящиеДанные.Вставить("СчетУчета", "105.00");
	ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.ОприходованиеТоваров);
	ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
	ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
	ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
	ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
	ВходящиеДанные.Вставить("КПСКт", СчетаУчета.КПСОприходованиеИзлишков);
	ВходящиеДанные.Вставить("ВидКПСКт", СчетаУчета.ВидКПСОприходованиеИзлишков);
	ВходящиеДанные.Вставить("СчетКт");// По умолчанию из типовой операции (401.10.189)
КонецЕсли;</ПередВыгрузкой>
							<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ПСТ_ПоступлениеМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
							<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.ПоступлениеМЗ";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
							<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПересортицаТоваров</Источник>
							<Приемник>ДокументСсылка.ПоступлениеМЗ</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Отключить="true" Поиск="true">
									<Код>3</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>--&gt; ВидПоступленияМЗ</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидПоступленияМЗ" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПоступленийМЗ"/>
									<ПередВыгрузкой>Значение = "Поступление";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>--&gt; СуммаДокумента</Наименование>
									<Порядок>350</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>ПодразделениеОрганизации --&gt; Подразделение</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
									<Приемник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
									<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>--&gt; ИФО</Наименование>
									<Порядок>550</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
									<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
									<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Склад --&gt; ЦМО</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
									<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>--&gt; ВалютаДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<ПередВыгрузкой>Значение = Параметры.ВалютаРегламентированногоУчета;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>--&gt; СчетУчета</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
									<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>--&gt; СпособЗачетаАванса</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СпособЗачетаАванса" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
									<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
								</Свойство>
								<Группа>
									<Код>16</Код>
									<Наименование>--&gt; Материалы</Наименование>
									<Порядок>800</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>17</Код>
										<Наименование>--&gt; Номенклатура</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
										<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>--&gt; Количество</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>22</Код>
										<Наименование>--&gt; Сумма</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>23</Код>
										<Наименование>--&gt; СтавкаНДС</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									</Свойство>
									<Свойство>
										<Код>24</Код>
										<Наименование>--&gt; СуммаНДС</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>25</Код>
										<Наименование>--&gt; Всего</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Всего" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>26</Код>
										<Наименование>--&gt; КПС</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
										<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>40</Код>
										<Наименование>--&gt; КФО</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
										<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Группа Отключить="true">
									<Код>27</Код>
									<Наименование>Товары --&gt;</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>28</Код>
										<Наименование>НоменклатураОприходование --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="НоменклатураОприходование" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>29</Код>
										<Наименование>ЕдиницаИзмеренияОприходование --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="ЕдиницаИзмеренияОприходование" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>30</Код>
										<Наименование>КоличествоОприходование --&gt;</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="КоличествоОприходование" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>31</Код>
										<Наименование>КоличествоВЕдиницахИзмерения --&gt;</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="КоличествоВЕдиницахИзмерения" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>32</Код>
										<Наименование>КоэффициентОприходование --&gt;</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="КоэффициентОприходование" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>33</Код>
										<Наименование>Сумма --&gt;</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>34</Код>
										<Наименование>Цена --&gt;</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>35</Код>
										<Наименование>ИсточникФинансирования --&gt;</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство>
									<Код>36</Код>
									<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>38</Код>
									<Наименование>--&gt; КПСКт</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>КПСКт</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>39</Код>
									<Наименование>--&gt; СчетКт</Наименование>
									<Порядок>1050</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>СчетКт</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПСТ_АктСписанияМЗ</Код>
							<Наименование>Документ: Пересортица товаров</Наименование>
							<Порядок>100</Порядок>
							<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	ТаблицаТовары.НоменклатураСписание КАК Номенклатура,
|	ТаблицаТовары.КоличествоСписание   КАК Количество,
|	ТаблицаТовары.СуммаСписание        КАК СуммаСписания
|ПОМЕСТИТЬ Материалы
|ИЗ
|	&amp;ТаблицаТовары КАК ТаблицаТовары
|ГДЕ
|	ИСТИНА
|	//%ИсточникФинансирования%
|;
|
|/////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ * ИЗ Материалы
|");

ЗапросДанныхДокумента.УстановитьПараметр("ТаблицаТовары", ВходящиеДанные.ТаблицаТовары);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();

Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

Если ТаблицаТовары.Количество() = 0 Тогда
	// Может быть пустой, если в ПВД были удалены строки с выгружаемым источником финансирования.
	Отказ = Истина;
Иначе
	ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);
	
	Организация = Источник.Организация;
	ИсточникФинансирования = Неопределено;
	ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
	ДатаСреза = Источник.Дата;
	СчетаУчета = Неопределено;
	Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);
	
	ВходящиеДанные.Вставить("СчетУчета", "105.00");
	ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.СписаниеТоваров);
	ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
	ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
	ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
	ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
	ВходящиеДанные.Вставить("СчетДт"); // По умолчанию из типовой операции (401.10.172)
	ВходящиеДанные.Вставить("КПСДт", СчетаУчета.КПССписаниеНедостач);
	ВходящиеДанные.Вставить("ВидКПСДт", СчетаУчета.ВидКПССписаниеНедостач);
КонецЕсли;</ПередВыгрузкой>
							<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ПСТ_АктСписанияМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
							<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.АктСписанияМЗ";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
							<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПересортицаТоваров</Источник>
							<Приемник>ДокументСсылка.АктСписанияМЗ</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Отключить="true" Поиск="true">
									<Код>3</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>ПодразделениеОрганизации --&gt; ПодразделениеОтправитель</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
									<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
									<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Склад --&gt; ЦМООтправитель</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
									<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>--&gt; ИФО</Наименование>
									<Порядок>500</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
									<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
									<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>--&gt; КФО</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>--&gt; СчетУчета</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
									<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование>--&gt; Материалы</Наименование>
									<Порядок>700</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>16</Код>
										<Наименование>--&gt; Номенклатура</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
										<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование>--&gt; Количество</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование>--&gt; КПС</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
										<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>25</Код>
										<Наименование>--&gt; СуммаСписания</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
									</Свойство>
								</Группа>
								<Группа Отключить="true">
									<Код>17</Код>
									<Наименование>Товары --&gt;</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>20</Код>
										<Наименование>Номенклатура --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>19</Код>
										<Наименование>Количество --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>18</Код>
										<Наименование>ИсточникФинансирования --&gt;</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство>
									<Код>21</Код>
									<Наименование>--&gt; КПСДт</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>КПСДт</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>--&gt; СчетДт</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>СчетДт</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПСТО_ПоступлениеМЗ</Код>
							<Наименование>Документ: Пересортица товаров</Наименование>
							<Порядок>150</Порядок>
							<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	ТаблицаТовары.НоменклатураОприходование      КАК Номенклатура,
|	ТаблицаТовары.КоличествоОприходование        КАК Количество,
|	ТаблицаТовары.СуммаОприходование             КАК Сумма,
|	ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.БезНДС)      КАК СтавкаНДС,
|	ТаблицаТовары.СуммаНДС                       КАК СуммаНДС,
|	ТаблицаТовары.Всего                          КАК Всего
|ПОМЕСТИТЬ Материалы
|ИЗ
|	&amp;ТаблицаТовары КАК ТаблицаТовары
|ГДЕ
|	ИСТИНА
|	//%ИсточникФинансирования%
|;
|
|/////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ * ИЗ Материалы
|");

ЗапросДанныхДокумента.УстановитьПараметр("ТаблицаТовары", ВходящиеДанные.ТаблицаТовары);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();

Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

Если ТаблицаТовары.Количество() = 0 Тогда
	// Может быть пустой, если в ПВД были удалены строки с выгружаемым источником финансирования.
	Отказ = Истина;
Иначе
	ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);
	ВходящиеДанные.Вставить("СуммаДокумента", ТаблицаТовары.Итог("Сумма"));
	
	Организация = Источник.Организация;
	ИсточникФинансирования = Неопределено;
	ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
	ДатаСреза = Источник.Дата;
	СчетаУчета = Неопределено;
	Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);
	
	ВходящиеДанные.Вставить("СчетУчета", "105.00");
	ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.ОприходованиеТоваров);
	ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
	ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
	ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
	ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
	ВходящиеДанные.Вставить("КПСКт", СчетаУчета.КПСОприходованиеИзлишков);
	ВходящиеДанные.Вставить("ВидКПСКт", СчетаУчета.ВидКПСОприходованиеИзлишков);
	ВходящиеДанные.Вставить("СчетКт");// По умолчанию из типовой операции (401.10.189)
КонецЕсли;</ПередВыгрузкой>
							<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ПСТО_ПоступлениеМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
							<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.ПоступлениеМЗ";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
							<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПересортицаТоваровВОтделении</Источник>
							<Приемник>ДокументСсылка.ПоступлениеМЗ</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Отключить="true" Поиск="true">
									<Код>3</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>--&gt; ВидПоступленияМЗ</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидПоступленияМЗ" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПоступленийМЗ"/>
									<ПередВыгрузкой>Значение = "Поступление";</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>--&gt; СуммаДокумента</Наименование>
									<Порядок>350</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Отделение --&gt; Подразделение</Наименование>
									<Порядок>500</Порядок>
									<Источник Имя="Отделение" Вид="Реквизит" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
									<Приемник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
									<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>--&gt; ИФО</Наименование>
									<Порядок>550</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
									<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
									<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>Склад --&gt; ЦМО</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
									<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>13</Код>
									<Наименование>--&gt; ВалютаДокумента</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
									<ПередВыгрузкой>Значение = Параметры.ВалютаРегламентированногоУчета;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>14</Код>
									<Наименование>--&gt; СчетУчета</Наименование>
									<Порядок>700</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
									<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>15</Код>
									<Наименование>--&gt; СпособЗачетаАванса</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СпособЗачетаАванса" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыЗачетаАвансов"/>
									<ПередВыгрузкой>Значение = "Автоматически";</ПередВыгрузкой>
								</Свойство>
								<Группа>
									<Код>16</Код>
									<Наименование>--&gt; Материалы</Наименование>
									<Порядок>800</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>17</Код>
										<Наименование>--&gt; Номенклатура</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
										<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>19</Код>
										<Наименование>--&gt; Количество</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>22</Код>
										<Наименование>--&gt; Сумма</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>23</Код>
										<Наименование>--&gt; СтавкаНДС</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
									</Свойство>
									<Свойство>
										<Код>24</Код>
										<Наименование>--&gt; СуммаНДС</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>25</Код>
										<Наименование>--&gt; Всего</Наименование>
										<Порядок>450</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Всего" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>26</Код>
										<Наименование>--&gt; КПС</Наименование>
										<Порядок>500</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
										<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>40</Код>
										<Наименование>--&gt; КФО</Наименование>
										<Порядок>550</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
										<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
									</Свойство>
								</Группа>
								<Группа Отключить="true">
									<Код>27</Код>
									<Наименование>Товары --&gt;</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>28</Код>
										<Наименование>НоменклатураОприходование --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="НоменклатураОприходование" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>29</Код>
										<Наименование>ЕдиницаИзмеренияОприходование --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="ЕдиницаИзмеренияОприходование" Вид="Реквизит" Тип="СправочникСсылка.ЕдиницыИзмерения"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>30</Код>
										<Наименование>КоличествоОприходование --&gt;</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="КоличествоОприходование" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>31</Код>
										<Наименование>КоличествоВЕдиницахИзмерения --&gt;</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="КоличествоВЕдиницахИзмерения" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>32</Код>
										<Наименование>КоэффициентОприходование --&gt;</Наименование>
										<Порядок>250</Порядок>
										<Источник Имя="КоэффициентОприходование" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>33</Код>
										<Наименование>Сумма --&gt;</Наименование>
										<Порядок>300</Порядок>
										<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>34</Код>
										<Наименование>Цена --&gt;</Наименование>
										<Порядок>350</Порядок>
										<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>35</Код>
										<Наименование>ИсточникФинансирования --&gt;</Наименование>
										<Порядок>400</Порядок>
										<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство>
									<Код>36</Код>
									<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>38</Код>
									<Наименование>--&gt; КПСКт</Наименование>
									<Порядок>1000</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>КПСКт</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>39</Код>
									<Наименование>--&gt; СчетКт</Наименование>
									<Порядок>1050</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>СчетКт</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
						<Правило>
							<Код>ПСТО_АктСписанияМЗ</Код>
							<Наименование>Документ: Пересортица товаров</Наименование>
							<Порядок>200</Порядок>
							<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	ТаблицаТовары.НоменклатураСписание КАК Номенклатура,
|	ТаблицаТовары.КоличествоСписание   КАК Количество,
|	ТаблицаТовары.СуммаСписание        КАК СуммаСписания
|ПОМЕСТИТЬ Материалы
|ИЗ
|	&amp;ТаблицаТовары КАК ТаблицаТовары
|ГДЕ
|	ИСТИНА
|	//%ИсточникФинансирования%
|;
|
|/////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ * ИЗ Материалы
|");

ЗапросДанныхДокумента.УстановитьПараметр("ТаблицаТовары", ВходящиеДанные.ТаблицаТовары);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();

Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

Если ТаблицаТовары.Количество() = 0 Тогда
	// Может быть пустой, если в ПВД были удалены строки с выгружаемым источником финансирования.
	Отказ = Истина;
Иначе
	ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);
	
	Организация = Источник.Организация;
	ИсточникФинансирования = Неопределено;
	ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
	ДатаСреза = Источник.Дата;
	СчетаУчета = Неопределено;
	Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);
	
	ВходящиеДанные.Вставить("СчетУчета", "105.00");
	ВходящиеДанные.Вставить("ХозяйственнаяОперация", Перечисления.ХозяйственныеОперации.СписаниеТоваров);
	ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
	ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
	ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
	ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
	ВходящиеДанные.Вставить("СчетДт"); // По умолчанию из типовой операции (401.10.172)
	ВходящиеДанные.Вставить("КПСДт", СчетаУчета.КПССписаниеНедостач);
	ВходящиеДанные.Вставить("ВидКПСДт", СчетаУчета.ВидКПССписаниеНедостач);
КонецЕсли;</ПередВыгрузкой>
							<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ПСТО_АктСписанияМЗ";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
							<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.АктСписанияМЗ";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
							<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
							<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
							<Источник>ДокументСсылка.ПересортицаТоваровВОтделении</Источник>
							<Приемник>ДокументСсылка.АктСписанияМЗ</Приемник>
							<Свойства>
								<Свойство Поиск="true">
									<Код>1</Код>
									<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
									<Порядок>50</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
								</Свойство>
								<Свойство Поиск="true">
									<Код>2</Код>
									<Наименование>Дата --&gt; Дата</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
									<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
								</Свойство>
								<Свойство Отключить="true" Поиск="true">
									<Код>3</Код>
									<Наименование>Номер --&gt; Номер</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
									<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>Организация --&gt; Организация</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>Комментарий --&gt; Комментарий</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>Проведен --&gt; Проведен</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
									<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>Отделение --&gt; ПодразделениеОтправитель</Наименование>
									<Порядок>400</Порядок>
									<Источник Имя="Отделение" Вид="Реквизит" Тип="СправочникСсылка.ОтделенияОрганизаций"/>
									<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
									<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>9</Код>
									<Наименование>Склад --&gt; ЦМООтправитель</Наименование>
									<Порядок>450</Порядок>
									<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
									<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
									<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>10</Код>
									<Наименование>--&gt; ИФО</Наименование>
									<Порядок>500</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
									<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
									<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>11</Код>
									<Наименование>--&gt; КФО</Наименование>
									<Порядок>550</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>12</Код>
									<Наименование>--&gt; СчетУчета</Наименование>
									<Порядок>600</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
									<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>24</Код>
									<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
									<Порядок>650</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
								</Свойство>
								<Группа>
									<Код>13</Код>
									<Наименование>--&gt; Материалы</Наименование>
									<Порядок>700</Порядок>
									<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
									<Свойство>
										<Код>16</Код>
										<Наименование>--&gt; Номенклатура</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
										<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>15</Код>
										<Наименование>--&gt; Количество</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
									</Свойство>
									<Свойство>
										<Код>14</Код>
										<Наименование>--&gt; КПС</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
										<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
									</Свойство>
									<Свойство>
										<Код>25</Код>
										<Наименование>--&gt; СуммаСписания</Наименование>
										<Порядок>200</Порядок>
										<Источник Имя="" Вид=""/>
										<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
									</Свойство>
								</Группа>
								<Группа Отключить="true">
									<Код>17</Код>
									<Наименование>Товары --&gt;</Наименование>
									<Порядок>750</Порядок>
									<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
									<Приемник Имя="" Вид=""/>
									<Свойство Отключить="true">
										<Код>20</Код>
										<Наименование>Номенклатура --&gt;</Наименование>
										<Порядок>50</Порядок>
										<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>19</Код>
										<Наименование>Количество --&gt;</Наименование>
										<Порядок>100</Порядок>
										<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
									<Свойство Отключить="true">
										<Код>18</Код>
										<Наименование>ИсточникФинансирования --&gt;</Наименование>
										<Порядок>150</Порядок>
										<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
										<Приемник Имя="" Вид=""/>
									</Свойство>
								</Группа>
								<Свойство>
									<Код>21</Код>
									<Наименование>--&gt; КПСДт</Наименование>
									<Порядок>800</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>КПСДт</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>22</Код>
									<Наименование>--&gt; СчетДт</Наименование>
									<Порядок>850</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>СчетДт</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>23</Код>
									<Наименование>--&gt; ХозяйственнаяОперация</Наименование>
									<Порядок>900</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="" Вид=""/>
									<ИмяПараметраДляПередачи>ХозяйственнаяОперация</ИмяПараметраДляПередачи>
									<ПередВыгрузкой>Значение = ОбщегоНазначения.ИмяЗначенияПеречисления(ВходящиеДанные.ХозяйственнаяОперация);</ПередВыгрузкой>
								</Свойство>
							</Свойства>
							<Значения/>
						</Правило>
					</Группа>
				</Группа>
			</Группа>
			<Группа>
				<Код>Производство</Код>
				<Наименование>Производство</Наименование>
				<Порядок>200</Порядок>
				<Правило>
					<Код>ИЛП_ТребованиеНакладная0315006</Код>
					<Наименование>Документ: Перемещение товаров</Наименование>
					<Порядок>50</Порядок>
					<ПередВыгрузкой>ЗапросДанныхДокумента = Новый Запрос("
|ВЫБРАТЬ
|	НомерСтроки КАК НомерСтроки,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	Количество КАК Количество,
|	0 КАК СуммаСписания
|ИЗ
|	Документ.ИзготовлениеПоЛекарственнойПрописи.Товары
|ГДЕ
|	Ссылка = &amp;Ссылка
|	//%ИсточникФинансирования%
|");
ЗапросДанныхДокумента.УстановитьПараметр("Ссылка", Источник.Ссылка);
ЗапросДанныхДокумента.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

Выполнить(Алгоритмы.КонвертироватьОбъектПоИсточникуФинансирования);

ТаблицаТовары = ЗапросДанныхДокумента.Выполнить().Выгрузить();
Выполнить(Алгоритмы.КонвертироватьОбъектПоСтоимости);
Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
ВходящиеДанные.Свойство("ИсточникФинансирования", ИсточникФинансирования);
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("СчетУчета", "105.00");
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);

ВходящиеДанные.Вставить("КорСчет", "109.60");</ПередВыгрузкой>
					<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ИЛП_ТребованиеНакладная0315006";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
					<ПоследовательностьПолейПоиска>ИмяТаблицы = "Документ.ТребованиеНакладная0315006";
Выполнить(Алгоритмы.ПолучитьОбъектПоСсылке);</ПоследовательностьПолейПоиска>
					<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ИзготовлениеПоЛекарственнойПрописи</Источник>
					<Приемник>ДокументСсылка.ТребованиеНакладная0315006</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>22</Код>
							<Наименование>--&gt; УникальныйИдентификаторПриемника</Наименование>
							<Порядок>50</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>УникальныйИдентификаторПриемника</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Отключить="true" Поиск="true">
							<Код>3</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; ВидПеремещения</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидПеремещения" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыПеремещенияМЗ"/>
							<ПередВыгрузкой>Значение = "ДвижениеМатериалов";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>ПодразделениеОрганизации --&gt; ПодразделениеОтправитель</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
							<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
							<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>Склад --&gt; ЦМООтправитель</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<Приемник Имя="ЦМООтправитель" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
							<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; ИФО</Наименование>
							<Порядок>550</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
							<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
							<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; КорСчет</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КорСчет" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
							<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>--&gt; СчетУчета</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
							<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; НеПересчитыватьСумму</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НеПересчитыватьСумму" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости);</ПередВыгрузкой>
						</Свойство>
						<Группа>
							<Код>16</Код>
							<Наименование>--&gt; Материалы</Наименование>
							<Порядок>750</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>17</Код>
								<Наименование>--&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>--&gt; Количество</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>--&gt; КоличествоЗатребовано</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КоличествоЗатребовано" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Количество;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>--&gt; КПС</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
								<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>--&gt; КФО</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>--&gt; СуммаСписания</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СуммаСписания" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>8</Код>
							<Наименование>Товары --&gt;</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
							<Приемник Имя="" Вид=""/>
							<Свойство Отключить="true">
								<Код>9</Код>
								<Наименование>Номенклатура --&gt;</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>10</Код>
								<Наименование>Количество --&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>11</Код>
								<Наименование>ИсточникФинансирования --&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Группа>
						<Свойство>
							<Код>24</Код>
							<Наименование>Номенклатура --&gt; Продукция</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>Продукция</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Если Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета Тогда
	ИмяПКО = "ГБУ_Номенклатура";
	Значение = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Источник.Номенклатура, Новый Структура("ГруппаБухгалтерскогоУчета", "ВидНоменклатуры.ГруппаБухгалтерскогоУчета")).ГруппаБухгалтерскогоУчета;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ИЛП_ВыпускПродукции</Код>
					<Наименование>Документ: Изготовление по лекарственной прописи</Наименование>
					<Порядок>100</Порядок>
					<ПередВыгрузкой>ТекстЗапроса = "
|ВЫБРАТЬ
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА ТаблицаТовары.Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ ТаблицаТовары.Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	ТаблицаТовары.Количество КАК Количество,
|	0 КАК Сумма
|ИЗ
|	Документ.ИзготовлениеПоЛекарственнойПрописи КАК ТаблицаТовары
|ГДЕ
|	ТаблицаТовары.Ссылка = &amp;Ссылка
|";

Запрос = Новый Запрос(ТекстЗапроса);
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);

ТаблицаТовары = Запрос.Выполнить().Выгрузить();
Если Параметры.УзелВыгрузитьКоличествоСтоимость Или Параметры.УзелВыгрузитьСтоимость Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета Тогда
	
	ТаблицаТовары[0].Сумма = ВходящиеДанные.Стоимость;
	
	Если Параметры.УзелВыгрузитьСтоимость Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета Тогда
		ТаблицаТовары[0].Количество = ВходящиеДанные.Стоимость;
	КонецЕсли;
	
КонецЕсли;

Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("ГотоваяПродукция", ТаблицаТовары);


Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
Если ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования") Тогда
	ИсточникФинансирования = Источник.ИсточникФинансирования;
КонецЕсли;
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("ИсточникФинансирования", ИсточникФинансирования);
ВходящиеДанные.Вставить("СчетПроизводства"); // (109.60)
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);
ВходящиеДанные.Вставить("КЭК", "341");</ПередВыгрузкой>
					<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ИЛП_ВыпускПродукции";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
					<Источник>ДокументСсылка.ИзготовлениеПоЛекарственнойПрописи</Источник>
					<Приемник>ДокументСсылка.ВыпускПродукции</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Дата --&gt; Дата</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
							<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство Отключить="true" Поиск="true">
							<Код>3</Код>
							<Наименование>Номер --&gt; Номер</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Организация --&gt; Организация</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>ПодразделениеОрганизации --&gt; ПодразделениеПолучатель</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
							<Приемник Имя="ПодразделениеПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Подразделения"/>
							<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>Склад --&gt; ЦМО</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
							<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
							<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Проведен --&gt; Проведен</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; ИФО</Наименование>
							<Порядок>450</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
							<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
							<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; КПС</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
							<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; КФО</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; СчетПроизводства</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетПроизводства" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
							<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
						</Свойство>
						<Группа>
							<Код>15</Код>
							<Наименование>--&gt; ГотоваяПродукция</Наименование>
							<Порядок>650</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ГотоваяПродукция" Вид="ТабличнаяЧасть"/>
							<Свойство>
								<Код>16</Код>
								<Наименование>--&gt; Номенклатура</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>--&gt; НоменклатураЗатрат</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="НоменклатураЗатрат" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
								<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>--&gt; Количество</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>--&gt; ПлановаяЦена</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПлановаяЦена" Вид="Реквизит" Тип="Число"/>
								<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>--&gt; Сумма</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							</Свойство>
						</Группа>
						<Свойство Отключить="true">
							<Код>8</Код>
							<Наименование>Номенклатура --&gt;</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>7</Код>
							<Наименование>Количество --&gt;</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
			</Группа>
			<Правило>
				<Код>ОперацияБух</Код>
				<Наименование>Документ: Расчет себестоимости товаров</Наименование>
				<Порядок>250</Порядок>
				<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда

	// Объект не нужно записывать стандартной обработкой.
	Отказ = Истина;

	// Формирование таблицы всех движений бухгалтерской операции.
	ИмяРегистра = "ЖурналПроводокЕПСБУ";
	ДанныеРаспределенияПоИФО = Неопределено;
	Если Не ЗначениеЗаполнено(Объект.Движения.ЖурналПроводокЕПСБУ) Тогда
		Попытка
			// См. функцию ПрочитатьОбъект модуля обработки КонвертацияОбъектовИнформационныхБаз,
			// в условии где ИмяУзла = "НаборЗаписей".
			// Через коллекцию ТаблицыОтложеннойЗаписиДвижений разработчиками обработки реализован обход ошибки 30178033
			// (см. вызов процедуры УстранитьОшибкуНазначенияВидаСубконто)
			// (см. процедуру ЗаписатьРегистрыБухгалтерии).
			ДанныеРаспределенияПоИФО = ТаблицыОтложеннойЗаписиДвижений[ИмяРегистра];
		Исключение
		КонецПопытки;
	КонецЕсли;
	
	ЭтоОбработкаТаблицыОтложеннойЗаписиДвижений = ЗначениеЗаполнено(ДанныеРаспределенияПоИФО);
	Если Не ЭтоОбработкаТаблицыОтложеннойЗаписиДвижений Тогда
		ДанныеРаспределенияПоИФО = Объект.Движения.ЖурналПроводокЕПСБУ.Выгрузить();
	КонецЕсли;
	
	// Дозаполнение движений бухгалтерской операции
	ТаблицаПараметрыПроводок = Неопределено;
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		ТаблицаПараметрыПроводок = ПараметрыОбъекта.Получить("ЖурналПроводокЕПСБУНаборЗаписей");
	КонецЕсли;

	Для Каждого Проводка Из ДанныеРаспределенияПоИФО Цикл
		
		ПараметрыПроводки = ТаблицаПараметрыПроводок[ДанныеРаспределенияПоИФО.Индекс(Проводка)];
		
		СуффиксыСчетов = Новый Структура;
		СуффиксыСчетов.Вставить("СчетДебета", "Дт");
		СуффиксыСчетов.Вставить("СчетКредита", "Кт");
		Для Каждого Суффикс Из СуффиксыСчетов Цикл
			
			СчетУчета = ?(ТаблицаПараметрыПроводок.Колонки.Найти(Суффикс.Ключ) = Неопределено, Неопределено, ПараметрыПроводки[Суффикс.Ключ]);
			Если ЗначениеЗаполнено(СчетУчета) Тогда
				Если СчетУчета = "СчетУчетаНоменклатуры" Тогда
					
					Для Индекс = 1 По 3 Цикл
						ИмяСубконто = "Субконто" + Суффикс.Значение + Индекс;
						ЗначениеСубконто = ?(ТаблицаПараметрыПроводок.Колонки.Найти(ИмяСубконто) = Неопределено, Неопределено, ПараметрыПроводки[ИмяСубконто]);
						Если ТипЗнч(ЗначениеСубконто) = Тип("СправочникСсылка.Номенклатура") Тогда
							Проводка["Счет" + Суффикс.Значение] = БухгалтерскиеОперацииПовтИсп.СчетУчетаСсылкаИзНоменклатуры(ЗначениеСубконто);
							Прервать;
						КонецЕсли;
					КонецЦикла;
					
				Иначе
					Если Не СчетУчета.ЭлементГруппа Тогда
						Проводка["Счет" + Суффикс.Значение] = СчетУчета;
					КонецЕсли;
				КонецЕсли;
			КонецЕсли;
			
			СчетПроводки = Проводка["Счет" + Суффикс.Значение];
			Если ЗначениеЗаполнено(СчетПроводки) Тогда
				
				ВидыСубконто = СчетПроводки.ВидыСубконто;
				Для Индекс = 0 По ВидыСубконто.Количество() - 1 Цикл
					ВидСубконто = ВидыСубконто[Индекс].ВидСубконто;
					ИмяСубконто = "Субконто" + Суффикс.Значение + (Индекс + 1);
					ЗначениеСубконто = ?(ТаблицаПараметрыПроводок.Колонки.Найти(ИмяСубконто) = Неопределено, Неопределено, ПараметрыПроводки[ИмяСубконто]);
					Если ВидСубконто.ТипЗначения.СодержитТип(ТипЗнч(ЗначениеСубконто)) Тогда
						Если ЭтоОбработкаТаблицыОтложеннойЗаписиДвижений Тогда
							Проводка[ИмяСубконто] = ЗначениеСубконто;
						Иначе
							Проводка["Субконто" + Суффикс.Значение].Вставить(ВидСубконто, ЗначениеСубконто);
						КонецЕсли;
					КонецЕсли;
				КонецЦикла;
				
			КонецЕсли;
			
			Если Не ЗначениеЗаполнено(СчетПроводки) Или Не СчетПроводки.Количественный Тогда
				Проводка["Количество" + Суффикс.Значение] = 0;
			КонецЕсли;
			
		КонецЦикла;
		
		Проводка.ЖурналОпераций = БухгалтерскийУчетПовтИсп.НомерЖурнала(Проводка.СчетДт, Проводка.СчетКт);
		
	КонецЦикла;

	ДанныеРаспределенияПоИФО.Сортировать("ИФО");

	// Изменение уже существующих бухгалтерских операций с совпадающими ИФО
	Запрос = Новый Запрос("
	|ВЫБРАТЬ
	|	Ссылка КАК Документ,
	|	ИФО    КАК ИФО
	|ИЗ
	|	Документ.ОперацияБух
	|ГДЕ
	|	ИДИсточника = &amp;ИДИсточника
	|");
	Запрос.УстановитьПараметр("ИДИсточника", Объект.ИДИсточника);

	СвободныеОперацииБух = Новый Массив;

	РезультатПолученияОпераций = Запрос.Выполнить();
	Если Не РезультатПолученияОпераций.Пустой() Тогда
		
		Если ДанныеРаспределенияПоИФО.Количество() = 0 Тогда
			СвободныеОперацииБух = РезультатПолученияОпераций.Выгрузить().ВыгрузитьКолонку("Документ");
		Иначе
			
			ВыборкаСуществующихОпераций = РезультатПолученияОпераций.Выбрать();
			Пока ВыборкаСуществующихОпераций.Следующий() Цикл
				
				ОтобранныеДанные = ДанныеРаспределенияПоИФО.НайтиСтроки(Новый Структура("ИФО", ВыборкаСуществующихОпераций.ИФО));
				Если ОтобранныеДанные.Количество() &gt; 0 Тогда
					
					ОперацияБухПоИФО = ВыборкаСуществующихОпераций.Документ.ПолучитьОбъект();
					ЗаполнитьЗначенияСвойств(ОперацияБухПоИФО, Объект,, "ИФО, Номер");
					
					ТаблицаПроводок = ДанныеРаспределенияПоИФО.Скопировать(ОтобранныеДанные);
					
					Если ЭтоОбработкаТаблицыОтложеннойЗаписиДвижений Тогда
						ОперацияБухПоИФО.Движения.ЖурналПроводокЕПСБУ.Очистить();
					Иначе
						ПроводкиТекущейОперации = ОперацияБухПоИФО.Движения.ЖурналПроводокЕПСБУ;
						ПроводкиТекущейОперации.Загрузить(ТаблицаПроводок);
						ПроводкиТекущейОперации.Записывать = Истина;
						ПроводкиТекущейОперации.УстановитьАктивность(Истина);
						ПроводкиТекущейОперации.ОбменДанными.Загрузка = Истина;
					КонецЕсли;
					
					ОперацияБухПоИФО.СуммаДокумента = ТаблицаПроводок.Итог("Сумма");
					
					ЗаписатьОбъектВИБ(ОперацияБухПоИФО, "ДокументСсылка.ОперацияБух");
					
					Если ЭтоОбработкаТаблицыОтложеннойЗаписиДвижений Тогда
						ТекущиеТаблицыОтложеннойЗаписиДвижений = Новый Соответствие;
						ТекущиеТаблицыОтложеннойЗаписиДвижений.Вставить(ИмяРегистра, ТаблицаПроводок);
						ЗаписатьРегистрыБухгалтерии(ОперацияБухПоИФО.Ссылка, ТекущиеТаблицыОтложеннойЗаписиДвижений);
					КонецЕсли;
					
					Для Каждого ЭлементДанных Из ОтобранныеДанные Цикл
						ДанныеРаспределенияПоИФО.Удалить(ЭлементДанных);
					КонецЦикла;
					
				Иначе
					СвободныеОперацииБух.Добавить(ВыборкаСуществующихОпераций.Документ);
				КонецЕсли;
			
			КонецЦикла;
			
		КонецЕсли;
	КонецЕсли;

	// Обработка оставшихся проводок
	ТаблицаПроводок = Неопределено;
	ОперацияБухПоИФО = Неопределено;
	ТекущийИФО = Неопределено;
	Для Каждого Проводка Из ДанныеРаспределенияПоИФО Цикл
		
		Если Проводка.ИФО &lt;&gt; ТекущийИФО Тогда
			
			// Запись документа, созданного на предыдущих итерациях
			Если ОперацияБухПоИФО &lt;&gt; Неопределено Тогда
				
				Если ЭтоОбработкаТаблицыОтложеннойЗаписиДвижений Тогда
					ОперацияБухПоИФО.Движения.ЖурналПроводокЕПСБУ.Очистить();
				Иначе
					ПроводкиТекущейОперации = ОперацияБухПоИФО.Движения.ЖурналПроводокЕПСБУ;
					ПроводкиТекущейОперации.Загрузить(ТаблицаПроводок);
					ПроводкиТекущейОперации.Записывать = Истина;
					ПроводкиТекущейОперации.УстановитьАктивность(Истина);
					ПроводкиТекущейОперации.ОбменДанными.Загрузка = Истина;
				КонецЕсли;
				
				ОперацияБухПоИФО.СуммаДокумента = ТаблицаПроводок.Итог("Сумма");
				
				ЗаписатьОбъектВИБ(ОперацияБухПоИФО, "ДокументСсылка.ОперацияБух");
				
				Если ЭтоОбработкаТаблицыОтложеннойЗаписиДвижений Тогда
					ТекущиеТаблицыОтложеннойЗаписиДвижений = Новый Соответствие;
					ТекущиеТаблицыОтложеннойЗаписиДвижений.Вставить(ИмяРегистра, ТаблицаПроводок);
					ЗаписатьРегистрыБухгалтерии(ОперацияБухПоИФО.Ссылка, ТекущиеТаблицыОтложеннойЗаписиДвижений);
				КонецЕсли;
				
			КонецЕсли;
			
			ТекущийИФО = Проводка.ИФО;
			
			Если СвободныеОперацииБух.Количество() &gt; 0 Тогда
				// Изменение оставшихся бухгалтерских операций с несовпадающими ИФО
				ОперацияБухПоИФО = СвободныеОперацииБух[0].ПолучитьОбъект();
				СвободныеОперацииБух.Удалить(0);
			Иначе
				// Добавление новых операций, если существующих не осталось, но не все проводки обработаны.
				ОперацияБухПоИФО = Документы.ОперацияБух.СоздатьДокумент();
			КонецЕсли;
			
			ЗаполнитьЗначенияСвойств(ОперацияБухПоИФО, Объект,, "ИФО, Номер");
			ОперацияБухПоИФО.ИФО = ТекущийИФО;
			Если ПустаяСтрока(ОперацияБухПоИФО.Номер) Тогда
				ОперацияБухПоИФО.УстановитьНовыйНомер();
			КонецЕсли;
			
			ТаблицаПроводок = ДанныеРаспределенияПоИФО.СкопироватьКолонки();
			
		КонецЕсли;
		
		ЗаполнитьЗначенияСвойств(ТаблицаПроводок.Добавить(), Проводка);
		
	КонецЦикла;

	// Запись последней бухгалтерской операции
	Если ОперацияБухПоИФО &lt;&gt; Неопределено Тогда
		
		Если ЭтоОбработкаТаблицыОтложеннойЗаписиДвижений Тогда
			ОперацияБухПоИФО.Движения.ЖурналПроводокЕПСБУ.Очистить();
		Иначе
			ПроводкиТекущейОперации = ОперацияБухПоИФО.Движения.ЖурналПроводокЕПСБУ;
			ПроводкиТекущейОперации.Загрузить(ТаблицаПроводок);
			ПроводкиТекущейОперации.Записывать = Истина;
			ПроводкиТекущейОперации.УстановитьАктивность(Истина);
			ПроводкиТекущейОперации.ОбменДанными.Загрузка = Истина;
		КонецЕсли;
		
		ОперацияБухПоИФО.СуммаДокумента = ТаблицаПроводок.Итог("Сумма");
		
		ЗаписатьОбъектВИБ(ОперацияБухПоИФО, "ДокументСсылка.ОперацияБух");
		
		Если ЭтоОбработкаТаблицыОтложеннойЗаписиДвижений Тогда
			ТекущиеТаблицыОтложеннойЗаписиДвижений = Новый Соответствие;
			ТекущиеТаблицыОтложеннойЗаписиДвижений.Вставить(ИмяРегистра, ТаблицаПроводок);
			ЗаписатьРегистрыБухгалтерии(ОперацияБухПоИФО.Ссылка, ТекущиеТаблицыОтложеннойЗаписиДвижений);
		КонецЕсли;
		
	КонецЕсли;

	// Оставшиеся бухгалтерские операции, сформированные при предыдущих обменах по ссылке текущего Объекта
	// необходимо пометить на удаление, так как данных по ним больше нет в базе-источнике.
	Для Каждого СвободнаяОперация Из СвободныеОперацииБух Цикл
		УдаляемаяОперация = СвободнаяОперация.ПолучитьОбъект();
		УдаляемаяОперация.Движения.ЖурналПроводокЕПСБУ.Очистить();
		УстановитьПометкуУдаленияУОбъекта(УдаляемаяОперация, Истина, "Документ");
	КонецЦикла;
КонецЕсли;</ПослеЗагрузки>
				<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>ДокументСсылка.РасчетСебестоимостиТоваров</Источник>
				<Приемник>ДокументСсылка.ОперацияБух</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>28</Код>
						<Наименование>--&gt; ИДИсточника</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ИДИсточника" Вид="Реквизит" Тип="УникальныйИдентификатор"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<ПередВыгрузкой>Если ВходящиеДанные.Свойство("УдалениеОбъекта") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>26</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>27</Код>
						<Наименование>ВерсияДокумента --&gt;</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ВерсияДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="" Вид=""/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						<ПередВыгрузкой>Если ВходящиеДанные.Свойство("УдалениеОбъекта") Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Если ВходящиеДанные.Свойство("УдалениеОбъекта") Тогда
	Отказ = Истина;
Иначе
	Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>5</Код>
						<Наименование>--&gt; ЖурналПроводокЕПСБУ</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЖурналПроводокЕПСБУ" Вид="НаборДвиженийРегистраБухгалтерии"/>
						<ПередОбработкойВыгрузки>Если ВходящиеДанные.Свойство("ЖурналПроводокЕПСБУ") И ВходящиеДанные.ЖурналПроводокЕПСБУ.Количество() = 0 Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>6</Код>
							<Наименование>--&gt; Период</Наименование>
							<Порядок>50</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>--&gt; Организация</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Организация" Вид="Измерение" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = Источник.Организация;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>--&gt; ИФО</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИФО" Вид="Измерение" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
							<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
							<ПередВыгрузкой>ВыгрузитьОбъект = Истина;
Значение = ОбъектКоллекции.ИФО;
Если Не ЗначениеЗаполнено(Значение) Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>--&gt; КФО</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КФО" Вид="Измерение" Тип="ПеречислениеСсылка.КВД"/>
							<ПередВыгрузкой>ВходящиеДанные.Вставить("КФО", ОбъектКоллекции.КФО);
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; СчетДебета</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетДебета</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;

Значение = ОбъектКоллекции.СчетДебета;
Если ЗначениеЗаполнено(Значение) Тогда
	Если Значение &lt;&gt; "СчетУчетаНоменклатуры" Тогда
		ВходящиеДанные.Вставить(ИмяПараметра, Значение);
		Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);
	КонецЕсли;
Иначе
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; КПСДт</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КПСДт" Вид="Измерение" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
							<ПередВыгрузкой>Дата = ВходящиеДанные.Период;
ИмяПараметра = ПКС.Приемник;
ВходящиеДанные.Вставить(ИмяПараметра, ОбъектКоллекции.КПСДт);
ВходящиеДанные.Вставить("Вид" + ИмяПараметра, ОбъектКоллекции.ВидКПСДт);
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; КЭКДт</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КЭКДт" Вид="Измерение" Тип="СправочникСсылка.КОСГУ"/>
							<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
ВходящиеДанные.Вставить(ИмяПараметра, ОбъектКоллекции.КЭКДт);
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКЭК);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; КоличествоДт</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КоличествоДт" Вид="Ресурс" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; СчетКредита</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетКредита</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Дата = Источник.Дата;

Значение = ОбъектКоллекции.СчетКредита;
Если ЗначениеЗаполнено(Значение) Тогда
	Если Значение &lt;&gt; "СчетУчетаНоменклатуры" Тогда
		ВходящиеДанные.Вставить(ИмяПараметра, Значение);
		Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);
	КонецЕсли;
Иначе
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>--&gt; КПСКт</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КПСКт" Вид="Измерение" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
							<ПередВыгрузкой>Дата = ВходящиеДанные.Период;
ИмяПараметра = ПКС.Приемник;
ВходящиеДанные.Вставить(ИмяПараметра, ОбъектКоллекции.КПСКт);
ВходящиеДанные.Вставить("Вид" + ИмяПараметра, ОбъектКоллекции.ВидКПСКт);
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; КЭККт</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КЭККт" Вид="Измерение" Тип="СправочникСсылка.КОСГУ"/>
							<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
ВходящиеДанные.Вставить(ИмяПараметра, ОбъектКоллекции.КЭККт);
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКЭК);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; КоличествоКт</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КоличествоКт" Вид="Ресурс" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Ресурс" Тип="Число"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.БалансоваяСумма;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; Содержание</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Содержание" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>ШаблонСодержания = НСтр("ru = '%1 Хоз. операция: %2'");
ШаблонПроводки = ОбъектКоллекции.ШаблонПроводки;
Значение = СтрЗаменить(СтрЗаменить(ШаблонСодержания, "%1", ШаблонПроводки.Наименование), "%2", ШаблонПроводки.Операция);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; СубконтоДт1</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СубконтоДт1</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСубконто);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; СубконтоДт2</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СубконтоДт2</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСубконто);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; СубконтоДт3</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СубконтоДт3</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСубконто);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; СубконтоКт1</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СубконтоКт1</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСубконто);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>--&gt; СубконтоКт2</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СубконтоКт2</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСубконто);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; СубконтоКт3</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СубконтоКт3</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>ИмяПараметра = ПКС.ИмяПараметраДляПередачи;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСубконто);</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВводНачальныхОстатков</Код>
				<Наименование>Документ: Ввод начальных остатков</Наименование>
				<Порядок>300</Порядок>
				<ПередВыгрузкой>ТекстЗапроса = "
|ВЫБРАТЬ
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА ТаблицаТовары.Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
|		ИНАЧЕ ТаблицаТовары.Номенклатура
|	КОНЕЦ КАК Номенклатура,
|	ВЫБОР
|		КОГДА &amp;ВыгрузитьСтоимость ИЛИ &amp;ВыгрузитьГруппуБухгалтерскогоУчета
|			ТОГДА ТаблицаТовары.СуммаСНДС - &amp;ПринятьНДСКВычету * ТаблицаТовары.СуммаНДС
|		ИНАЧЕ ТаблицаТовары.Количество
|	КОНЕЦ КАК Количество,
|	ТаблицаТовары.Сумма КАК Сумма
|ИЗ
|	Документ.ВводОстатков.Товары КАК ТаблицаТовары
|ГДЕ
|	ТаблицаТовары.Ссылка = &amp;Ссылка
|";

Запрос = Новый Запрос(ТекстЗапроса);
Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("ВыгрузитьСтоимость", Параметры.УзелВыгрузитьСтоимость);
Запрос.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);
Запрос.УстановитьПараметр("ПринятьНДСКВычету", ?(Источник.ПринятьНДСКВычету, 1, 0));

ТаблицаТовары = Запрос.Выполнить().Выгрузить();
ТаблицаТовары.Колонки.Добавить("ЦМО", Новый ОписаниеТипов("СправочникСсылка.Склады"));
ТаблицаТовары.ЗаполнитьЗначения(Источник.Склад, "ЦМО");

Выполнить(Алгоритмы.КонвертироватьКоличествоВОсновныеЕдиницыУчета);

ВходящиеДанные.Вставить("Материалы", ТаблицаТовары);

Организация = Источник.Организация;
ИсточникФинансирования = Неопределено;
Если ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования") Тогда
	ИсточникФинансирования = Источник.ИсточникФинансирования;
КонецЕсли;
ДатаСреза = Источник.Дата;
СчетаУчета = Неопределено;
Выполнить(Алгоритмы.ПолучитьСчетаУчетаОпераций);

ВходящиеДанные.Вставить("Счет", "105.00");
ВходящиеДанные.Вставить("ИсточникФинансирования", ИсточникФинансирования);
ВходящиеДанные.Вставить("ИФО", СчетаУчета.ИсточникФинансовогоОбеспечения);
ВходящиеДанные.Вставить("КФО", СчетаУчета.КФО);
ВходящиеДанные.Вставить("КПС", СчетаУчета.КПСПоСчету105);
ВходящиеДанные.Вставить("ВидКПС", СчетаУчета.ВидКПСПоСчету105);</ПередВыгрузкой>
				<ПослеЗагрузки>Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
	
	//Занесем данные об объекте в таблицу отложенной обработки 
	НоваяСтрока = Параметры.ЗагруженныеОбъекты.Добавить();
	НоваяСтрока.ИмяПКО = "ВводНачальныхОстатков";
	НоваяСтрока.Объект = Объект;
	НоваяСтрока.Параметры = ПараметрыОбъекта;
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
				<Источник>ДокументСсылка.ВводОстатков</Источник>
				<Приемник>ДокументСсылка.ВводНачальныхОстатков</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Отключить="true" Поиск="true">
						<Код>2</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКомментария);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Проведен --&gt; Проведен</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="Проведен" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>--&gt; РазделУчета</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="РазделУчета" Вид="Реквизит" Тип="ПеречислениеСсылка.РазделыУчетаДляВводаОстатков"/>
						<ПередВыгрузкой>Значение = "Материалы";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>--&gt; ВалютаДокумента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<ПередВыгрузкой>Выражение = "Константы.ВалютаРегламентированногоУчета.Получить()";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>--&gt; Счет</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Счет" Вид="Реквизит" Тип="ПланСчетовСсылка.ЕПСБУ"/>
						<ПередВыгрузкой>ИмяПараметра = ПКС.Приемник;
Дата = Источник.Дата;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСчета);</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>32</Код>
						<Наименование>--&gt; ИФО</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ИФО" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансовогоОбеспечения"/>
						<КодПравилаКонвертации>ИсточникиФинансовогоОбеспечения                   </КодПравилаКонвертации>
						<ПередВыгрузкой>ВыгрузитьОбъект = Истина;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>29</Код>
						<Наименование>--&gt; ОтражатьВБухгалтерскомУчете</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ОтражатьВБухгалтерскомУчете" Вид="Реквизит" Тип="Булево"/>
						<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>12</Код>
						<Наименование>--&gt; Материалы</Наименование>
						<Порядок>600</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойНоменклатуры);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; ЦМО</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЦМО" Вид="Реквизит" Тип="СправочникСсылка.ЦМО"/>
							<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойСклада);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; КПС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КПС" Вид="Реквизит" Тип="СправочникСсылка.КлассификационныеПризнакиСчетов"/>
							<ПередВыгрузкой>Дата = Источник.Дата;
ИмяПараметра = ПКС.Приемник;
Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКПС);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>--&gt; КФО</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КФО" Вид="Реквизит" Тип="ПеречислениеСсылка.КВД"/>
							<ПередВыгрузкой>Выполнить(Алгоритмы.ПКС_ПередВыгрузкойКФО);</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство Отключить="true">
						<Код>28</Код>
						<Наименование>ТипОперации --&gt;</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ТипОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыОперацийВводаОстатков"/>
						<Приемник Имя="" Вид=""/>
					</Свойство>
					<Свойство Отключить="true">
						<Код>27</Код>
						<Наименование>ИсточникФинансирования --&gt;</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ИсточникФинансирования" Вид="Реквизит" Тип="СправочникСсылка.ИсточникиФинансирования"/>
						<Приемник Имя="" Вид=""/>
					</Свойство>
					<Группа Отключить="true">
						<Код>22</Код>
						<Наименование>Товары --&gt;</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="" Вид=""/>
						<Свойство Отключить="true">
							<Код>23</Код>
							<Наименование>Количество --&gt;</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>24</Код>
							<Наименование>Номенклатура --&gt;</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>25</Код>
							<Наименование>Сумма --&gt;</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>26</Код>
							<Наименование>СуммаСНДС --&gt;</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="СуммаСНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>Валюты</Код>
				<Наименование>Валюты</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Валюты</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ЕдиницыИзмерения</Код>
				<Наименование>Единицы измерения</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>КлассификаторЕдиницИзмерения                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ЕдиницыИзмерения</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СтраныМира</Код>
				<Наименование>Страны мира</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>СтраныМира                                        </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.СтраныМира</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Организации</Код>
				<Наименование>Организации</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Организации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВидыКонтактнойИнформации</Код>
				<Наименование>Виды контактной информации</Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>ВидыКонтактнойИнформации                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ВидыКонтактнойИнформации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Контрагенты</Код>
				<Наименование>Контрагенты</Наименование>
				<Порядок>350</Порядок>
				<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Контрагенты</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ДоговорыКонтрагентов</Код>
				<Наименование>Договоры контрагентов</Наименование>
				<Порядок>400</Порядок>
				<КодПравилаКонвертации>Договоры                                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ДоговорыКонтрагентов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Номенклатура</Код>
				<Наименование>Номенклатура</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Номенклатура</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ГруппыБухгалтерскогоУчета</Код>
				<Наименование>Группы бухгалтерского учета</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>ГБУ_Номенклатура                                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ГруппыБухгалтерскогоУчета</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПодразделенияОрганизаций</Код>
				<Наименование>Подразделения организаций</Наименование>
				<Порядок>550</Порядок>
				<КодПравилаКонвертации>Подразделения                                     </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ПодразделенияОрганизаций</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ОтделенияОрганизаций</Код>
				<Наименование>Отделения организаций</Наименование>
				<Порядок>600</Порядок>
				<КодПравилаКонвертации>Отделения                                         </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ОтделенияОрганизаций</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Пользователи</Код>
				<Наименование>Пользователи</Наименование>
				<Порядок>650</Порядок>
				<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Пользователи</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СтатьиРасходов</Код>
				<Наименование>Статьи расходов</Наименование>
				<Порядок>700</Порядок>
				<КодПравилаКонвертации>ВидыЗатрат                                        </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ПланВидовХарактеристикСсылка.СтатьиРасходов</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>Склады</Код>
				<Наименование>Склады</Наименование>
				<Порядок>800</Порядок>
				<КодПравилаКонвертации>ЦМО                                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.Склады</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ФизическиеЛица</Код>
				<Наименование>Физические лица</Наименование>
				<Порядок>850</Порядок>
				<КодПравилаКонвертации>Ф_Контрагенты                                     </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>СправочникСсылка.ФизическиеЛица</ОбъектВыборки>
			</Правило>
		</Группа>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>100</Порядок>
			<Группа Отключить="false">
				<Код>Покупка</Код>
				<Наименование>Покупка</Наименование>
				<Порядок>50</Порядок>
				<Правило Отключить="false">
					<Код>ПоступлениеТоваров</Код>
					<Наименование>Поступление товаров</Наименование>
					<Порядок>50</Порядок>
					<КодПравилаКонвертации>ПТ_ПоступлениеМЗ                                  </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ПоступлениеТоваров</ОбъектВыборки>
				</Правило>
				<Правило Отключить="false">
					<Код>ВозвратТоваровПоставщику</Код>
					<Наименование>Возврат товаров поставщику</Наименование>
					<Порядок>100</Порядок>
					<КодПравилаКонвертации>ВТП_НакладнаяНаОтпускМ15                          </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ВозвратТоваровПоставщику</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);</ПередВыгрузкойОбъекта>
				</Правило>
			</Группа>
			<Группа Отключить="false">
				<Код>Продажа</Код>
				<Наименование>Продажа</Наименование>
				<Порядок>100</Порядок>
				<Правило Отключить="false">
					<Код>ОтчетОРозничныхПродажах</Код>
					<Наименование>Отчет о розничных продажах</Наименование>
					<Порядок>50</Порядок>
					<КодПравилаКонвертации>ОтчетОРозничныхПродажах                           </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ОтчетОРозничныхПродажах</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>ПередачаТоваровНаСторону</Код>
					<Наименование>Передача товаров на сторону</Наименование>
					<Порядок>100</Порядок>
					<КодПравилаКонвертации>ПТС_НакладнаяНаОтпускМ15                          </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ПередачаТоваровНаСторону</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);</ПередВыгрузкойОбъекта>
				</Правило>
				<Правило Отключить="false">
					<Код>ВозвратТоваровОтКлиента</Код>
					<Наименование>Возврат товаров от клиента</Наименование>
					<Порядок>150</Порядок>
					<КодПравилаКонвертации>ВТК_ПоступлениеМЗ                                 </КодПравилаКонвертации>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ВозвратТоваровОтКлиента</ОбъектВыборки>
				</Правило>
			</Группа>
			<Группа Отключить="false">
				<Код>СкладскиеОперации</Код>
				<Наименование>Складские операции</Наименование>
				<Порядок>150</Порядок>
				<Группа Отключить="false">
					<Код>СписаниеНаРасходы</Код>
					<Наименование>Списание на расходы</Наименование>
					<Порядок>50</Порядок>
					<Правило Отключить="false">
						<Код>ВнутреннееПотреблениеТоваров</Код>
						<Наименование>Внутреннее потребление товаров</Наименование>
						<Порядок>50</Порядок>
						<КодПравилаКонвертации>ВПТ_ВедомостьНаВыдачуМЗНаНуждыУчреждения          </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ВнутреннееПотреблениеТоваров</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Если Параметры.УзелВыгружатьВнутреннееПотреблениеВАктСписания Тогда
	
	ИмяПКО = "ВПТ_АктСписанияМЗ";
	
	Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
	Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
	
	// Отправление удаления документа с типом ДокументСсылка.ВедомостьНаВыдачуМЗНаНуждыУчреждения, т.к. документ мог быть отправлен ранее.
	ТипПриемника = "ДокументСсылка.ВедомостьНаВыдачуМЗНаНуждыУчреждения";
	Выполнить(Алгоритмы.ЗаписатьУдалениеДокумента);

Иначе
	
	Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
	Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
	
	// Отправление удаления документа с типом ДокументСсылка.АктСписанияМЗ, т.к. документ мог быть отправлен ранее.
	ТипПриемника = "ДокументСсылка.АктСписанияМЗ";
	Выполнить(Алгоритмы.ЗаписатьУдалениеДокумента);
	
КонецЕсли;
</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>ВнутреннееПотреблениеТоваровВОтделении</Код>
						<Наименование>Внутреннее потребление товаров в отделении</Наименование>
						<Порядок>100</Порядок>
						<КодПравилаКонвертации>ВПТО_ВедомостьНаВыдачуМЗНаНуждыУчреждения         </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ВнутреннееПотреблениеТоваровВОтделении</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Если Параметры.УзелВыгружатьВнутреннееПотреблениеВАктСписания Тогда
	
	ИмяПКО = "ВПТО_АктСписанияМЗ";
	
	Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
	Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
	
	// Отправление удаления документа с типом ДокументСсылка.ВедомостьНаВыдачуМЗНаНуждыУчреждения, т.к. документ мог быть отправлен ранее.
	ТипПриемника = "ДокументСсылка.ВедомостьНаВыдачуМЗНаНуждыУчреждения";
	Выполнить(Алгоритмы.ЗаписатьУдалениеДокумента);

Иначе
	
	Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
	Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
	
	// Отправление удаления документа с типом ДокументСсылка.АктСписанияМЗ, т.к. документ мог быть отправлен ранее.
	ТипПриемника = "ДокументСсылка.АктСписанияМЗ";
	Выполнить(Алгоритмы.ЗаписатьУдалениеДокумента);
	
КонецЕсли;
</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>ПотреблениеТоваровПоНазначениямВрачей</Код>
						<Наименование>Списание по назначениям врачей</Наименование>
						<Порядок>150</Порядок>
						<КодПравилаКонвертации>ПТНВ_АктСписанияМЗ                                </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ПотреблениеТоваровПоНазначениямВрачей</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);</ПередВыгрузкойОбъекта>
					</Правило>
				</Группа>
				<Группа Отключить="false">
					<Код>ИзлишкиНедостачи</Код>
					<Наименование>Излишки недостачи</Наименование>
					<Порядок>100</Порядок>
					<Правило Отключить="false">
						<Код>ОприходованиеИзлишковТоваров</Код>
						<Наименование>Оприходование излишков товаров</Наименование>
						<Порядок>50</Порядок>
						<КодПравилаКонвертации>ОИТ_ПоступлениеМЗ                                 </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ОприходованиеИзлишковТоваров</ОбъектВыборки>
					</Правило>
					<Правило Отключить="false">
						<Код>ОприходованиеИзлишковТоваровВОтделении</Код>
						<Наименование>Оприходование излишков товаров в отделении</Наименование>
						<Порядок>100</Порядок>
						<КодПравилаКонвертации>ОИТО_ПоступлениеМЗ                                </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ОприходованиеИзлишковТоваровВОтделении</ОбъектВыборки>
					</Правило>
					<Правило Отключить="false">
						<Код>СписаниеНедостачТоваров</Код>
						<Наименование>Списание недостач товаров</Наименование>
						<Порядок>150</Порядок>
						<КодПравилаКонвертации>СНТ_АктСписанияМЗ                                 </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.СписаниеНедостачТоваров</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>СписаниеНедостачТоваровВОтделении</Код>
						<Наименование>Списание недостач товаров из отделения</Наименование>
						<Порядок>200</Порядок>
						<КодПравилаКонвертации>СНТО_АктСписанияМЗ                                </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.СписаниеНедостачТоваровВОтделении</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>ПересортицаТоваров</Код>
						<Наименование>Пересортица товаров</Наименование>
						<Порядок>250</Порядок>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ПересортицаТоваров</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Если Параметры.УзелВыгрузитьКоличествоСтоимость
 Или Параметры.УзелВыгрузитьСтоимость
 Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета
 Или Объект.ПриходоватьТоварыПоСебестоимостиСписания Тогда
	
	// Цены номенклатуры нужны только для случаев, если выгружается стоимость
	// или для заполнения суммы оприходования документа "Поступление МЗ".
	// Иначе сумма для документа "Поступление МЗ" берется из документа.
	
	УзелВыгрузитьСтоимостьТекущее = Параметры.УзелВыгрузитьСтоимость;
	Параметры.УзелВыгрузитьСтоимость = Истина;
	
	Попытка
		Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
	Исключение
		Если УзелВыгрузитьСтоимостьТекущее Тогда
			ВызватьИсключение;
		КонецЕсли;
		ЗарегистрироватьПредупреждение(ПодробноеПредставлениеОшибки(ИнформацияОбОшибке()));
	КонецПопытки;
	
	Если Не Отказ Тогда
		ТаблицаЦен = ИсходящиеДанные.ТаблицаЦен;
	КонецЕсли;
	
	Параметры.УзелВыгрузитьСтоимость = УзелВыгрузитьСтоимостьТекущее;
	
КонецЕсли;

Если Не Отказ Тогда
	
	Запрос = Новый Запрос("
	|ВЫБРАТЬ
	|	НомерСтроки                                 КАК НомерСтроки,
	|	ИсточникФинансирования                      КАК ИсточникФинансирования,
	|	ВЫБОР
	|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
	|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
	|		ИНАЧЕ Номенклатура
	|	КОНЕЦ                                       КАК НоменклатураСписание,
	|	Количество                                  КАК КоличествоСписание,
	|	0                                           КАК СуммаСписание,
	|	ВЫБОР
	|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
	|			ТОГДА НоменклатураОприходование.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
	|		ИНАЧЕ НоменклатураОприходование
	|	КОНЕЦ                                       КАК НоменклатураОприходование,
	|	КоличествоОприходование                     КАК КоличествоОприходование,
	|	ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.БезНДС)     КАК СтавкаНДС,
	|	0                                           КАК СуммаНДС,
	|	0                                           КАК СуммаОприходование,
	|	0                                           КАК Всего
	|ИЗ
	|	Документ.ПересортицаТоваров.Товары
	|ГДЕ
	|	Ссылка = &amp;Ссылка
	|	И ВЫБОР
	|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
	|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета &lt;&gt; НоменклатураОприходование.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
	|		ИНАЧЕ Номенклатура &lt;&gt; НоменклатураОприходование
	|	КОНЕЦ
	|	И &amp;ПриходоватьТоварыПоСебестоимостиСписания
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	НомерСтроки                                 КАК НомерСтроки,
	|	ИсточникФинансирования                      КАК ИсточникФинансирования,
	|	ВЫБОР
	|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
	|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
	|		ИНАЧЕ Номенклатура
	|	КОНЕЦ                                       КАК НоменклатураСписание,
	|	Количество                                  КАК КоличествоСписание,
	|	0                                           КАК СуммаСписание,
	|	ВЫБОР
	|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
	|			ТОГДА НоменклатураОприходование.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
	|		ИНАЧЕ НоменклатураОприходование
	|	КОНЕЦ                                       КАК НоменклатураОприходование,
	|	КоличествоОприходование                     КАК КоличествоОприходование,
	|	ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.БезНДС)     КАК СтавкаНДС,
	|	0                                           КАК СуммаНДС,
	|	Сумма                                       КАК СуммаОприходование,
	|	Сумма                                       КАК Всего
	|ИЗ
	|	Документ.ПересортицаТоваров.Товары
	|ГДЕ
	|	Ссылка = &amp;Ссылка
	|	И НЕ &amp;ПриходоватьТоварыПоСебестоимостиСписания
	|");
	
	Запрос.УстановитьПараметр("Ссылка", Объект.Ссылка);
	Запрос.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);
	Запрос.УстановитьПараметр("ПриходоватьТоварыПоСебестоимостиСписания", Объект.ПриходоватьТоварыПоСебестоимостиСписания);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Если РезультатЗапроса.Пустой() Тогда
		// Может быть пустым, если Номенклатура списания равна Номенклатуре оприходования
		// и ПриходоватьТоварыПоСебестоимостиСписания = Истина
		Отказ = Истина;
	Иначе
		
		ТаблицаТовары = РезультатЗапроса.Выгрузить();
		Для Каждого СтрокаТовара Из ТаблицаТовары Цикл
			
			Если Параметры.УзелВыгрузитьКоличествоСтоимость
			 Или Параметры.УзелВыгрузитьСтоимость
			 Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета
			 Или Объект.ПриходоватьТоварыПоСебестоимостиСписания Тогда
				
				ЦенаНоменклатуры = ТаблицаЦен.Найти(СтрокаТовара.НомерСтроки, "НомерСтроки");
				СтрокаТовара.СуммаСписание = Окр(СтрокаТовара.КоличествоСписание * ЦенаНоменклатуры.Цена, 2);
				
			КонецЕсли;
			
			Если Объект.ПриходоватьТоварыПоСебестоимостиСписания Тогда
				СтрокаТовара.СуммаОприходование      = СтрокаТовара.СуммаСписание;
				СтрокаТовара.Всего                   = СтрокаТовара.СуммаСписание;
			КонецЕсли;
			
			Если Параметры.УзелВыгрузитьСтоимость Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета Тогда
				СтрокаТовара.КоличествоСписание      = СтрокаТовара.СуммаСписание;
				СтрокаТовара.КоличествоОприходование = СтрокаТовара.СуммаОприходование;
			КонецЕсли;
			
		КонецЦикла;
	КонецЕсли;
	
	Если Не Отказ Тогда
		
		Если ТипЗнч(ИсходящиеДанные) &lt;&gt; Тип("Структура") Тогда
			ИсходящиеДанные = Новый Структура;
		КонецЕсли;
		ИсходящиеДанные.Вставить("ТаблицаТовары", ТаблицаТовары);
		
		Если ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования") Тогда
			
			ИмяПКО = "ПСТ_АктСписанияМЗ";
			Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
			Отказ = Ложь;
			
			ИмяПКО = "ПСТ_ПоступлениеМЗ";
			Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
			
		Иначе
			
			ИмяПКО = "ПСТ_АктСписанияМЗ";
			ВыгрузитьПоПравилу(Объект,, ИсходящиеДанные,, ИмяПКО);
			
			ИмяПКО = "ПСТ_ПоступлениеМЗ";
			ВыгрузитьПоПравилу(Объект,, ИсходящиеДанные,, ИмяПКО);
			
		КонецЕсли;
	КонецЕсли;
	
КонецЕсли;

Отказ = Истина;</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>ПересортицаТоваровВОтделении</Код>
						<Наименование>Пересортица товаров в отделении</Наименование>
						<Порядок>300</Порядок>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ПересортицаТоваровВОтделении</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Если Параметры.УзелВыгрузитьКоличествоСтоимость
 Или Параметры.УзелВыгрузитьСтоимость
 Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета
 Или Объект.ПриходоватьТоварыПоСебестоимостиСписания Тогда
	
	// Цены номенклатуры нужны только для случаев, если выгружается стоимость
	// или для заполнения суммы оприходования документа "Поступление МЗ".
	// Иначе сумма для документа "Поступление МЗ" берется из документа.
	
	УзелВыгрузитьСтоимостьТекущее = Параметры.УзелВыгрузитьСтоимость;
	Параметры.УзелВыгрузитьСтоимость = Истина;
	
	Попытка
		Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
	Исключение
		Если УзелВыгрузитьСтоимостьТекущее Тогда
			ВызватьИсключение;
		КонецЕсли;
		ЗарегистрироватьПредупреждение(ПодробноеПредставлениеОшибки(ИнформацияОбОшибке()));
	КонецПопытки;
	
	Если Не Отказ Тогда
		ТаблицаЦен = ИсходящиеДанные.ТаблицаЦен;
	КонецЕсли;
	
	Параметры.УзелВыгрузитьСтоимость = УзелВыгрузитьСтоимостьТекущее;
	
КонецЕсли;

Если Не Отказ Тогда
	
	Запрос = Новый Запрос("
	|ВЫБРАТЬ
	|	НомерСтроки                                 КАК НомерСтроки,
	|	ИсточникФинансирования                      КАК ИсточникФинансирования,
	|	ВЫБОР
	|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
	|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
	|		ИНАЧЕ Номенклатура
	|	КОНЕЦ                                       КАК НоменклатураСписание,
	|	Количество                                  КАК КоличествоСписание,
	|	0                                           КАК СуммаСписание,
	|	ВЫБОР
	|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
	|			ТОГДА НоменклатураОприходование.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
	|		ИНАЧЕ НоменклатураОприходование
	|	КОНЕЦ                                       КАК НоменклатураОприходование,
	|	КоличествоОприходование                     КАК КоличествоОприходование,
	|	ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.БезНДС)     КАК СтавкаНДС,
	|	0                                           КАК СуммаНДС,
	|	0                                           КАК СуммаОприходование,
	|	0                                           КАК Всего
	|ИЗ
	|	Документ.ПересортицаТоваровВОтделении.Товары
	|ГДЕ
	|	Ссылка = &amp;Ссылка
	|	И ВЫБОР
	|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
	|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета &lt;&gt; НоменклатураОприходование.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
	|		ИНАЧЕ Номенклатура &lt;&gt; НоменклатураОприходование
	|	КОНЕЦ
	|	И &amp;ПриходоватьТоварыПоСебестоимостиСписания
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	НомерСтроки                                 КАК НомерСтроки,
	|	ИсточникФинансирования                      КАК ИсточникФинансирования,
	|	ВЫБОР
	|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
	|			ТОГДА Номенклатура.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
	|		ИНАЧЕ Номенклатура
	|	КОНЕЦ                                       КАК НоменклатураСписание,
	|	Количество                                  КАК КоличествоСписание,
	|	0                                           КАК СуммаСписание,
	|	ВЫБОР
	|		КОГДА &amp;ВыгрузитьГруппуБухгалтерскогоУчета
	|			ТОГДА НоменклатураОприходование.ВидНоменклатуры.ГруппаБухгалтерскогоУчета
	|		ИНАЧЕ НоменклатураОприходование
	|	КОНЕЦ                                       КАК НоменклатураОприходование,
	|	КоличествоОприходование                     КАК КоличествоОприходование,
	|	ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.БезНДС)     КАК СтавкаНДС,
	|	0                                           КАК СуммаНДС,
	|	Сумма                                       КАК СуммаОприходование,
	|	Сумма                                       КАК Всего
	|ИЗ
	|	Документ.ПересортицаТоваровВОтделении.Товары
	|ГДЕ
	|	Ссылка = &amp;Ссылка
	|	И НЕ &amp;ПриходоватьТоварыПоСебестоимостиСписания
	|");
	
	Запрос.УстановитьПараметр("Ссылка", Объект.Ссылка);
	Запрос.УстановитьПараметр("ВыгрузитьГруппуБухгалтерскогоУчета", Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета);
	Запрос.УстановитьПараметр("ПриходоватьТоварыПоСебестоимостиСписания", Объект.ПриходоватьТоварыПоСебестоимостиСписания);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Если РезультатЗапроса.Пустой() Тогда
		// Может быть пустым, если Номенклатура списания равна Номенклатуре оприходования
		// и ПриходоватьТоварыПоСебестоимостиСписания = Истина
		Отказ = Истина;
	Иначе
		
		ТаблицаТовары = РезультатЗапроса.Выгрузить();
		Для Каждого СтрокаТовара Из ТаблицаТовары Цикл
			
			Если Параметры.УзелВыгрузитьКоличествоСтоимость
			 Или Параметры.УзелВыгрузитьСтоимость
			 Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета
			 Или Объект.ПриходоватьТоварыПоСебестоимостиСписания Тогда
				
				ЦенаНоменклатуры = ТаблицаЦен.Найти(СтрокаТовара.НомерСтроки, "НомерСтроки");
				СтрокаТовара.СуммаСписание = Окр(СтрокаТовара.КоличествоСписание * ЦенаНоменклатуры.Цена, 2);
				
			КонецЕсли;
			
			Если Объект.ПриходоватьТоварыПоСебестоимостиСписания Тогда
				СтрокаТовара.СуммаОприходование      = СтрокаТовара.СуммаСписание;
				СтрокаТовара.Всего                   = СтрокаТовара.СуммаСписание;
			КонецЕсли;
			
			Если Параметры.УзелВыгрузитьСтоимость Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета Тогда
				СтрокаТовара.КоличествоСписание      = СтрокаТовара.СуммаСписание;
				СтрокаТовара.КоличествоОприходование = СтрокаТовара.СуммаОприходование;
			КонецЕсли;
			
		КонецЦикла;
	КонецЕсли;
	
	Если Не Отказ Тогда
		
		Если ТипЗнч(ИсходящиеДанные) &lt;&gt; Тип("Структура") Тогда
			ИсходящиеДанные = Новый Структура;
		КонецЕсли;
		ИсходящиеДанные.Вставить("ТаблицаТовары", ТаблицаТовары);
		
		Если ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования") Тогда
			
			ИмяПКО = "ПСТО_АктСписанияМЗ";
			Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
			Отказ = Ложь;
			
			ИмяПКО = "ПСТО_ПоступлениеМЗ";
			Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
			
		Иначе
			
			ИмяПКО = "ПСТО_АктСписанияМЗ";
			ВыгрузитьПоПравилу(Объект,, ИсходящиеДанные,, ИмяПКО);
			
			ИмяПКО = "ПСТО_ПоступлениеМЗ";
			ВыгрузитьПоПравилу(Объект,, ИсходящиеДанные,, ИмяПКО);
			
		КонецЕсли;
	КонецЕсли;
	
КонецЕсли;

Отказ = Истина;</ПередВыгрузкойОбъекта>
					</Правило>
				</Группа>
				<Группа Отключить="false">
					<Код>ПеремещенияТоваров</Код>
					<Наименование>Перемещения товаров</Наименование>
					<Порядок>150</Порядок>
					<Правило Отключить="false">
						<Код>ПеремещениеТоваров</Код>
						<Наименование>Перемещение товаров</Наименование>
						<Порядок>50</Порядок>
						<КодПравилаКонвертации>ПТ_ТребованиеНакладная0315006                     </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ПеремещениеТоваров</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>
Если Объект.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ПеремещениеТоваровМеждуФилиалами Тогда
	
	УзелВыгрузитьСтоимость = Параметры.УзелВыгрузитьСтоимость;
	Параметры.УзелВыгрузитьСтоимость = Истина;
	Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
	Параметры.УзелВыгрузитьСтоимость = УзелВыгрузитьСтоимость;
	
	Если ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования") Тогда
		Если Не Параметры.УзелИспользоватьОтборПоОрганизации Или Параметры.УзелСписокОрганизаций.НайтиПоЗначению(Объект.Организация) &lt;&gt; Неопределено Тогда
			ИмяПКО = "ПТ_НакладнаяНаОтпускМ15_Внутреннее";
			Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
			Отказ = Ложь;
		КонецЕсли;
		Если Не Параметры.УзелИспользоватьОтборПоОрганизации Или Параметры.УзелСписокОрганизаций.НайтиПоЗначению(Объект.ОрганизацияПолучатель) &lt;&gt; Неопределено Тогда
			ИмяПКО = "ПТ_ПоступлениеМЗ_Внутреннее";
			Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
		КонецЕсли;
	Иначе
		Если Не Параметры.УзелИспользоватьОтборПоОрганизации Или Параметры.УзелСписокОрганизаций.НайтиПоЗначению(Объект.Организация) &lt;&gt; Неопределено Тогда
			ИмяПКО = "ПТ_НакладнаяНаОтпускМ15_Внутреннее";
			ВыгрузитьПоПравилу(Объект,, ИсходящиеДанные,, ИмяПКО);
		КонецЕсли;
		Если Не Параметры.УзелИспользоватьОтборПоОрганизации Или Параметры.УзелСписокОрганизаций.НайтиПоЗначению(Объект.ОрганизацияПолучатель) &lt;&gt; Неопределено Тогда
			ИмяПКО = "ПТ_ПоступлениеМЗ_Внутреннее";
			ВыгрузитьПоПравилу(Объект,, ИсходящиеДанные,, ИмяПКО);
		КонецЕсли;
	КонецЕсли;
	
	ТипПриемника = "ДокументСсылка.ТребованиеНакладная0315006";
	Выполнить(Алгоритмы.ЗаписатьУдалениеДокумента);
	
	Отказ = Истина;
	
Иначе
	
	Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
	Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
	
	ТипПриемника = "ДокументСсылка.НакладнаяНаОтпускМ15";
	Выполнить(Алгоритмы.ЗаписатьУдалениеДокумента);
	
	ТипПриемника = "ДокументСсылка.ПоступлениеМЗ";
	Выполнить(Алгоритмы.ЗаписатьУдалениеДокумента);
	
КонецЕсли;</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>ПеремещениеТоваровМеждуОтделениями</Код>
						<Наименование>Перемещение товаров</Наименование>
						<Порядок>50</Порядок>
						<КодПравилаКонвертации>ПТО_ТребованиеНакладная0315006                    </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ПеремещениеТоваровМеждуОтделениями</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>ОтпускТоваровВОтделение</Код>
						<Наименование>Отпуск в отделение</Наименование>
						<Порядок>100</Порядок>
						<КодПравилаКонвертации>ОТО_ТребованиеНакладная0315006                    </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ОтпускТоваровВОтделение</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>
Выполнить(Алгоритмы.ПолучитьТаблицуЦен);

ИмяПКО = "ОТО_ТребованиеНакладная0315006";
Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);

// Отказ устанавливается в Истина, если ведется учет по источникам финансирования,
// и используется механизм выгрузки по источнику финансирования.
// Если Отказ не установился в Истина, значит учет по ИФ не ведется,
// и необходимо выгрузить объект принудительно.
Если Не Отказ Тогда
	ВыгрузитьПоПравилу(Объект,, ИсходящиеДанные,, ИмяПКО);
КонецЕсли;

Отказ = Ложь;

// Дополнительно, необходимо выгрузить по правилу ОТО_АктСписанияМЗ,
// если складской учет не ведется в отделении и в настройках узла не установлен признак ОтключитьСписаниеПриОтпускеВОтделениеБезСкладскогоУчета.
ВестиСкладскойУчетВОтделении = СкладыСервер.ВестиСкладскойУчетВОтделении(Объект.Отделение, Объект.Дата);
Если Не ВестиСкладскойУчетВОтделении И Не Параметры.УзелОтключитьСписаниеПриОтпускеВОтделениеБезСкладскогоУчета Тогда
	
	// Документы разных типов с одинаковой ссылкой и датой,
	// зависящих друг от друга по моменту времени,
	// необходимо доплнительно разбить по разным секундам.
	Если ТипЗнч(ИсходящиеДанные) &lt;&gt; Тип("Структура") Тогда
		ИсходящиеДанные = Новый Структура;
	КонецЕсли;
	ДатаДокумента = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Объект.Ссылка, "Дата");
	Если ДатаДокумента = КонецДня(ДатаДокумента) Тогда
		ИсходящиеДанные.Вставить("УменьшитьДатуТребования");
	Иначе
		ИсходящиеДанные.Вставить("УвеличитьДатуСписания");
	КонецЕсли;
	
	// Выгрузка Акта списания
	ИмяПКО = "ОТО_АктСписанияМЗ";
	Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
	
	// Если не ведется учет по источникам финансирования,
	// тогда объект будет выгружен стандартным механизмом, т.к. Отказ = Ложь.
	
Иначе
	
	// Если складской учет в отделении ведется,
	// тогда нужно отправить удаления для документа АктСписанияМЗ,
	// т.к. ранее он мог быть загружен.
	ТипПриемника = "ДокументСсылка.АктСписанияМЗ";
	Выполнить(Алгоритмы.ЗаписатьУдалениеДокумента);
	Отказ = Истина;
	
КонецЕсли;</ПередВыгрузкойОбъекта>
					</Правило>
					<Правило Отключить="false">
						<Код>ВозвратТоваровИзОтделения</Код>
						<Наименование>Возврат из отделения</Наименование>
						<Порядок>150</Порядок>
						<КодПравилаКонвертации>ВТО_ТребованиеНакладная0315006                    </КодПравилаКонвертации>
						<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
						<ОбъектВыборки>ДокументСсылка.ВозвратТоваровИзОтделения</ОбъектВыборки>
						<ПередВыгрузкойОбъекта>Выполнить(Алгоритмы.ПолучитьТаблицуЦен);
Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);</ПередВыгрузкойОбъекта>
					</Правило>
				</Группа>
			</Группа>
			<Группа Отключить="false">
				<Код>Производство</Код>
				<Наименование>Производство</Наименование>
				<Порядок>200</Порядок>
				<Правило Отключить="false">
					<Код>ИзготовлениеПоЛекарственнойПрописи</Код>
					<Наименование>Изготовление по лекарственной прописи</Наименование>
					<Порядок>50</Порядок>
					<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
					<ОбъектВыборки>ДокументСсылка.ИзготовлениеПоЛекарственнойПрописи</ОбъектВыборки>
					<ПередВыгрузкойОбъекта>
Выполнить(Алгоритмы.ПолучитьТаблицуЦен);

Если Не Отказ Тогда
	ИмяПКО = "ИЛП_ТребованиеНакладная0315006";
	Если ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования") Тогда
		Выполнить(Алгоритмы.ВыгрузитьОбъектПоИсточникамФинансирования);
	Иначе
		ВыгрузитьПоПравилу(Объект,, ИсходящиеДанные,, ИмяПКО);
	КонецЕсли;
	
	ПараметрыВыгрузкиДокумента = Новый Структура;
	Если Параметры.УзелВыгрузитьКоличествоСтоимость Или Параметры.УзелВыгрузитьСтоимость Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета Тогда
		ЗапросСтоимости = Новый Запрос("
		|ВЫБРАТЬ
		|	Цены.НомерСтроки КАК НомерСтроки,
		|	Цены.Цена КАК Цена
		|ПОМЕСТИТЬ ЦеныНоменклатуры
		|ИЗ
		|	&amp;ТаблицаЦен КАК Цены
		|;
		|
		|/////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	СУММА(Товары.Количество * ЕСТЬNULL(ЦеныНоменклатуры.Цена, 0)) КАК Стоимость
		|ИЗ
		|	Документ.ИзготовлениеПоЛекарственнойПрописи.Товары КАК Товары
		|	ЛЕВОЕ СОЕДИНЕНИЕ
		|		ЦеныНоменклатуры КАК ЦеныНоменклатуры
		|	ПО
		|		Товары.НомерСтроки = ЦеныНоменклатуры.НомерСтроки
		|ГДЕ
		|	Ссылка = &amp;Ссылка
		|");
		ЗапросСтоимости.УстановитьПараметр("Ссылка", Объект.Ссылка);
		ЗапросСтоимости.УстановитьПараметр("ТаблицаЦен", ИсходящиеДанные.ТаблицаЦен);
		РезультатЗапросаСтоимости = ЗапросСтоимости.Выполнить();
		Если РезультатЗапросаСтоимости.Пустой() Тогда
			ПараметрыВыгрузкиДокумента.Вставить("Стоимость", 0);
		Иначе
			Выборка = РезультатЗапросаСтоимости.Выбрать();
			Выборка.Следующий();
			ПараметрыВыгрузкиДокумента.Вставить("Стоимость", Выборка.Стоимость);
		КонецЕсли;
	КонецЕсли;
	
	Отказ = Истина;
	ИмяПКО = "ИЛП_ВыпускПродукции";
	ВыгрузитьПоПравилу(Объект,, ПараметрыВыгрузкиДокумента,, ИмяПКО);
КонецЕсли;</ПередВыгрузкойОбъекта>
				</Правило>
			</Группа>
			<Правило Отключить="false">
				<Код>РасчетСебестоимостиТоваров</Код>
				<Наименование>Расчет себестоимости товаров</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>ОперацияБух                                       </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.РасчетСебестоимостиТоваров</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>
Запрос = Новый Запрос("
|ВЫБРАТЬ
|	НастройкаОтраженияВБухгалтерскомУчете КАК НастройкаОтражения
|ИЗ
|	РегистрСведений.НастройкиОтраженияВБухгалтерскомУчете.СрезПоследних(&amp;Дата)
|ГДЕ
|	УзелОбмена = &amp;УзелОбмена
|");
Запрос.УстановитьПараметр("Дата", Объект.Дата);
Запрос.УстановитьПараметр("УзелОбмена", Параметры.УзелДляОбменаСсылка);

Выборка = Запрос.Выполнить().Выбрать();
Если Не Выборка.Следующий() Тогда
	ВызватьИсключение НСтр("ru = 'Не задана настройка отражения данных в бухгалтерском учете.'");
КонецЕсли;

НастройкаОтражения = Выборка.НастройкаОтражения;
Проводки = СводныеПроводки.ПолучитьСводныеДанныеПроводок(НастройкаОтражения, Объект.Организация, Объект.Дата);

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Период"             , КонецМесяца(Объект.Дата));
ИсходящиеДанные.Вставить("ЖурналПроводокЕПСБУ", Проводки);
ИсходящиеДанные.Вставить("ИДИсточника", Объект.Ссылка.УникальныйИдентификатор());</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>ВводОстатков</Код>
				<Наименование>Ввод начальных остатков</Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>ВводНачальныхОстатков                             </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВводОстатков</ОбъектВыборки>
				<ПередВыгрузкойОбъекта>Если Объект.ТипОперации &lt;&gt; Перечисления.ТипыОперацийВводаОстатков.ОстаткиСобственныхТоваров
   И Объект.ТипОперации &lt;&gt; Перечисления.ТипыОперацийВводаОстатков.ОстаткиСобственныхТоваровВОтделениях Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Группа Имя="Выгрузка">
			<Алгоритм Имя="ВыгрузитьОбъектПоИсточникамФинансирования" ИспользуетсяПриЗагрузке="false">
				<Текст>
// Параметры:
//  Объект
//  ИмяПКО
//  Отказ

Если Не Отказ И ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования") Тогда
	
	Отказ = Истина;
	
	Запрос = Новый Запрос("
	|ВЫБРАТЬ
	|	ИсточникФинансирования КАК ИсточникФинансирования,
	|	УникальныйИдентификатор КАК УникальныйИдентификатор
	|ИЗ
	|	РегистрСведений.ДетализацияОбмена
	|ГДЕ
	|	Объект = &amp;Ссылка
	|");
	Запрос.УстановитьПараметр("Ссылка", Объект.Ссылка);
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	Пока Выборка.Следующий() Цикл
		ОбъектДляВыгрузки = Объект;
		ПараметрыВыгрузкиДокумента = Новый Структура;
		Если ТипЗнч(ИсходящиеДанные) = Тип("Структура") Тогда
			ОбщегоНазначенияКлиентСервер.ДополнитьСтруктуру(ПараметрыВыгрузкиДокумента, ИсходящиеДанные, Истина);
		КонецЕсли;
		ПараметрыВыгрузкиДокумента.Вставить("ИсточникФинансирования", Выборка.ИсточникФинансирования);
		ПараметрыВыгрузкиДокумента.Вставить("УникальныйИдентификатор", Выборка.УникальныйИдентификатор);
		ВыгрузитьПоПравилу(ОбъектДляВыгрузки,, ПараметрыВыгрузкиДокумента,, ИмяПКО);
	КонецЦикла;
	
КонецЕсли;</Текст>
				<Параметры>Объект, ИмяПКО, ИсходящиеДанные , Отказ</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаписатьУдалениеДокумента" ИспользуетсяПриЗагрузке="false">
				<Текст>
// Параметры:
//  Объект
//  ТипПриемника

ТипИсточника = ОбщегоНазначения.СтроковоеПредставлениеТипа(ТипЗнч(Объект.Ссылка));

Если Не ПолучитьФункциональнуюОпцию("ИспользоватьИсточникиФинансирования") Тогда
	
	ЗаписатьВФайлУдалениеОбъекта(Объект.Ссылка, ТипПриемника, ТипИсточника);
	
Иначе
	
	Запрос = Новый Запрос("
	|ВЫБРАТЬ
	|	ДетализацияОбмена.УникальныйИдентификатор КАК УникальныйИдентификатор
	|ИЗ
	|	РегистрСведений.ДетализацияОбмена КАК ДетализацияОбмена
	|ГДЕ
	|	ДетализацияОбмена.Объект = &amp;Ссылка
	|");
	
	Запрос.УстановитьПараметр("Ссылка", Объект.Ссылка);
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	Пока Выборка.Следующий() Цикл
		
		МенеджерОбъекта = ОбщегоНазначения.МенеджерОбъектаПоСсылке(Объект.Ссылка);
		СсылкаДляУдаления = МенеджерОбъекта.ПолучитьСсылку(Новый УникальныйИдентификатор(Выборка.УникальныйИдентификатор));
		ЗаписатьВФайлУдалениеОбъекта(СсылкаДляУдаления, ТипПриемника, ТипИсточника);
		
	КонецЦикла;
	
КонецЕсли;</Текст>
				<Параметры>Объект, ТипПриемника</Параметры>
			</Алгоритм>
			<Группа Имя="КонвертацияСвойств">
				<Алгоритм Имя="ПКС_ПередВыгрузкойКомментария" ИспользуетсяПриЗагрузке="false">
					<Текст>
// Параметры:
//  Источник
//  ВходящиеДанные
//  Значение

Значение = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
	НСтр("ru='#%1 %2 от %3%4%5'"),
	Источник.Ссылка.Метаданные().Синоним,
	Источник.Номер,
	Формат(Источник.Дата, "ДЛФ=D"),
	?(ВходящиеДанные.Свойство("ИсточникФинансирования"), " " + ВходящиеДанные.ИсточникФинансирования, ""),
	?(ПустаяСтрока(Источник.Комментарий), "", Символы.ПС + Источник.Комментарий));</Текст>
					<Параметры>Источник, ВходящиеДанные, Значение</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ПКС_ПередВыгрузкойКПС" ИспользуетсяПриЗагрузке="false">
					<Текст>
// Параметры:
//  ВходящиеДанные
//  Дата
//  ИмяПараметра
//  Выражение
//  Отказ

КПС = Неопределено;
Если ВходящиеДанные.Свойство(ИмяПараметра, КПС) И ЗначениеЗаполнено(КПС) Тогда
	
	ВидКПС = Неопределено;
	Если ВходящиеДанные.Свойство("Вид" + ИмяПараметра, ВидКПС) И ЗначениеЗаполнено(ВидКПС) Тогда
		ВидКПС = "Перечисления.ВидыКБК." + ОбщегоНазначения.ИмяЗначенияПеречисления(ВидКПС);
	Иначе
		ВидКПС = "";
	КонецЕсли;
	
	Выражение = "БиблиотекаФункцийОбмена.НайтиКБКПоНаименованию(""%1"", %2, %3, %4, %5, '%6')";
	Выражение = СтрШаблон(Выражение, КПС, ВидКПС, "Ложь", "Истина", "Ложь", Формат(Дата, "ДФ=yyyyММdd"));
	
	// Альтернативный способ получения КПС.
	//Если Дата &lt; Дата(2017, 01, 01) Тогда
	//	Выражение = "БухгалтерскиеОперации.КПСПоКоду(""" + КПС + """, '" + Формат(Дата, "ДФ=yyyyММdd") + "', " + ВидКПС + ")";
	//Иначе
	//	Выражение = "Справочники.КлассификационныеПризнакиСчетов.НайтиКПС("""
	//		+ КПС
	//		+ """, Перечисления.ВидыКБК.АУИБУ, '"
	//		+ Формат(Дата, "ДФ=yyyyММdd") + "', '"
	//		+ Формат(Дата, "ДФ=yyyyММdd") + "', "
	//		+ ВидКПС + ")";
	//КонецЕсли;
	
Иначе
	Отказ = Истина;
КонецЕсли;</Текст>
					<Параметры>ВходящиеДанные, Дата, ИмяПараметра, Выражение, Отказ</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ПКС_ПередВыгрузкойКФО" ИспользуетсяПриЗагрузке="false">
					<Текст>
// Параметры:
//  ВходящиеДанные
//  Выражение
//  Пусто

КФО = Неопределено;
Если ВходящиеДанные.Свойство("КФО", КФО) И ЗначениеЗаполнено(КФО) Тогда
	Выражение = "Перечисления.КВД.Получить(" + (КФО - 1) + ")";
Иначе
	Отказ = Истина;
КонецЕсли;</Текст>
					<Параметры>ВходящиеДанные, Выражение, Отказ</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ПКС_ПередВыгрузкойКЭК" ИспользуетсяПриЗагрузке="false">
					<Текст>
// Параметры:
//  ВходящиеДанные
//  ИмяПараметра
//  Выражение
//  Пусто

КЭК = Неопределено;
Если ВходящиеДанные.Свойство(ИмяПараметра, КЭК) И ЗначениеЗаполнено(КЭК) Тогда
	Выражение = "БухгалтерскиеОперации.КЭКПоКоду(""" + КЭК + """)";
Иначе
	Отказ = Истина;
КонецЕсли;</Текст>
					<Параметры>ВходящиеДанные, ИмяПараметра, Выражение, Отказ</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ПКС_ПередВыгрузкойНоменклатуры" ИспользуетсяПриЗагрузке="false">
					<Текст>
// Параметры:
//  ОбъектКоллекции
//  ИмяПКО
//

Если ТипЗнч(ОбъектКоллекции.Номенклатура) = Тип("СправочникСсылка.ГруппыБухгалтерскогоУчета") Тогда
	
	ИмяПКО = "ГБУ_Номенклатура";
	
КонецЕсли;</Текст>
					<Параметры>ОбъектКоллекции, ИмяПКО</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ПКС_ПередВыгрузкойПризнакаПересчетаСтоимости" ИспользуетсяПриЗагрузке="false">
					<Текст>
// Параметры:
//  Значение

Значение = Параметры.УзелВыгрузитьКоличествоСтоимость Или Параметры.УзелВыгрузитьСтоимость Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета;</Текст>
					<Параметры>Значение</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ПКС_ПередВыгрузкойСклада" ИспользуетсяПриЗагрузке="false">
					<Текст>
// Параметры:
//  Источник
//  ИсходящиеДанные
//  ВыгрузитьОбъект

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Организация", Источник.Организация);
ИсходящиеДанные.Вставить("Период"     , Источник.Дата);</Текст>
					<Параметры>Источник, ИсходящиеДанные, ВыгрузитьОбъект</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ПКС_ПередВыгрузкойСубконто" ИспользуетсяПриЗагрузке="false">
					<Текст>// Параметры:
//  ИмяПараметра
//  ИмяПКО
//  Источник
//  ОбъектКоллекции
//  ВходящиеДанные
//  Значение
//  Пусто
//  ИсходящиеДанные
//  ВыгрузитьОбъект

Значение = ОбъектКоллекции[ИмяПараметра];

ТипЗначения = ТипЗнч(Значение);
Если ЗначениеЗаполнено(Значение) Тогда
	Если ТипЗначения = Тип("СправочникСсылка.Организации") Тогда
		ИмяПКО = "О_Контрагенты";
	ИначеЕсли ТипЗначения = Тип("СправочникСсылка.Контрагенты") Тогда
		ИмяПКО = "Контрагенты";
	ИначеЕсли ТипЗначения = Тип("СправочникСсылка.ГруппыБухгалтерскогоУчета") Тогда
		ИмяПКО = "ГБУ_Номенклатура";
	ИначеЕсли ТипЗначения = Тип("СправочникСсылка.Склады") Тогда
		ИмяПКО = "ЦМО";
	Иначе
		Правило = Менеджеры[ТипЗнч(Значение)];
		Если Правило &lt;&gt; Неопределено Тогда
			Правило = Правило.ПКО;
			
			Если Правило &lt;&gt; Неопределено Тогда
				ИмяПКО = Правило.Имя;
			КонецЕсли;
		КонецЕсли;
		
	КонецЕсли;
КонецЕсли;

Если ЗначениеЗаполнено(ИмяПКО) Тогда
	
	Если ТипЗначения = Тип("СправочникСсылка.Склады") Тогда
		ВыгрузитьОбъект = Истина;
		ИсходящиеДанные = Новый Структура;
		ИсходящиеДанные.Вставить("Организация", Источник.Организация);
		ИсходящиеДанные.Вставить("Период", ВходящиеДанные.Период);
	КонецЕсли;
	
ИначеЕсли Не (ТипЗначения = Тип("Булево")
	Или ТипЗначения = Тип("Строка")
	Или ТипЗначения = Тип("Число")
	Или ТипЗначения = Тип("Дата")) Тогда
	
	Пусто = Истина;
КонецЕсли;</Текст>
					<Параметры>ИмяПараметра, ИмяПКО, Источник, ОбъектКоллекции, ВходящиеДанные, Значение, Пусто, ИсходящиеДанные, ВыгрузитьОбъект</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ПКС_ПередВыгрузкойСчета" ИспользуетсяПриЗагрузке="false">
					<Текст>
// Параметры:
//  ВходящиеДанные
//  Дата
//  ИмяПараметра
//  Выражение
//  Пусто

Счет = Неопределено;
Если ВходящиеДанные.Свойство(ИмяПараметра, Счет) И ЗначениеЗаполнено(Счет) Тогда
	Выражение = "БухгалтерскийУчет.СчетПоКоду(""" + Счет + """, '" + Формат(Дата, "ДФ=yyyyММdd") + "')";
Иначе
	Отказ = Истина;
КонецЕсли;</Текст>
					<Параметры>ВходящиеДанные, Дата, ИмяПараметра, Выражение, Отказ</Параметры>
				</Алгоритм>
				<Алгоритм Имя="ПКС_ПередВыгрузкойЦены" ИспользуетсяПриЗагрузке="false">
					<Текст>
// Параметры:
//  ОбъектКоллекции
//  ИмяПоляСуммы
//  ИмяПоляКоличества

Если ЗначениеЗаполнено(ОбъектКоллекции[ИмяПоляСуммы]) И ЗначениеЗаполнено(ОбъектКоллекции[ИмяПоляКоличества]) Тогда
	Значение = Окр(ОбъектКоллекции[ИмяПоляСуммы] / ОбъектКоллекции[ИмяПоляКоличества], 15, 2);
Иначе
	Отказ = Истина;
КонецЕсли;</Текст>
					<Параметры>ОбъектКоллекции, ИмяПоляСуммы, ИмяПоляКоличества</Параметры>
				</Алгоритм>
			</Группа>
			<Алгоритм Имя="КонвертироватьКоличествоВОсновныеЕдиницыУчета" ИспользуетсяПриЗагрузке="false">
				<Текст>
// В соответствии с параметрами узла плана обмена
// пересчитывает количество товаров в основные единицы учета.
// Сами единицы измерения товаров передаются через реквизит справочника Номенклатура.
// (реализацию передачи единицы измерения см. в ПКС ЕдиницаИзмерения ПКО Номенклатура)
// (реализацию заполнения единицы измерения в табличной части см. в алгоритме ЗаполнитьТабличнуюЧастьМЗ)
//
// Параметры:
//  ТаблицаТовары - ТаблицаЗначений - таблица описывающая табличную часть "Товары" документов.
//                  В таблице должны обязательно присутствовать следующие поля:
//    * Номенклатура - СправочникСсылка.Номенклатура - выгружаемый товар.
//    * Количество   - Число - количество товаров в базовых единицах.

Если Параметры.УзелВыгружатьВОсновныхЕдиницахУчета И Не Параметры.УзелВыгрузитьСтоимость И Не Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета Тогда
	
	Запрос = Новый Запрос("
	|ВЫБРАТЬ
	|	*
	|ПОМЕСТИТЬ Товары
	|ИЗ
	|	&amp;Товары КАК Товары
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Товары.*,
	|	ВЫБОР
	|		КОГДА Товары.Номенклатура.ОсновнаяЕдиницаУчета &lt;&gt; &amp;ПустаяЕдиница
	|			ТОГДА Товары.Номенклатура.ОсновнаяЕдиницаУчета
	|		КОГДА Товары.Номенклатура.Упаковка &lt;&gt; &amp;ПустаяЕдиница
	|			ТОГДА Товары.Номенклатура.Упаковка
	|		ИНАЧЕ Товары.Номенклатура.ЕдиницаИзмерения
	|	КОНЕЦ                                                        КАК ЕдиницаИзмерения,
	|	Товары.Количество / КоэффициентыЕдиницИзмерения.Коэффициент  КАК Количество
	|ИЗ
	|	Товары КАК Товары
	|		
	|		ЛЕВОЕ СОЕДИНЕНИЕ
	|			РегистрСведений.ЕдиницыИзмеренияНоменклатуры КАК КоэффициентыЕдиницИзмерения
	|		ПО
	|			КоэффициентыЕдиницИзмерения.Номенклатура = Товары.Номенклатура
	|			И ВЫБОР
	|				КОГДА Товары.Номенклатура.ОсновнаяЕдиницаУчета &lt;&gt; &amp;ПустаяЕдиница
	|					ТОГДА КоэффициентыЕдиницИзмерения.ЕдиницаИзмерения = Товары.Номенклатура.ОсновнаяЕдиницаУчета
	|				КОГДА Товары.Номенклатура.Упаковка &lt;&gt; &amp;ПустаяЕдиница
	|					ТОГДА КоэффициентыЕдиницИзмерения.ЕдиницаИзмерения = Товары.Номенклатура.Упаковка
	|				ИНАЧЕ КоэффициентыЕдиницИзмерения.ЕдиницаИзмерения = Товары.Номенклатура.ЕдиницаИзмерения
	|			КОНЕЦ
	|");
	
	Запрос.УстановитьПараметр("Товары"       , ТаблицаТовары);
	Запрос.УстановитьПараметр("ПустаяЕдиница", Справочники.ЕдиницыИзмерения.ПустаяСсылка());
	
	ТаблицаТовары = Запрос.Выполнить().Выгрузить();
	
КонецЕсли;</Текст>
				<Параметры>ТаблицаТовары</Параметры>
			</Алгоритм>
			<Алгоритм Имя="КонвертироватьОбъектПоИсточникуФинансирования" ИспользуетсяПриЗагрузке="false">
				<Текст>
// Параметры:
//  Источник - ДокументОбъект
//  ВходящиеДанные - 
//  ЗапросДанныхДокумента

Если ВходящиеДанные.Свойство("ИсточникФинансирования") Тогда
	
	ЗапросДанныхДокумента.Текст = СтрЗаменить(ЗапросДанныхДокумента.Текст, "//%ИсточникФинансирования%", "И ИсточникФинансирования = &amp;ИсточникФинансирования");
	ЗапросДанныхДокумента.УстановитьПараметр("ИсточникФинансирования", ВходящиеДанные.ИсточникФинансирования);
	
КонецЕсли;

Если ВходящиеДанные.Свойство("УникальныйИдентификатор") Тогда
	ВходящиеДанные.Вставить("УникальныйИдентификаторПриемника", ВходящиеДанные.УникальныйИдентификатор);
Иначе
	ВходящиеДанные.Вставить("УникальныйИдентификаторПриемника", Источник.Ссылка.УникальныйИдентификатор());
КонецЕсли;</Текст>
				<Параметры>Источник, ВходящиеДанные, ЗапросДанныхДокумента</Параметры>
			</Алгоритм>
			<Алгоритм Имя="КонвертироватьОбъектПоСтоимости" ИспользуетсяПриЗагрузке="false">
				<Текст>
// Параметры:
//  ВходящиеДанные
//  ТаблицаТовары

Если Параметры.УзелВыгрузитьКоличествоСтоимость Или Параметры.УзелВыгрузитьСтоимость Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета Тогда
	
	ИмяРеквизитаСтоимости = Неопределено;
	Если Не Параметры.Свойство("ИмяРеквизитаСтоимости", ИмяРеквизитаСтоимости) Тогда
		Если Параметры.УзелВыгрузитьСтоимость Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета Тогда
			ИмяРеквизитаСтоимости = "СуммаСписания, Количество";
		Иначе
			ИмяРеквизитаСтоимости = "СуммаСписания";
		КонецЕсли;
	КонецЕсли;
	
	ИменаРеквизитовСтоимости = СтрРазделить(ИмяРеквизитаСтоимости, ", ", Ложь);
	
	ТаблицаЦен = ВходящиеДанные.ТаблицаЦен;
	Для Каждого ТекущаяСтрока Из ТаблицаТовары Цикл
		
		ЦенаНоменклатуры = ТаблицаЦен.Найти(ТекущаяСтрока.НомерСтроки, "НомерСтроки");
		Для Каждого ИмяРеквизитаСтоимости Из ИменаРеквизитовСтоимости Цикл
			ТекущаяСтрока[ИмяРеквизитаСтоимости] = Окр(ТекущаяСтрока.Количество * ЦенаНоменклатуры.Цена, 2);
		КонецЦикла;
		
	КонецЦикла;
	
КонецЕсли;</Текст>
				<Параметры>ВходящиеДанные, ТаблицаТовары</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ПолучитьСчетаУчетаОпераций" ИспользуетсяПриЗагрузке="false">
				<Текст>
// Параметры:
//  Организация
//  ИсточникФинансирования
//  ДатаСреза
//  СчетаУчета

ДатаСреза = НачалоГода(ДатаСреза);
СчетаУчетаПоДате = Параметры.СчетаУчетаОпераций.Получить(ДатаСреза);
СчетаУчетаПоОрганизации = Неопределено;
Если СчетаУчетаПоДате &lt;&gt; Неопределено Тогда
	СчетаУчетаПоОрганизации = СчетаУчетаПоДате.Получить(Организация);
	Если СчетаУчетаПоОрганизации &lt;&gt; Неопределено Тогда
		СчетаУчетаПоИсточникуФинансирования = СчетаУчетаПоОрганизации.Получить(ИсточникФинансирования);
		Если СчетаУчетаПоИсточникуФинансирования &lt;&gt; Неопределено Тогда
			СчетаУчета = СчетаУчетаПоИсточникуФинансирования;
		КонецЕсли;
	КонецЕсли;
КонецЕсли;

Если СчетаУчета = Неопределено Тогда
	СчетаУчета = ОбменДаннымиБольничнаяАптека.ПолучитьСчетаУчетаОперацийБГУ(Организация, ИсточникФинансирования, ДатаСреза);
	Если СчетаУчетаПоДате = Неопределено Тогда
		СчетаУчетаПоДате = Новый Соответствие;
		Параметры.СчетаУчетаОпераций.Вставить(ДатаСреза, СчетаУчетаПоДате);
	КонецЕсли;
	Если СчетаУчетаПоОрганизации = Неопределено Тогда
		СчетаУчетаПоОрганизации = Новый Соответствие;
		СчетаУчетаПоДате.Вставить(Организация, СчетаУчетаПоОрганизации);
	КонецЕсли;
	СчетаУчетаПоОрганизации.Вставить(ИсточникФинансирования, СчетаУчета);
КонецЕсли;</Текст>
				<Параметры>Организация, ИсточникФинансирования, ДатаСреза, СчетаУчета</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ПолучитьТаблицуЦен" ИспользуетсяПриЗагрузке="false">
				<Текст>
// Параметры:
//  Правило
//  Объект
//  Параметры
//  ИсходящиеДанные
//  Отказ

Если Параметры.УзелВыгрузитьКоличествоСтоимость Или Параметры.УзелВыгрузитьСтоимость Или Параметры.УзелВыгрузитьГруппуБухгалтерскогоУчета Тогда
	
	Попытка
		ТаблицаЦен = ОбменДаннымиБольничнаяАптека.ПолучитьЦеныНоменклатурыДокумента(Объект);
	Исключение
		Отказ = Истина;
		ШаблонОшибки = НСтр("ru = 'Ошибка при получении цен документа. Правило выгрузки: %1
			|%2'");
		ВызватьИсключение СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(ШаблонОшибки, Правило.Имя, КраткоеПредставлениеОшибки(ИнформацияОбОшибке()));
	КонецПопытки;
	
	Если Не Отказ Тогда
		Если ТипЗнч(ИсходящиеДанные) &lt;&gt; Тип("Структура") Тогда
			ИсходящиеДанные = Новый Структура;
		КонецЕсли;
		ИсходящиеДанные.Вставить("ТаблицаЦен", ТаблицаЦен);
	КонецЕсли;
	
КонецЕсли;</Текст>
				<Параметры>Правило, Объект, Параметры, ИсходящиеДанные, Отказ</Параметры>
			</Алгоритм>
		</Группа>
		<Группа Имя="Загрузка">
			<Алгоритм Имя="ЗаполнениеДокументовОтложенное" ИспользуетсяПриЗагрузке="true">
				<Текст>// Параметры:
//  Объект
//  ИмяПКО
//  ПараметрыОбъекта

Попытка
	Если ИмяПКО = "ПТ_ПоступлениеМЗ"
	 Или ИмяПКО = "ПТ_ПоступлениеМЗ_Внутреннее"
	 Или ИмяПКО = "ПСТ_ПоступлениеМЗ"
	 Или ИмяПКО = "ПСТО_ПоступлениеМЗ"
	 Или ИмяПКО = "ВТК_ПоступлениеМЗ" Тогда
		
		Выполнить(Алгоритмы.ОбработатьПоступлениеМЗ);
		
	ИначеЕсли ИмяПКО = "ВПТ_ВедомостьНаВыдачуМЗНаНуждыУчреждения"
		  Или ИмяПКО = "ВПТО_ВедомостьНаВыдачуМЗНаНуждыУчреждения"
		  Или ИмяПКО = "ПТНВ_ВедомостьНаВыдачуМЗНаНуждыУчреждения"
		  Или ИмяПКО = "ОТО_ВедомостьНаВыдачуМЗНаНуждыУчреждения" Тогда
		
		Выполнить(Алгоритмы.ОбработатьВедомостьНаВыдачуМЗНаНуждыУчреждения);
		
	ИначеЕсли ИмяПКО = "ПТ_ТребованиеНакладная0315006"
		  Или ИмяПКО = "ПТО_ТребованиеНакладная0315006"
		  Или ИмяПКО = "ОТО_ТребованиеНакладная0315006"
		  Или ИмяПКО = "ВТО_ТребованиеНакладная0315006" Тогда
		
		Выполнить(Алгоритмы.ОбработатьТребованиеНакладнаяНаПеремещение);
		
	ИначеЕсли ИмяПКО = "ОИТ_ПоступлениеМЗ"
		  Или ИмяПКО = "ОИТО_ПоступлениеМЗ" Тогда
		
		Выполнить(Алгоритмы.ОбработатьПоступлениеМЗ);
		
	ИначеЕсли ИмяПКО = "СНТ_АктСписанияМЗ"
		  Или ИмяПКО = "СНТО_АктСписанияМЗ"
		  Или ИмяПКО = "ПСТ_АктСписанияМЗ"
		  Или ИмяПКО = "ПСТО_АктСписанияМЗ"
		  Или ИмяПКО = "ОТО_АктСписанияМЗ"
		  Или ИмяПКО = "ПТНВ_АктСписанияМЗ"
		  Или ИмяПКО = "ВПТ_АктСписанияМЗ"
		  Или ИмяПКО = "ВПТО_АктСписанияМЗ" Тогда
		
		Выполнить(Алгоритмы.ОбработатьАктСписанияМатериалов);
		
	ИначеЕсли ИмяПКО = "ПОТ_ПоступлениеМЗ" Тогда
		
		Выполнить(Алгоритмы.ОбработатьПоступлениеМЗ);
		
	ИначеЕсли ИмяПКО = "ПТС_НакладнаяНаОтпускМ15"
		  Или ИмяПКО = "ВТП_НакладнаяНаОтпускМ15"
		  Или ИмяПКО = "ПТ_НакладнаяНаОтпускМ15_Внутреннее" Тогда
		
		Выполнить(Алгоритмы.ОбработатьНакладнуюНаОтпускМ15);
		
	ИначеЕсли ИмяПКО = "ИЛП_ВыпускПродукции"
		  Или ИмяПКО = "ФТ_ВыпускПродукции" Тогда
		
		Выполнить(Алгоритмы.ОбработатьВыпускПродукции);
		
	ИначеЕсли ИмяПКО = "ИЛП_ТребованиеНакладная0315006"
		  Или ИмяПКО = "ФТ_ТребованиеНакладная0315006" Тогда
		
		Выполнить(Алгоритмы.ОбработатьТребованиеНакладнаяСписаниеЗатрат);
		
	ИначеЕсли ИмяПКО = "ОтчетОРозничныхПродажах" Тогда
		
		Выполнить(Алгоритмы.ОбработатьОтчетОРозничныхПродажах);
		
	ИначеЕсли ИмяПКО = "ВводНачальныхОстатков" Тогда
		
		Выполнить(Алгоритмы.ОбработатьВводНачальныхОстатков);
		
	КонецЕсли;
Исключение
	ЗарегистрироватьПредупреждение(
		НСтр("ru = 'Ошибка при выполнении отложенного заполнения. Правило конвертации: '")
		+ ИмяПКО
		+ Символы.ПС
		+ ПодробноеПредставлениеОшибки(ИнформацияОбОшибке()));
КонецПопытки</Текст>
				<Параметры>Объект, ИмяПКО, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнениеСправочниковОтложенное" ИспользуетсяПриЗагрузке="true">
				<Текст>// Параметры:
//  Объект
//  ИмяПКО
//  ПараметрыОбъекта

Попытка
	Если ИмяПКО = "ЦМО" Тогда
		
		Выполнить(Алгоритмы.ОбработатьЦМО);
		
	ИначеЕсли ИмяПКО = "Подразделения" Или ИмяПКО = "Отделения" Тогда
		
		Выполнить(Алгоритмы.ОбработатьПодразделениеОрганизации);
		
	ИначеЕсли  ИмяПКО = "Контрагенты" Или ИмяПКО = "Ф_Контрагенты" Или ИмяПКО = "О_Контрагенты" Тогда
		
		Выполнить(Алгоритмы.ОбработатьКонтрагентов);
		
	КонецЕсли;
Исключение
	ЗарегистрироватьПредупреждение(
		НСтр("ru = 'Ошибка при выполнении отложенного заполнения. Правила конвертации: '")
		+ ИмяПКО
		+ Символы.ПС
		+ ПодробноеПредставлениеОшибки(ИнформацияОбОшибке()));
КонецПопытки</Текст>
				<Параметры>Объект, ИмяПКО, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнитьРеквизитыОбъектовПоУмолчанию" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект

СтруктураРеквизитов = ЗаполнениеРеквизитовОбъектов.ПолучитьЗначенияРеквизитовЗаполнения(Объект.Метаданные().ПолноеИмя());
Для Каждого КлючИЗначение Из СтруктураРеквизитов Цикл
	
	Если ОбщегоНазначенияКлиентСервер.ЕстьРеквизитИлиСвойствоОбъекта(Объект, КлючИЗначение.Ключ)
	   И (Не ЗначениеЗаполнено(Объект[КлючИЗначение.Ключ]) Или ТипЗнч(Объект[КлючИЗначение.Ключ]) = Тип("Булево")) Тогда
		
		Объект[КлючИЗначение.Ключ] = КлючИЗначение.Значение;
		
	КонецЕсли;
	
КонецЦикла;

// Опция обработки документов для БГУ КОРП.
Объект.ДополнительныеСвойства.Вставить("ПроцессыОбработкиДокументов_ЗаписатьБезПроверкиОбменДаннымиЗагрузка", Истина);

Объект.Записать(РежимЗаписиДокумента.Запись);</Текст>
				<Параметры>Объект</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнитьТабличнуюЧастьМЗ" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ТабличнаяЧасть
//  ПараметрыЗаполнения - структура со свойствами:
//   * СчетУчета - Структура - (функционально) набор параметров получения и заполнения счета учета в табличной части.
//      ** ИмяРеквизита          - Строка - имя поля счета учета в табличной части.
//      ** Организация           - СправочникСсылка.Организации
//      ** Дата                  - Дата
//      ** ФиксированноеЗначение - Строка - счет учета строкой. Если заполнен, будет использоваться он.
//
//   * КЭК - Структура - (функционально) набор параметров получения и заполнения КЭК в табличной части.
//      ** ИмяРеквизита          - Строка - имя поля счета учета в табличной части.
//      ** ДтКт                  - Строка - "Дт" или "Кт".
//      ** Организация           - СправочникСсылка.Организации
//      ** Дата                  - Дата
//      ** ИФО                   - ПеречислениеСсылка.ИФО
//      ** КФО                   - ПеречислениеСсылка.КВД
//      ** ФиксированноеЗначение - Строка - счет учета строкой. Если заполнен, будет использоваться он.
//
//   * ЕдиницаИзмерения - Структура - (функционально) набор параметров получения и заполнения единицы измерения в табличной части.
//

ОбрабатыватьСчетУчета        = ПараметрыЗаполнения.Свойство("СчетУчета");
ОбрабатыватьКЭК              = ПараметрыЗаполнения.Свойство("КЭК") И ОбрабатыватьСчетУчета;
ОбрабатыватьЕдиницуИзмерения = ПараметрыЗаполнения.Свойство("ЕдиницаИзмерения");

Если ОбрабатыватьСчетУчета Тогда
	
	// Подготовка параметров заполнения Счета учета.
	// Параметры заполняются значениями по умолчанию,
	// переопределение параметров происходит в модуле, где вызывается алгоритм.
	
	ПараметрыЗаполненияСчетаУчета = Новый Структура;
	ПараметрыЗаполненияСчетаУчета.Вставить("ИмяРеквизита"         , "СчетУчета");
	ПараметрыЗаполненияСчетаУчета.Вставить("Организация"          , Объект.Организация);
	ПараметрыЗаполненияСчетаУчета.Вставить("Дата"                 , Объект.Дата);
	ПараметрыЗаполненияСчетаУчета.Вставить("ФиксированноеЗначение", Неопределено);
	
	Если ТипЗнч(ПараметрыЗаполнения.СчетУчета) = Тип("Структура") Тогда
		ЗаполнитьЗначенияСвойств(ПараметрыЗаполненияСчетаУчета, ПараметрыЗаполнения.СчетУчета);
	КонецЕсли;
	
	ВидыСубконтоСчетов = УправлениеМатериальнымиЗапасами.ПолучитьДанныеСчетовУчетаМЗ(ПараметрыЗаполненияСчетаУчета.Организация,,,, ПараметрыЗаполненияСчетаУчета.Дата);
	ДополнительныеСубконтоСчетов = Новый ФиксированноеСоответствие(ВидыСубконтоСчетов);
	
КонецЕсли;

Если ОбрабатыватьКЭК Тогда
	
	// Подготовка параметров заполнения КЭК счета учета
	// Параметры заполняются значениями по умолчанию,
	// переопределение параметров происходит в модуле, где вызывается алгоритм.
	
	КФО = ?(ОбщегоНазначенияКлиентСервер.ЕстьРеквизитИлиСвойствоОбъекта(Объект, "КФО"), Объект.КФО, Неопределено);
	
	ПараметрыЗаполненияКЭК = Новый Структура;
	ПараметрыЗаполненияКЭК.Вставить("ИмяРеквизита"          , "КЭК");
	ПараметрыЗаполненияКЭК.Вставить("ДтКт"                  , "Дт");
	ПараметрыЗаполненияКЭК.Вставить("Организация"           , Объект.Организация);
	ПараметрыЗаполненияКЭК.Вставить("Дата"                  , Объект.Дата);
	ПараметрыЗаполненияКЭК.Вставить("ИФО"                   , Объект.ИФО);
	ПараметрыЗаполненияКЭК.Вставить("КФО"                   , КФО);
	ПараметрыЗаполненияКЭК.Вставить("ФиксированноеЗначение" , Неопределено);
	
	Если ТипЗнч(ПараметрыЗаполнения.КЭК) = Тип("Структура") Тогда
		ЗаполнитьЗначенияСвойств(ПараметрыЗаполненияКЭК, ПараметрыЗаполнения.КЭК);
	КонецЕсли;
	
КонецЕсли;

Для Каждого СтрокаТаблицы Из ТабличнаяЧасть Цикл
	
	СтруктураДанных = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(СтрокаТаблицы.Номенклатура, "СчетУчета, ЕдиницаИзмерения, ТипНоменклатуры");
	
	// Заполнение Счета учета.
	Если ОбрабатыватьСчетУчета И Не ЗначениеЗаполнено(СтрокаТаблицы[ПараметрыЗаполненияСчетаУчета.ИмяРеквизита]) Тогда
		
		Если ПараметрыЗаполненияСчетаУчета.ФиксированноеЗначение &lt;&gt; Неопределено Тогда
			СтрокаТаблицы[ПараметрыЗаполненияСчетаУчета.ИмяРеквизита] = БухгалтерскийУчет.СчетПоКоду(ПараметрыЗаполненияСчетаУчета.ФиксированноеЗначение, ПараметрыЗаполненияСчетаУчета.Дата, ПараметрыЗаполненияСчетаУчета.Организация);
		ИначеЕсли ЗначениеЗаполнено(СтруктураДанных.СчетУчета) Тогда
			СтрокаТаблицы[ПараметрыЗаполненияСчетаУчета.ИмяРеквизита] = БухгалтерскийУчет.СчетПоКоду(СтруктураДанных.СчетУчета, ПараметрыЗаполненияСчетаУчета.Дата, ПараметрыЗаполненияСчетаУчета.Организация);
		КонецЕсли;
		
		Если ПараметрыЗаполненияСчетаУчета.ИмяРеквизита = "СчетУчета" И ЗначениеЗаполнено(СтрокаТаблицы.СчетУчета) Тогда
			ТекущееСубконто = ДополнительныеСубконтоСчетов.Получить(СтрокаТаблицы.СчетУчета);
			СтрокаТаблицы.ДополнительнаяАналитикаСчета = ТекущееСубконто;
		КонецЕсли;
		
	КонецЕсли;
	
	// Заполнение КЭК счета учета.
	Если ОбрабатыватьКЭК И Не ЗначениеЗаполнено(СтрокаТаблицы[ПараметрыЗаполненияКЭК.ИмяРеквизита]) Тогда
		
		Если ПараметрыЗаполненияКЭК.ФиксированноеЗначение &lt;&gt; Неопределено Тогда
			СтрокаТаблицы[ПараметрыЗаполненияКЭК.ИмяРеквизита] = БухгалтерскиеОперации.КЭКПоКоду(ПараметрыЗаполненияКЭК.ФиксированноеЗначение);
		ИначеЕсли ЗначениеЗаполнено(СтруктураДанных.СчетУчета) Тогда
			СтрокаТаблицы[ПараметрыЗаполненияКЭК.ИмяРеквизита] = БухгалтерскийУчет.КЭКНоменклатуры(
				ПараметрыЗаполненияКЭК.Организация,
				ПараметрыЗаполненияКЭК.ИФО,
				ПараметрыЗаполненияКЭК.КФО,
				ПараметрыЗаполненияКЭК.Дата,
				СтрокаТаблицы[ПараметрыЗаполненияСчетаУчета.ИмяРеквизита],
				СтруктураДанных.ТипНоменклатуры,
				ПараметрыЗаполненияКЭК.ДтКт);
		КонецЕсли;
		
	КонецЕсли;
	
	// Заполнение Единицы измерения номенклатуры.
	Если ОбрабатыватьЕдиницуИзмерения Тогда
		СтрокаТаблицы.ЕдиницаИзмерения = СтруктураДанных.ЕдиницаИзмерения;
	КонецЕсли;
	
	// Заполнение реквизита СуммаСписанияНУ для документов списания по значению реквизита СуммаСписания.
	Если ОбщегоНазначенияКлиентСервер.ЕстьРеквизитИлиСвойствоОбъекта(СтрокаТаблицы, "СуммаСписанияНУ") Тогда
		Если ОбщегоНазначенияКлиентСервер.ЕстьРеквизитИлиСвойствоОбъекта(СтрокаТаблицы, "СуммаСписания") Тогда
			СтрокаТаблицы.СуммаСписанияНУ = СтрокаТаблицы.СуммаСписания;
		КонецЕсли;
	КонецЕсли;
	
КонецЦикла;</Текст>
				<Параметры>Объект, ТабличнаяЧасть, ПараметрыЗаполнения</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнитьТиповуюОперацию" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ТиповаяОперация
//  ДополнительныеРеквизиты

Если ЗначениеЗаполнено(ТиповаяОперация) Тогда
	
	// Получение реквизитов по умолчанию типовой операции.
	РеквизитыТиповойОперацииДляЗаписи = БухгалтерскиеОперацииСервер.РеквизитыТиповойОперацииПоУмолчанию(
		ОбщегоНазначения.ИдентификаторОбъектаМетаданных(ТипЗнч(Объект)),
		ТиповаяОперация,
		Объект.Организация);
	
	// Добавление в структуру реквизитов по умолчанию свойств типовой операции, которым не было установлено значение по умолчанию.
	РеквизитыТиповойОперации = Справочники.ТиповыеОперации.ДополнительныеРеквизитыТиповойОперации(ТиповаяОперация);
	Для Каждого РеквизитТиповойОперации Из РеквизитыТиповойОперации Цикл
		Если Не РеквизитыТиповойОперацииДляЗаписи.Свойство(РеквизитТиповойОперации.ИмяДляФормулы) Тогда
			РеквизитыТиповойОперацииДляЗаписи.Вставить(РеквизитТиповойОперации.ИмяДляФормулы);
		КонецЕсли;
	КонецЦикла;
	
	// Замена значений по умолсению значениями свойств документа, если они заполнены.
	Для Каждого КлючИЗначение Из РеквизитыТиповойОперацииДляЗаписи Цикл
		Если ОбщегоНазначенияКлиентСервер.ЕстьРеквизитИлиСвойствоОбъекта(Объект, КлючИЗначение.Ключ)
		   И ЗначениеЗаполнено(Объект[КлючИЗначение.Ключ]) Тогда
			РеквизитыТиповойОперацииДляЗаписи[КлючИЗначение.Ключ] = Объект[КлючИЗначение.Ключ];
		КонецЕсли;
	КонецЦикла;
	
	// Замена значений по умолчанию значениями свойств типовой операции из существующего документа.
	ТекущаяОперация = БухгалтерскиеОперацииСервер.БухгалтерскаяОперацияДокумента(Объект.Ссылка);
	Если ТекущаяОперация = ТиповаяОперация Тогда
		ТекущиеЗначения = БухгалтерскиеОперацииСервер.ЗаполнитьДополнительныеРеквизиты(Объект.Ссылка, ТекущаяОперация);
		ЗаполнитьЗначенияСвойств(РеквизитыТиповойОперацииДляЗаписи, ТекущиеЗначения);
	КонецЕсли;
	
	// Замена значений по умолчанию значениями свойств структуры дополнительных реквизитов.
	Если ЗначениеЗаполнено(ДополнительныеРеквизиты) Тогда
		ЗаполнитьЗначенияСвойств(РеквизитыТиповойОперацииДляЗаписи, ДополнительныеРеквизиты);
	КонецЕсли;
	
	// Запись документа.
	БухгалтерскиеОперацииСервер.ДобавитьДанныеДляПроведения(Объект, ТиповаяОперация, РеквизитыТиповойОперацииДляЗаписи);
	
КонецЕсли;</Текст>
				<Параметры>Объект, ТиповаяОперация, ДополнительныеРеквизиты</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьАктСписанияМатериалов" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ПараметрыОбъекта

ТабличнаяЧасть = Объект.Материалы;
ПараметрыЗаполнения = Новый Структура("СчетУчета"); // Единицу измерения не нужно заполнять.
Выполнить(Алгоритмы.ЗаполнитьТабличнуюЧастьМЗ);

Если ПараметрыОбъекта = Неопределено Тогда
	ДополнительныеРеквизиты = Новый Структура;
Иначе
	ДополнительныеРеквизиты = ОбщегоНазначенияКлиентСервер.СкопироватьСтруктуру(ПараметрыОбъекта);
КонецЕсли;

ТиповаяОперация = Неопределено;
ХозяйственнаяОперация = Неопределено;
ДополнительныеРеквизиты.Свойство("ХозяйственнаяОперация", ХозяйственнаяОперация);
Если ХозяйственнаяОперация = "СписаниеТоваров" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.АктСписанияМЗ_СписаниеНедостачХищений;
ИначеЕсли ХозяйственнаяОперация = "СписаниеТоваровПоТребованию" Тогда
	
	СчетДт = Неопределено;
	Если ДополнительныеРеквизиты.Свойство("СчетДт", СчетДт) И ЗначениеЗаполнено(СчетДт) Тогда
		
		Счет109 = БухгалтерскийУчет.СчетПоКоду("109.00", Объект.Дата, Объект.Организация);
		Если СчетДт.ПринадлежитЭлементу(Счет109) Тогда
			ТиповаяОперация = Справочники.ТиповыеОперации.АктСписанияМЗ_СписаниеНаЗатратыНаПроизводство;
		Иначе // (401.2Х)
			ТиповаяОперация = Справочники.ТиповыеОперации.АктСписанияМЗ_СписаниеНаФинансовыйРезультат;
		КонецЕсли;
		
		НоменклатурнаяГруппа = Неопределено;
		Для Индекс = 1 По СчетДт.ВидыСубконто.Количество() Цикл
			ТипЗначения = СчетДт.ВидыСубконто[Индекс - 1].ВидСубконто.ТипЗначения;
			Если ТипЗначения.СодержитТип(Тип("СправочникСсылка.Номенклатура")) Тогда
				ДополнительныеРеквизиты.Вставить("СубконтоДт" + Индекс, Параметры.НоменклатурнаяГруппа);
			ИначеЕсли ТипЗначения.СодержитТип(Тип("СправочникСсылка.ВидыЗатрат")) Тогда
				ДополнительныеРеквизиты.Вставить("СубконтоДт" + Индекс, Параметры.ВидЗатратПроизводства);
			КонецЕсли;
		КонецЦикла;
		
	КонецЕсли;
	
КонецЕсли;

Выполнить(Алгоритмы.ЗаполнитьТиповуюОперацию);
Выполнить(Алгоритмы.ЗаполнитьРеквизитыОбъектовПоУмолчанию);</Текст>
				<Параметры>Объект, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьВводНачальныхОстатков" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ПараметрыОбъекта

ТабличнаяЧасть = Объект.Материалы;
ПараметрыЗаполнения = Новый Структура("СчетУчета, КЭК", Новый Структура("ИмяРеквизита", "Счет"));
Выполнить(Алгоритмы.ЗаполнитьТабличнуюЧастьМЗ);

Для Каждого СтрокаТаблицы Из Объект.Материалы Цикл
	СтрокаТаблицы.Коэффициент    = 1;
	СтрокаТаблицы.КоличествоМест = СтрокаТаблицы.Количество;
КонецЦикла;

Если ПараметрыОбъекта = Неопределено Тогда
	ДополнительныеРеквизиты = Новый Структура;
Иначе
	ДополнительныеРеквизиты = ОбщегоНазначенияКлиентСервер.СкопироватьСтруктуру(ПараметрыОбъекта);
КонецЕсли;

ТиповаяОперация = Справочники.ТиповыеОперации.ВводНачальныхОстатков_Материалы;

Выполнить(Алгоритмы.ЗаполнитьТиповуюОперацию);
Выполнить(Алгоритмы.ЗаполнитьРеквизитыОбъектовПоУмолчанию);</Текст>
				<Параметры>Объект, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьВедомостьНаВыдачуМЗНаНуждыУчреждения" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ПараметрыОбъекта

ТабличнаяЧасть = Объект.МатериальныеЗапасы;
ПараметрыЗаполнения = Новый Структура("СчетУчета, ЕдиницаИзмерения");
Выполнить(Алгоритмы.ЗаполнитьТабличнуюЧастьМЗ);

ТиповаяОперация = Справочники.ТиповыеОперации.ВедомостьНаВыдачуМЗНаНуждыУчреждения_Списание;
Если ПараметрыОбъекта = Неопределено Тогда
	ДополнительныеРеквизиты = Новый Структура;
Иначе
	ДополнительныеРеквизиты = ОбщегоНазначенияКлиентСервер.СкопироватьСтруктуру(ПараметрыОбъекта);
КонецЕсли;

СчетДт = Неопределено;
Если ДополнительныеРеквизиты.Свойство("СчетДт", СчетДт) И ЗначениеЗаполнено(СчетДт) Тогда
	НоменклатурнаяГруппа = Неопределено;
	Для Индекс = 1 По СчетДт.ВидыСубконто.Количество() Цикл
		ТипЗначения = СчетДт.ВидыСубконто[Индекс - 1].ВидСубконто.ТипЗначения;
		Если ТипЗначения.СодержитТип(Тип("СправочникСсылка.Номенклатура")) Тогда
			ДополнительныеРеквизиты.Вставить("СубконтоДт" + Индекс, Параметры.НоменклатурнаяГруппа);
		ИначеЕсли ТипЗначения.СодержитТип(Тип("СправочникСсылка.ВидыЗатрат")) Тогда
			ДополнительныеРеквизиты.Вставить("СубконтоДт" + Индекс, Параметры.ВидЗатратПроизводства);
		КонецЕсли;
	КонецЦикла;
КонецЕсли;

Выполнить(Алгоритмы.ЗаполнитьТиповуюОперацию);
Выполнить(Алгоритмы.ЗаполнитьРеквизитыОбъектовПоУмолчанию);</Текст>
				<Параметры>Объект, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьВыпускПродукции" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ПараметрыОбъекта

Если Не ЗначениеЗаполнено(Объект.СчетПроизводства) Тогда
	Счет10961 = БухгалтерскийУчет.СчетПоКоду("109.60", Объект.Дата, Объект.Организация);
	Если БухгалтерскийУчетПовтИсп.ПолучитьСвойстваСчета(Счет10961).ЭлементГруппа Тогда
		Счет10961 = БухгалтерскийУчет.СчетПоКоду("109.61", Объект.Дата, Объект.Организация);
	КонецЕсли;
	Объект.СчетПроизводства = Счет10961;
КонецЕсли;

ТабличнаяЧасть = Объект.ГотоваяПродукция;
ПараметрыЗаполнения = Новый Структура;
ПараметрыЗаполнения.Вставить("СчетУчета", Новый Структура("ИмяРеквизита", "СчетДт"));
ПараметрыЗаполнения.Вставить("ЕдиницаИзмерения");
Выполнить(Алгоритмы.ЗаполнитьТабличнуюЧастьМЗ);

ЗапросЦены = Новый Запрос("
|ВЫБРАТЬ
|	Номенклатура КАК Номенклатура,
|	Цена КАК Цена
|ИЗ
|	РегистрСведений.ЦеныНоменклатуры.СрезПоследних(&amp;ДатаДокумента, Организация = &amp;Организация И ТипЦен = &amp;ВидЦены И Номенклатура В (&amp;Номенклатура))
|");
ЗапросЦены.УстановитьПараметр("ДатаДокумента", Объект.Дата);
ЗапросЦены.УстановитьПараметр("Организация", Объект.Организация);
ЗапросЦены.УстановитьПараметр("Номенклатура", Объект.ГотоваяПродукция.Выгрузить(, "Номенклатура").ВыгрузитьКолонку("Номенклатура"));
ЗапросЦены.УстановитьПараметр("ВидЦены", Константы.ТипЦеныПлановойСебестоимостиПродукции.Получить());
ТаблицаЦен = ЗапросЦены.Выполнить().Выгрузить();

Для Каждого СтрокаТаблицы Из Объект.ГотоваяПродукция Цикл
	
	Если ЗначениеЗаполнено(СтрокаТаблицы.СчетДт) Тогда
		Если Не ЗначениеЗаполнено(СтрокаТаблицы.КЭК) И ЗначениеЗаполнено(СтрокаТаблицы.СчетДт.КОСГУДт) Тогда
			СтрокаТаблицы.КЭК = СтрокаТаблицы.СчетДт.КОСГУДт;
		КонецЕсли;
	КонецЕсли;
	
	Если СтрокаТаблицы.ПлановаяЦена = 0 Тогда
		СтрокаЦены = ТаблицаЦен.Найти(СтрокаТаблицы.Номенклатура, "Номенклатура");
		Если СтрокаЦены &lt;&gt; Неопределено Тогда
			СтрокаТаблицы.ПлановаяЦена = СтрокаЦены.Цена;
			СтрокаТаблицы.Сумма = СтрокаТаблицы.ПлановаяЦена * СтрокаТаблицы.Количество;
		КонецЕсли;
	КонецЕсли;
	
КонецЦикла;

ТиповаяОперация = Справочники.ТиповыеОперации.ВыпускПродукции_ВыпускПродукции;
Если ПараметрыОбъекта = Неопределено Тогда
	ДополнительныеРеквизиты = Новый Структура;
Иначе
	ДополнительныеРеквизиты = ОбщегоНазначенияКлиентСервер.СкопироватьСтруктуру(ПараметрыОбъекта);
КонецЕсли;

Выполнить(Алгоритмы.ЗаполнитьТиповуюОперацию);
Выполнить(Алгоритмы.ЗаполнитьРеквизитыОбъектовПоУмолчанию);</Текст>
				<Параметры>Объект, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьЗаписьДокументаПослеЗагрузки" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект

ПроведенОбъект = Объект.Проведен;

// Опция обработки документов для БГУ КОРП.
Объект.ДополнительныеСвойства.Вставить("ПроцессыОбработкиДокументов_ЗаписатьБезПроверкиОбменДаннымиЗагрузка", Истина);

// Если установлена опция не проводить документы загружаем все документы как непроведенные
Если Объект.ЭтоНовый() Тогда
	Объект.Проведен = Объект.Проведен И Параметры.РазрешитьПроведениеДокументовПриЗагрузке;
Иначе
	ПроведенСсылка = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Объект.Ссылка, "Проведен");
	Объект.Проведен = ПроведенОбъект И (Параметры.РазрешитьПроведениеДокументовПриЗагрузке ИЛИ ПроведенСсылка);
КонецЕсли;

//Найдем наш старый комментарий, и вырежем его.
КомментарийОбъекта = Объект.Комментарий;
Если Найти(Объект.Комментарий,"#Загружен новый") &gt; 0 Тогда
	Объект.Комментарий = СокрЛП(СтрЗаменить(КомментарийОбъекта,"#Загружен новый",""));
ИначеЕсли Найти(Объект.Комментарий,"#Изменен") &gt; 0 Тогда
	Объект.Комментарий = СокрЛП(СтрЗаменить(КомментарийОбъекта, "#Изменен",""));
ИначеЕсли Найти(Объект.Комментарий,"#Отменено проведение") &gt; 0 Тогда
	Объект.Комментарий = СокрЛП(СтрЗаменить(КомментарийОбъекта, "#Отменено проведение",""));
ИначеЕсли Найти(Объект.Комментарий,"#Проведен") &gt; 0 Тогда
	Объект.Комментарий = СокрЛП(СтрЗаменить(КомментарийОбъекта, "#Проведен",""));
КонецЕсли;

//Сформируем новый комментарий объекта.
Если Объект.ЭтоНовый() Тогда
	Объект.Комментарий = НСтр("ru = '#Загружен новый '") + Объект.Комментарий;
Иначе
	Если ПроведенОбъект = ПроведенСсылка Тогда
		Объект.Комментарий = НСтр("ru = '#Изменен '") + Объект.Комментарий;
	ИначеЕсли ПроведенСсылка Тогда
		Объект.Комментарий = НСтр("ru = '#Отменено проведение '") + Объект.Комментарий;
	Иначе
		Объект.Комментарий = НСтр("ru = '#Проведен '") + Объект.Комментарий;
	КонецЕсли;
КонецЕсли;</Текст>
				<Параметры>Объект</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьКонтрагентов" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ПараметрыОбъекта

Если Не Объект.ЭтоГруппа И Не ЗначениеЗаполнено(Объект.ТипКонтрагента) Тогда
	
	Запрос = Новый Запрос("
	|ВЫБРАТЬ
	|	БанковскиеИКазначейскиеСчета.Владелец КАК Владелец,
	|	МИНИМУМ(ВЫБОР
	|			КОГДА БанковскиеИКазначейскиеСчета.ТипЛицевогоСчета = ЗНАЧЕНИЕ(Перечисление.ТипыЛицевыхСчетов.Банковский)
	|				ТОГДА ВЫБОР
	|						КОГДА ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 5) = ""40501""
	|								ИЛИ ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 5) = ""40502""
	|								ИЛИ ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 5) = ""40601""
	|								ИЛИ ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 5) = ""40602""
	|							ТОГДА ""3""
	|						КОГДА ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 5) = ""40503""
	|								ИЛИ ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 5) = ""40603""
	|								ИЛИ ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 5) = ""40703""
	|								ИЛИ ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 5) = ""40802""
	|							ТОГДА ""6""
	|						КОГДА ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 3) = ""401""
	|								ИЛИ ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 3) = ""402""
	|								ИЛИ ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 3) = ""404""
	|							ТОГДА ""1""
	|						КОГДА ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 5) = ""40701""
	|							ТОГДА ""5""
	|						КОГДА ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 5) = ""40702""
	|							ТОГДА ""4""
	|						ИНАЧЕ ""9""
	|					КОНЕЦ
	|			ИНАЧЕ ВЫБОР
	|					КОГДА ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 2) = ""03""
	|							ИЛИ ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 2) = ""04""
	|							ИЛИ ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 2) = ""12""
	|						ТОГДА ""1""
	|					КОГДА ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 2) = ""20""
	|							ИЛИ ПОДСТРОКА(БанковскиеИКазначейскиеСчета.Код, 1, 2) = ""30""
	|						ТОГДА ""2""
	|					ИНАЧЕ ""9""
	|				КОНЕЦ
	|		КОНЕЦ) КАК КодТипа
	|ПОМЕСТИТЬ КодыПоСчетам
	|ИЗ
	|	Справочник.БанковскиеИКазначейскиеСчета КАК БанковскиеИКазначейскиеСчета
	|ГДЕ
	|	БанковскиеИКазначейскиеСчета.Владелец = &amp;Владелец
	|
	|СГРУППИРОВАТЬ ПО
	|	БанковскиеИКазначейскиеСчета.Владелец
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	Контрагенты.Ссылка КАК Ссылка,
	|	ВЫБОР
	|		КОГДА КодыПоСчетам.КодТипа ЕСТЬ NULL
	|			ТОГДА ВЫБОР
	|					КОГДА Контрагенты.ВидКонтрагента = ЗНАЧЕНИЕ(Перечисление.ЮрФизЛицо.ЮрЛицо)
	|						ТОГДА ВЫБОР
	|								КОГДА Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%казенное%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%КАЗЕННОЕ%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%администрация%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%АДМИНИСТРАЦИЯ%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%ПЕНСИОННОГО ФОНДА%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%пенсионного фонда%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%ФОНДА СОЦИАЛЬНОГО%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%фонда социального%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%ФЕДЕРАЛЬНОЙ СЛУЖБЫ%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%федеральной службы%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%УПРАВЛЕНИЕ МИНИСТЕРСТВА%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%управление министерства%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%ИНСПЕКЦИЯ ФЕДЕРАЛЬНОЙ%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%инспекция федеральной%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%ФОНД ОБЯЗАТЕЛЬНОГО МЕДИЦИНСКОГО%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%фонд обязательного медицинского%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%УПРАВЛЕНИЕ ФЕДЕРАЛЬН%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%управление федеральн%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%ГОСУДАРСТВЕННОЙ ИНСПЕКЦИИ%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%государственной инспекции%""
	|									ТОГДА ""1""
	|								КОГДА Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%автономное%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%АВТОНОМНОЕ%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%бюджетное%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%БЮДЖЕТНОЕ%""
	|									ТОГДА ""2""
	|								КОГДА Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%банк%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%БАНК%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%страховая компания%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%СТРАХОВАЯ КОМПАНИЯ%""
	|									ТОГДА ""5""
	|								КОГДА Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%унитарное%""
	|										ИЛИ Контрагенты.ЮридическоеФизическоеЛицо.НаименованиеПолное ПОДОБНО ""%УНИТАРНОЕ%""
	|									ТОГДА ""3""
	|								ИНАЧЕ ""4""
	|							КОНЕЦ
	|					КОГДА Контрагенты.ВидКонтрагента = ЗНАЧЕНИЕ(Перечисление.ЮрФизЛицо.ФизЛицо)
	|						ТОГДА ВЫБОР
	|								КОГДА НЕ Контрагенты.ЮридическоеФизическоеЛицо.ОГРНИП = """"
	|									ТОГДА ""6""
	|								КОГДА Контрагенты.НаименованиеСокращенное ПОДОБНО ""ИП %""
	|										ИЛИ Контрагенты.НаименованиеСокращенное ПОДОБНО ""ПБЮЛ %""
	|										ИЛИ Контрагенты.НаименованиеСокращенное ПОДОБНО ""Индивидуальный %""
	|									ТОГДА ""6""
	|								ИНАЧЕ ""7""
	|							КОНЕЦ
	|				КОНЕЦ
	|		ИНАЧЕ КодыПоСчетам.КодТипа
	|	КОНЕЦ КАК КодПодстатьи
	|ИЗ
	|	Справочник.Контрагенты КАК Контрагенты
	|		ЛЕВОЕ СОЕДИНЕНИЕ
	|			КодыПоСчетам КАК КодыПоСчетам
	|		ПО
	|			КодыПоСчетам.Владелец = Контрагенты.Ссылка
	|			И КодыПоСчетам.КодТипа &lt;&gt; ""9""
	|ГДЕ
	|	Контрагенты.Ссылка = &amp;Владелец
	|");
	
	Попытка
		Запрос.УстановитьПараметр("Владелец", Объект.Ссылка);
		Выборка = Запрос.Выполнить().Выбрать();
		Выборка.Следующий();
		Объект.ТипКонтрагента = Справочники.ТипыКонтрагентов.НайтиПоКоду(Выборка.КодПодстатьи);
	Исключение
		// В случае изменения структуры метаданных.
	КонецПопытки;
	
	Если Не ЗначениеЗаполнено(Объект.ТипКонтрагента) Тогда
		Объект.ТипКонтрагента = Справочники.ТипыКонтрагентов.НайтиПоКоду("0");
	КонецЕсли;
	
КонецЕсли;</Текст>
				<Параметры>Объект, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьНакладнуюНаОтпускМ15" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ПараметрыОбъекта

ТабличнаяЧасть = Объект.Материалы;
ПараметрыЗаполнения = Новый Структура("СчетУчета"); // Единицу измерения не нужно заполнять.
Выполнить(Алгоритмы.ЗаполнитьТабличнуюЧастьМЗ);

Если ПараметрыОбъекта = Неопределено Тогда
	ДополнительныеРеквизиты = Новый Структура;
Иначе
	ДополнительныеРеквизиты = ОбщегоНазначенияКлиентСервер.СкопироватьСтруктуру(ПараметрыОбъекта);
КонецЕсли;

ТиповаяОперация = Неопределено;
ХозяйственнаяОперация = Неопределено;
ДополнительныеРеквизиты.Свойство("ХозяйственнаяОперация", ХозяйственнаяОперация);
Если ХозяйственнаяОперация = "ВнутриведомственноеПеремещение" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.НакладнаяНаОтпускМ15_ВнутриведомственноеПеремещение;
ИначеЕсли ХозяйственнаяОперация = "БезвозмезднаяПередачаПрочее" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.НакладнаяНаОтпускМ15_БезвозмезднаяПередача;
ИначеЕсли ХозяйственнаяОперация = "БезвозмезднаяПередачаМежбюджетная" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.НакладнаяНаОтпускМ15_БезвозмезднаяПередача;
ИначеЕсли ХозяйственнаяОперация = "ВозвратТоваровПоставщику" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.НакладнаяНаОтпускМ15_ВозвратПоставщику1;
ИначеЕсли ХозяйственнаяОперация = "РеализацияМатериальныхЗапасов" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.НакладнаяНаОтпускМ15_РеализацияМатериальныхЗапасов;
КонецЕсли;

Выполнить(Алгоритмы.ЗаполнитьТиповуюОперацию);
Выполнить(Алгоритмы.ЗаполнитьРеквизитыОбъектовПоУмолчанию);</Текст>
				<Параметры>Объект, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьОтчетОРозничныхПродажах" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ПараметрыОбъекта

ТиповаяОперация = Справочники.ТиповыеОперации.ОтчетОРозничныхПродажах_ОтчетОРозничныхПродажах;
Если ПараметрыОбъекта = Неопределено Тогда
	ДополнительныеРеквизиты = Новый Структура;
Иначе
	ДополнительныеРеквизиты = ОбщегоНазначенияКлиентСервер.СкопироватьСтруктуру(ПараметрыОбъекта);
КонецЕсли;

Выполнить(Алгоритмы.ЗаполнитьТиповуюОперацию);
Выполнить(Алгоритмы.ЗаполнитьРеквизитыОбъектовПоУмолчанию);</Текст>
				<Параметры>Объект, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьПодразделениеОрганизации" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Установка дополнительных сведений элементу справочника Подразделения,
// для идентификации вида (Отделение или Подразделение организации) при обратной отправке изменений в конфигурацию БА.
//
// Параметры:
//  Объект
//  ПараметрыОбъекта

Если ПолучитьФункциональнуюОпцию("ИспользоватьДополнительныеРеквизитыИСведения")
   И УправлениеСвойствами.ИспользоватьДопСведения(Объект.Ссылка) Тогда
	
	Запрос = Новый Запрос("
	|ВЫБРАТЬ ПЕРВЫЕ 1
	|	ДополнительныеСведения.Свойство КАК СвойствоСсылка,
	|	ДополнительныеСведения.Значение КАК ЗначениеСвойства
	|ИЗ
	|	РегистрСведений.ДополнительныеСведения КАК ДополнительныеСведения
	|ГДЕ
	|	ДополнительныеСведения.Объект = &amp;Объект
	|	И ДополнительныеСведения.Свойство.Наименование ПОДОБНО ""%Вид подразделения%""
	|");
	
	Запрос.УстановитьПараметр("Объект", Объект.Ссылка);
	РезультатЗапроса = Запрос.Выполнить();
	
	Если РезультатЗапроса.Пустой() Тогда
		
		Подразделение    = Объект.Ссылка;
		ВидПодразделения = ПараметрыОбъекта.Получить("Вид");
		Выполнить(Алгоритмы.УстановитьВидПодразделения);
		
	КонецЕсли;
	
КонецЕсли;</Текст>
				<Параметры>Объект, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьПоступлениеМЗ" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ПараметрыОбъекта

ТабличнаяЧасть = Объект.Материалы;
ПараметрыЗаполнения = Новый Структура("СчетУчета, ЕдиницаИзмерения, КЭК");
Выполнить(Алгоритмы.ЗаполнитьТабличнуюЧастьМЗ);

Для Каждого СтрокаТаблицы Из Объект.Материалы Цикл
	СтрокаТаблицы.Коэффициент    = 1;
	СтрокаТаблицы.КоличествоМест = СтрокаТаблицы.Количество;
КонецЦикла;

Если ПараметрыОбъекта = Неопределено Тогда
	ДополнительныеРеквизиты = Новый Структура;
Иначе
	ДополнительныеРеквизиты = ОбщегоНазначенияКлиентСервер.СкопироватьСтруктуру(ПараметрыОбъекта);
КонецЕсли;

Выполнить(Алгоритмы.ОтразитьДенежныеОбязательства);

ТиповаяОперация = Неопределено;
ХозяйственнаяОперация = Неопределено;
ДополнительныеРеквизиты.Свойство("ХозяйственнаяОперация", ХозяйственнаяОперация);
Если ХозяйственнаяОперация = "ЗакупкаУПоставщика" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.ПоступлениеМЗ_Покупка1;
ИначеЕсли ХозяйственнаяОперация = "БезвозмездноеПоступлениеВнутриведомственное" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.ПоступлениеМЗ_БезвозмездноеВнутриведомственное;
ИначеЕсли ХозяйственнаяОперация = "БезвозмездноеПоступлениеМежбюджетное" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.ПоступлениеМЗ_БезвозмездноеПрочее;
ИначеЕсли ХозяйственнаяОперация = "БезвозмездноеПоступлениеПрочее" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.ПоступлениеМЗ_БезвозмездноеПрочее;
ИначеЕсли ХозяйственнаяОперация = "ОприходованиеТоваров" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.ПоступлениеМЗ_ОприходованиеИзлишковБаланс;
ИначеЕсли ХозяйственнаяОперация = "ЗакупкаЧерезПодотчетноеЛицо" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.ПоступлениеМЗ_ОтПодотчетника1;
ИначеЕсли ХозяйственнаяОперация = "ОприходованиеПоВозврату" Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.ПоступлениеМЗ_ВозвратОтПокупателя;
КонецЕсли;

Выполнить(Алгоритмы.ЗаполнитьТиповуюОперацию);
Выполнить(Алгоритмы.ЗаполнитьРеквизитыОбъектовПоУмолчанию);</Текст>
				<Параметры>Объект, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьТребованиеНакладнаяНаПеремещение" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ПараметрыОбъекта

СчетУчета = Неопределено;
Если Объект.ВидПеремещения = Перечисления.ВидыПеремещенияМЗ.ПеремещениеВНТТ Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.ТребованиеНакладная0315006_ПеремещениеВНТТ340;
ИначеЕсли Объект.ВидПеремещения = Перечисления.ВидыПеремещенияМЗ.ПеремещениеМеждуНТТ Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.ТребованиеНакладная0315006_ПеремещениеМеждуНТТ340;
	СчетУчета = "105.38";
ИначеЕсли Объект.ВидПеремещения = Перечисления.ВидыПеремещенияМЗ.ВозвратИзНТТ Тогда
	ТиповаяОперация = Справочники.ТиповыеОперации.ТребованиеНакладная0315006_ВозвратИзНТТ340;
	СчетУчета = "105.38";
Иначе
	ТиповаяОперация = Справочники.ТиповыеОперации.ТребованиеНакладная0315006_ПеремещениеМЗМеждуМОЛ;
КонецЕсли;

ТабличнаяЧасть = Объект.Материалы;
ПараметрыЗаполнения = Новый Структура("СчетУчета", Новый Структура("ФиксированноеЗначение", СчетУчета)); // Единицу измерения не нужно заполнять.
Выполнить(Алгоритмы.ЗаполнитьТабличнуюЧастьМЗ);

Если ПараметрыОбъекта = Неопределено Тогда
	ДополнительныеРеквизиты = Новый Структура;
Иначе
	ДополнительныеРеквизиты = ОбщегоНазначенияКлиентСервер.СкопироватьСтруктуру(ПараметрыОбъекта);
КонецЕсли;

Выполнить(Алгоритмы.ЗаполнитьТиповуюОперацию);
Выполнить(Алгоритмы.ЗаполнитьРеквизитыОбъектовПоУмолчанию);</Текст>
				<Параметры>Объект, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьТребованиеНакладнаяСписаниеЗатрат" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ПараметрыОбъекта

ТабличнаяЧасть = Объект.Материалы;
ПараметрыЗаполнения = Новый Структура("СчетУчета"); // Единицу измерения не нужно заполнять.
Выполнить(Алгоритмы.ЗаполнитьТабличнуюЧастьМЗ);

ТиповаяОперация = Справочники.ТиповыеОперации.ТребованиеНакладная0315006_ПередачаМЗДляИзготовленияНФА;
Если ПараметрыОбъекта = Неопределено Тогда
	ДополнительныеРеквизиты = Новый Структура;
Иначе
	ДополнительныеРеквизиты = ОбщегоНазначенияКлиентСервер.СкопироватьСтруктуру(ПараметрыОбъекта);
КонецЕсли;

Продукция = Неопределено;
ДополнительныеРеквизиты.Свойство("Продукция", Продукция);

СчетДт = Объект.КорСчет;
Если ЗначениеЗаполнено(СчетДт) Тогда
	Для Индекс = 1 По СчетДт.ВидыСубконто.Количество() Цикл
		ТипЗначения = СчетДт.ВидыСубконто[Индекс - 1].ВидСубконто.ТипЗначения;
		Если ТипЗначения.СодержитТип(Тип("СправочникСсылка.Номенклатура")) Тогда
			Объект["КорСубконто" + Индекс] = Продукция;
		ИначеЕсли ТипЗначения.СодержитТип(Тип("СправочникСсылка.ВидыЗатрат")) Тогда
			Объект["КорСубконто" + Индекс] = Параметры.ВидЗатратПроизводства;
		КонецЕсли;
	КонецЦикла;
КонецЕсли;

Выполнить(Алгоритмы.ЗаполнитьТиповуюОперацию);
Выполнить(Алгоритмы.ЗаполнитьРеквизитыОбъектовПоУмолчанию);</Текст>
				<Параметры>Объект, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОбработатьЦМО" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ПараметрыОбъекта

Если ПустаяСтрока(Объект.Наименование) Тогда
	Объект.Наименование = КорреспондентыКлиентСервер.ФИО(Строка(Объект.Сотрудник)) + " - " + СокрЛП(Объект.МестоХранения);
КонецЕсли;</Текст>
				<Параметры>Объект, ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ОтразитьДенежныеОбязательства" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Объект
//  ДополнительныеРеквизиты

ХозяйственнаяОперация = Неопределено;
ДополнительныеРеквизиты.Свойство("ХозяйственнаяОперация", ХозяйственнаяОперация);
Если ХозяйственнаяОперация = "ЗакупкаУПоставщика" Тогда
	
	Если Параметры.ПриниматьДенежныеОбязательства = Истина Тогда
		
		ДополнительныеРеквизиты.Вставить("ПринятьДенежноеОбязательство", Истина);
		
		КФО = Неопределено;
		Если ДополнительныеРеквизиты.Свойство("КФО", КФО) И ЗначениеЗаполнено(КФО) Тогда
			
			Запрос = Новый Запрос("
			|ВЫБРАТЬ ПЕРВЫЕ 2
			|	РазделыЛицевыхСчетовДопустимыеКФО.Ссылка КАК РазделЛицевогоСчета
			|ИЗ
			|	Справочник.РазделыЛицевыхСчетов.ДопустимыеКФО КАК РазделыЛицевыхСчетовДопустимыеКФО
			|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ
			|			Справочник.ЛицевыеСчета КАК ДанныеЛицевыхСчетов
			|		ПО
			|			РазделыЛицевыхСчетовДопустимыеКФО.Ссылка.Владелец = ДанныеЛицевыхСчетов.Ссылка
			|			И РазделыЛицевыхСчетовДопустимыеКФО.КФО = &amp;КФО
			|ГДЕ
			|	НЕ ДанныеЛицевыхСчетов.ПометкаУдаления
			|	И НЕ РазделыЛицевыхСчетовДопустимыеКФО.Ссылка.ПометкаУдаления
			|	И ДанныеЛицевыхСчетов.Владелец = &amp;Организация
			|	И ДанныеЛицевыхСчетов.ДатаОткрытия &lt;= &amp;Дата
			|	И (ДанныеЛицевыхСчетов.ДатаЗакрытия &gt;= &amp;Дата
			|		ИЛИ ДанныеЛицевыхСчетов.ДатаЗакрытия = ДАТАВРЕМЯ(1,1,1))
			|");
			
			Запрос.УстановитьПараметр("Организация", Объект.Организация);
			Запрос.УстановитьПараметр("Дата"       , Объект.Дата);
			Запрос.УстановитьПараметр("КФО"        , КФО);
			
			Выборка = Запрос.Выполнить().Выбрать();
			Если Выборка.Количество() = 1 Тогда
				Выборка.Следующий();
				ДополнительныеРеквизиты.Вставить("РазделыЛицевыхСчетов", Выборка.РазделЛицевогоСчета);
			КонецЕсли;
			
		КонецЕсли;
		
	КонецЕсли;
	
КонецЕсли;

Если Параметры.ПриниматьДенежныеОбязательства = Истина
   И Не ЗначениеЗаполнено(Объект.ДенежныеОбязательства) Тогда
	
	// Заполнение реквизитов значения по умолчанию нужно для того, чтобы расчитать Таблицу обязательств.
	Ключ = "СчетРасчетов";
	СтруктураРеквизитов = ЗаполнениеРеквизитовОбъектов.ПолучитьЗначенияРеквизитовЗаполнения(Объект.Метаданные().ПолноеИмя());
	Если ОбщегоНазначенияКлиентСервер.ЕстьРеквизитИлиСвойствоОбъекта(Объект, Ключ) И ТипЗнч(СтруктураРеквизитов) = Тип("Структура") И СтруктураРеквизитов.Свойство(Ключ) Тогда
		Объект[Ключ] = СтруктураРеквизитов[Ключ];
	КонецЕсли;

	// Расчет таблицы обязательств.
	ПериодОстатков = Новый Граница(Объект.Ссылка.МоментВремени(), ВидГраницы.Исключая);
	
	ТаблицаОбязательств = УчетРасчетов.ДенежныеОбязательстваПоПоступлениюТРУ(Объект, ПериодОстатков);
	Объект.ДенежныеОбязательства.Загрузить(ТаблицаОбязательств);
	
КонецЕсли;</Текст>
				<Параметры>Объект, ДополнительныеРеквизиты</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ПолучитьОбъектПоСсылке" ИспользуетсяПриЗагрузке="true">
				<Текст>// Параметры:
//  СсылкаНаОбъект
//  ИмяТаблицы
//  СвойстваПоиска
//  ПараметрыОбъекта

Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	УникальныйИдентификатор = ПараметрыОбъекта.Получить("УникальныйИдентификаторПриемника");
	Если УникальныйИдентификатор &lt;&gt; Неопределено Тогда
		Менеджер = ОбщегоНазначения.МенеджерОбъектаПоПолномуИмени(ИмяТаблицы);
		ИскомаяСсылка = Менеджер.ПолучитьСсылку(Новый УникальныйИдентификатор(УникальныйИдентификатор));
		Если Не ОбщегоНазначения.СсылкаСуществует(ИскомаяСсылка) Тогда
			Если РежимЗагрузкиДанныхВИнформационнуюБазу() Тогда
				Объект = Менеджер.СоздатьДокумент();
				Объект.УстановитьСсылкуНового(ИскомаяСсылка);
				Объект.Дата = СвойстваПоиска.Получить("Дата");
				ОбновлениеИнформационнойБазы.ЗаписатьДанные(Объект);
				СсылкаНаОбъект = ИскомаяСсылка;
			КонецЕсли;
		Иначе
			СсылкаНаОбъект = ИскомаяСсылка;
		КонецЕсли;
	КонецЕсли;
КонецЕсли;</Текст>
				<Параметры>СсылкаНаОбъект, ИмяТаблицы, СвойстваПоиска , ПараметрыОбъекта</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ПроверитьДатуЗапретаЗагрузкиДанныхОбъектов" ИспользуетсяПриЗагрузке="true">
				<Текст>// Параметры:
//  ЗагруженныеОбъекты

Если ОбщегоНазначения.ПодсистемаСуществует("СтандартныеПодсистемы.ДатыЗапретаИзменения") Тогда
	
	МодульДатыЗапретаИзменения = ОбщегоНазначения.ОбщийМодуль("ДатыЗапретаИзменения");
	
	Отказ = Ложь;
	ОписаниеОшибки = "";
	
	Граница = ЗагруженныеОбъекты.Количество() - 1;
	Для Индекс = 0 По Граница Цикл
		
		СтрокаОбъекта = ЗагруженныеОбъекты[Граница - Индекс];
		
		ЭлементДанных = СтрокаОбъекта.Объект;
		
		МетаданныеОбъекта = ЭлементДанных.Метаданные();
		Если Метаданные.Документы.Содержит(МетаданныеОбъекта) Тогда
			
			// Удаление свойства которое могло быть установлено при записи объекта
			// если по объекту уже проводилась проверка запрета загрузки.
			ЭлементДанных.ДополнительныеСвойства.Удалить("ПропуститьПроверкуЗапретаИзменения");
			
			МодульДатыЗапретаИзменения.ПроверитьДатыЗапретаЗагрузкиДанных(ЭлементДанных, УзелОбменаЗагрузкаДанных, Отказ, ОписаниеОшибки);
			
			Если Отказ Тогда
				ЗагруженныеОбъекты.Удалить(Граница - Индекс);
			КонецЕсли;
			
		КонецЕсли
		
	КонецЦикла;
	
КонецЕсли;</Текст>
				<Параметры>ЗагруженныеОбъекты</Параметры>
			</Алгоритм>
			<Алгоритм Имя="УстановитьВидПодразделения" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  Подразделение
//  ВидПодразделения

НаборСвойств = УправлениеСвойствами.НаборСвойствПоИмени("Справочник_Подразделения");
Если НаборСвойств &lt;&gt; Неопределено Тогда
	
	СвойствоСсылка = ПланыВидовХарактеристик.ДополнительныеРеквизитыИСведения.НайтиПоНаименованию("Вид подразделения (Подразделения)");
	
	Если СвойствоСсылка.Пустая() Тогда
		
		СвойствоОбъект = ПланыВидовХарактеристик.ДополнительныеРеквизитыИСведения.СоздатьЭлемент();
		СвойствоОбъект.Наименование              = НСтр("ru='Вид подразделения (Подразделения)'");
		СвойствоОбъект.Заголовок                 = НСтр("ru='Вид подразделения'");
		СвойствоОбъект.Виден                     = Истина;
		СвойствоОбъект.Доступен                  = Истина;
		СвойствоОбъект.НаборСвойств              = НаборСвойств;
		СвойствоОбъект.ТипЗначения               = Новый ОписаниеТипов("Строка");
		СвойствоОбъект.ЭтоДополнительноеСведение = Истина;
		
		ЗаписатьОбъектВИБ(СвойствоОбъект, ТипЗнч(СвойствоОбъект));
		
		СвойствоСсылка = СвойствоОбъект.Ссылка;
		
		НаборОбъект = НаборСвойств.ПолучитьОбъект();
		СвойствоНабора = НаборОбъект.ДополнительныеСведения.Добавить();
		СвойствоНабора.Свойство = СвойствоСсылка;
		НаборОбъект.Записать();
		
	КонецЕсли;
	
	ТаблицаСвойствИЗначений = Новый ТаблицаЗначений;
	ТаблицаСвойствИЗначений.Колонки.Добавить("Свойство", Новый ОписаниеТипов("ПланВидовХарактеристикСсылка.ДополнительныеРеквизитыИСведения"));
	ТаблицаСвойствИЗначений.Колонки.Добавить("Значение", Новый ОписаниеТипов("Строка"));
	
	ОписаниеСвойства = ТаблицаСвойствИЗначений.Добавить();
	ОписаниеСвойства.Свойство = СвойствоСсылка;
	ОписаниеСвойства.Значение = ВидПодразделения;
	
	УправлениеСвойствами.ЗаписатьСвойстваУОбъекта(Подразделение, ТаблицаСвойствИЗначений);
	
КонецЕсли;</Текст>
				<Параметры>Подразделение, ВидПодразделения</Параметры>
			</Алгоритм>
			<Алгоритм Имя="УстановитьОчередностьДокументов" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Параметры:
//  СтрокаТаблицы

СсылкаОбъекта = СтрокаТаблицы.Объект.Ссылка;

Если ТипЗнч(СсылкаОбъекта) = Тип("ДокументСсылка.ПоступлениеМЗ")
 Или ТипЗнч(СсылкаОбъекта) = Тип("ДокументСсылка.ВыпускПродукции") Тогда
	
	СтрокаТаблицы.Очередность = 4;
	
ИначеЕсли ТипЗнч(СсылкаОбъекта) = Тип("ДокументСсылка.НакладнаяНаОтпускМ15")
 Или ТипЗнч(СсылкаОбъекта) = Тип("ДокументСсылка.ОтчетОРозничныхПродажах")
 Или ТипЗнч(СсылкаОбъекта) = Тип("ДокументСсылка.ВедомостьНаВыдачуМЗНаНуждыУчреждения")
 Или ТипЗнч(СсылкаОбъекта) = Тип("ДокументСсылка.АктСписанияМЗ")
 Или ТипЗнч(СсылкаОбъекта) = Тип("ДокументСсылка.ОперацияБух") Тогда
	
	СтрокаТаблицы.Очередность = 6;
	
Иначе // ТипЗнч(СсылкаОбъекта) = Тип("ДокументСсылка.ТребованиеНакладная0315006")
	
	СтрокаТаблицы.Очередность = 5;
	
КонецЕсли;</Текст>
				<Параметры>СтрокаТаблицы</Параметры>
			</Алгоритм>
		</Группа>
	</Алгоритмы>
	<Запросы/>
</ПравилаОбмена>